{"version":3,"sources":["elements/constants.ts","utils/calculate.ts","stores/UIStore.ts","stores/myIndexDb.ts","elements/node.tsx","containers/ScalingContainer.tsx","elements/path.tsx","utils/useKeyboardShortcut.ts","containers/EditorContainer.tsx","containers/StatusContainer.tsx","containers/FunctionContainer.tsx","utils/importAndExport.ts","asset/circle.svg","asset/pen.svg","asset/mouse.svg","asset/download.svg","asset/rectangle.svg","containers/ToolbarContainer.tsx","containers/BasciLayout.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["nodeTypes","getRelativePositon","event","editorInfo","UIStore","x","clientX","left","y","clientY","top","getCentralSymmetryPosition","node","ctr2PosX","posX","ctrPosX","ctr2PosY","posY","ctrPosY","getCircleNodes","radius","Math","sqrt","h","nodes","getRectNodes","scallingPos","pre","now","pos","border","width","height","mouseState","type","drugging","pathid","nodeid","currentTool","pathList","editingPathId","setPathBbox","path","svgBox","getBBox","ctrx","ctry","centerPoint","myIndexDB","update","initPathList","id","push","addPath","Number","random","toString","substr","Date","strokeWidth","stroke","fill","rotate","scalling","scaleX","scaleY","scale_origin","translate","right","bottom","dragPath","length","deletePath","pathId","splice","remove","setEditingPath","setNodes","nodeId","addNodes","ctr2PoxY","index","over","nodesLength","add","slice","setMouseState","dragging","setCurrentTool","toolName","copyPath","newPathid","nodelist","item","movePath","moveX","moveY","it","setDragPath","setBorder","setTranslate","setScalling","setScaleY","indexOf","preHeight","setScaleX","preWidth","setScale","scaleFinshX","scaleFinshY","setStateInfo","name","value","oldX","oldY","makeAutoObservable","this","dbName","version","tableName","db","openDB","Promise","resolve","reject","request","window","indexedDB","open","onsuccess","console","log","target","result","onupgradeneeded","create_table","onerror","idb","objectStoreNames","contains","createObjectStore","keyPath","createIndex","unique","newPath","toJS","transaction","objectStore","readAll","openCursor","cursor","key","continue","_","put","delete","Node","observer","props","onClick","onMouseLeave","className","cx","cy","mouseEvent","isEditingNode","handleMouseDown","elec","onMouseDown","e","x1","y1","x2","y2","ScalingContainer","useEffect","setBorderD","useState","borderD","stopPropagation","transform","d","strokeDasharray","getD","i","handleClick","handleOnMouseMove","throttle","nums","reduce","cur","flat","bezier","Bezier","setBezier","nodeInfo","project","setNewNode","t","newNode","paths","mockNode","_nodes","attrD","getEditingPath","map","onMouseOver","split","points","findIndex","undefined","addingNode","scale","transform-origin","blacklistedTargets","keysReducer","state","action","data","useKeyboardShortcut","command","callback","shortcutKeys","initKeysMapping","toLowerCase","useReducer","keys","setKeys","keydownListener","useCallback","assignedKey","keydownEvent","loweredKey","cancelBubble","repeat","includes","tagName","keyupListener","keyupEvent","raisedKey","Object","values","filter","forEach","addEventListener","removeEventListener","EditorContainer","edtiorRef","current","getBoundingClientRect","setEditorInfo","a","setNode","useRef","editing","setPathId","startNode","setStartNode","_pathid","mouseUpTimeChange","toolNode","setToolNode","newToolNode","setNewToolNode","setNewnode","lastNode","setLastnode","setPos","handleMouseMove","currentPathid","document","body","style","angle","signOfAB","cos","pow","radina","acos","PI","getAngle","ref","node1","onMouseMove","onMouseUp","clearTimeout","setTimeout","center","l","cosv","sinv","sin","newBorder","calRotatePath","_pathId","onDoubleClick","r","Array","addOtherPath","StatusContainer","pathInfo","inputChange","toFixed","onChange","min","max","readOnly","ToolbarContainer","set","exportToSvg","editor","getElementById","source","XMLSerializer","serializeToString","replace","blob","Blob","createElement","download","href","URL","createObjectURL","textContent","dataset","downloadurl","join","click","alt","src","mouse","circle","rectangle","pen","BasicLayout","setCurrenttool","handleToolChange","App","BasciLayout","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.cc383d66.chunk.js","sourcesContent":["export const nodeTypes = {\n  AnchorPoint: 0,\n  Ctr1Point: 1,\n  Ctr2Point: 2\n}\n","import { UIStore, Node } from '../stores/UIStore'\n\nexport function getRelativePositon(event: any) {\n  const editorInfo = UIStore.editorInfo;\n  return {\n    x: event.clientX - editorInfo.left,\n    y: event.clientY - editorInfo.top\n  }\n}\n\nexport function getCentralSymmetryPosition(node: Node) {\n  return {\n    ctr2PosX: node.posX * 2 - node.ctrPosX,\n    ctr2PosY: node.posY * 2 - node.ctrPosY\n  }\n}\n\nexport function getAngle(node:Node){\n  let {posX:x1,posY:y1,ctrPosX:x2,ctrPosY:y2} = node;\n   var signOfAB = x1*y2 - y1*x2 ;\n  //计算cos =(x1x2+y1y2)/[√(x1²+y1²)*√(x2²+y2²)]\n   var cos =( x1 * x2 + y1 * y2) /( Math.sqrt(Math.pow(x1, 2) + Math.pow(y1, 2)) * Math.sqrt(Math.pow(x2, 2) + Math.pow(y2, 2)) );\n   var radina = Math.acos(cos);\n   var angle =  180 / (Math.PI / radina);\n  //如果在中线左边 就需要加 180度\n    if(signOfAB < 0){\n        angle =  - angle;\n    }\n    return angle;\n}\n\nexport function calRotatePath(pathid:number){\n  const path = UIStore.pathList[pathid];\n  const angle = path.rotate;\n  const center = path.centerPoint;\n  const border = path.border;\n\n  const  l = (angle * Math.PI) / 180;\n  const  cosv =  Math.cos(l);\n  const  sinv =  Math.sin(l);\n\n  let newNode = {\n    posX:-1,\n    posY:-1,\n    ctrPosX: -1,\n    ctrPosY: -1,\n    ctr2PosX: -1,\n    ctr2PosY: -1\n  }\n  path.nodes.forEach((item,index)=>{\n    newNode.posX = (item.posX - center.ctrx) * cosv - (item.posY - center.ctry) * sinv + center.ctrx;\n    newNode.posY =  (item.posX - center.ctrx) * sinv + (item.posY - center.ctry) * cosv + center.ctry;      \n    newNode.ctrPosX = (item.ctrPosX - center.ctrx) * cosv - (item.ctrPosY - center.ctry) * sinv + center.ctrx;\n    newNode.ctrPosY = (item.ctrPosX - center.ctrx) * sinv + (item.ctrPosY - center.ctry) * cosv + center.ctry;\n    if(item.ctr2PosX && item.ctr2PosY){\n      newNode.ctr2PosX = (item.ctr2PosX - center.ctrx) * cosv - (item.ctr2PosY - center.ctry) * sinv + center.ctrx;\n      newNode.ctr2PosY =  (item.ctr2PosX - center.ctrx) * sinv + (item.ctr2PosY - center.ctry) * cosv + center.ctry;\n      UIStore.setNodes(pathid,index,newNode);\n    }else{\n      UIStore.setNodes(pathid,index,{posX:newNode.posX, posY:newNode.posY, ctrPosX: newNode.ctrPosX, ctrPosY:newNode.ctrPosY });\n    }\n  })\n\n  let newBorder = [{ctrx:-1, ctry:-1},{ctrx:-1, ctry:-1},{ctrx:-1, ctry:-1},{ctrx:-1, ctry:-1}];\n  border.forEach((item,index)=>{\n    newBorder[index].ctrx = (item.ctrx - center.ctrx) * cosv - (item.ctry - center.ctry) * sinv + center.ctrx;\n    newBorder[index].ctry = (item.ctrx - center.ctrx) * sinv + (item.ctry - center.ctry) * cosv + center.ctry;\n  })\n  UIStore.setBorder(pathid,newBorder);\n}\n\n\nexport function getCircleNodes(node: Node){\n  const C = 0.552284749831;  \n  let {posX,posY,ctrPosY,ctrPosX} = node;\n  let radius = Math.sqrt((posX-ctrPosX)*(posX-ctrPosX) + (posY-ctrPosY)* (posY-ctrPosY));\n  let h = C * radius; \n\n  let nodes = [];\n  nodes[0] = {\n    posX:posX,\n    posY:posY + radius,\n    ctrPosX:posX + h,\n    ctrPosY:posY + radius,\n    ctr2PosX: posX - h,\n    ctr2PosY: posY + radius,\n  }\n  nodes[1] = {\n    posX:posX + radius,\n    posY:posY,\n    ctrPosX: posX + radius,\n    ctrPosY: posY + h,\n    ctr2PosX:posX + radius,\n    ctr2PosY:posY - h\n  }\n  nodes[2] = {\n    posX:posX,\n    posY:posY - radius,\n    ctrPosX: posX + h,\n    ctrPosY: posY - radius,\n    ctr2PosX:posX - h,\n    ctr2PosY:posY - radius\n  }\n  nodes[3] = {\n    posX:posX - radius,\n    posY:posY,\n    ctrPosX: posX - radius,\n    ctrPosY: posY - h,\n    ctr2PosX:posX - radius,\n    ctr2PosY:posY + h\n  }\n\n  return nodes;\n}\n\n\nexport function getRectNodes(node: Node){ \n  let {posX,posY,ctrPosY,ctrPosX} = node;\n\n  let nodes = [];\n  nodes[0] = {\n    posX:posX,\n    posY:posY,\n    ctrPosX:posX,\n    ctrPosY:posY,\n    ctr2PosX:posX,\n    ctr2PosY:posY\n  }\n  nodes[1] = {\n    posX:ctrPosX,\n    posY:posY,\n    ctrPosX: ctrPosX,\n    ctrPosY: posY,\n    ctr2PosX:ctrPosX,\n    ctr2PosY:posY\n  }\n  nodes[2] = {\n    posX:ctrPosX,\n    posY:ctrPosY,\n    ctrPosX:ctrPosX,\n    ctrPosY:ctrPosY,\n    ctr2PosX:ctrPosX,\n    ctr2PosY:ctrPosY\n  }\n  nodes[3] = {\n    posX:posX,\n    posY:ctrPosY,\n    ctrPosX: posX,\n    ctrPosY: ctrPosY,\n    ctr2PosX:posX,\n    ctr2PosY:ctrPosY\n  }\n  return nodes;\n}\nexport function scallingPos(pre: number, now: number, pos:number, border: number){\n  if(pos === border){\n    return 0;\n  }\n  return (pos-border)/pre*now;\n}\n\nexport function genID(){\n  return Number(Math.random().toString().substr(3, 18) + Date.now()).toString(36);\n}\n","import { makeAutoObservable} from 'mobx';\nimport { nodeTypes } from '../elements/constants';\nimport { myIndexDB } from './myIndexDb';\nimport {genID, scallingPos} from '../utils/calculate';\nexport interface Node{\n  posX: number,\n  posY: number,\n  ctrPosX: number,\n  ctrPosY: number,\n  ctr2PosX?: number,\n  ctr2PosY?: number,\n}\nexport interface Point{\n  ctrx:number,\n  ctry:number\n}\nexport interface Path {\n  id: string,\n  nodes: Node[],\n  type: number, // 0 非闭合 1 闭合\n  strokeWidth: number,\n  stroke: string,\n  fill:string,\n  centerPoint:Point,//路径中心\n  rotate:number;//旋转的角度\n  border: Point[],//边界  point[0]代表左上角  point[1]右上角  point[2]右下角  point[3] 左下角\n  scalling:string,\n  scaleX: number,\n  scaleY: number,\n  scale_origin: string,\n  translate:{\n    left: number,\n    right: number,\n    top: number,\n    bottom: number\n  },\n  dragPath: {\n    x: number,\n    y: number\n  }\n}\n\nclass UIstore {\n\n  editorInfo = {\n    width: 800,\n    height: 600,\n    left: 0,\n    top: 0\n  }\n  mouseState = {\n    type: nodeTypes.AnchorPoint,\n    drugging: false,\n    pathid: -1,\n    nodeid: -1,\n  }\n\n  currentTool = \"mouse\";\n\n  pathList: Path[] = [];\n  editingPathId = -1;\n  \n  constructor() {\n    makeAutoObservable(this); \n  }\n\n  //设置路径边界和中心\n  setPathBbox = (path:SVGPathElement,pathid:number) => {\n    let svgBox = path.getBBox();\n    let ctrx = svgBox.x + (svgBox.width >> 1);\n    let ctry = svgBox.y + (svgBox.height >> 1);\n    this.pathList[pathid].centerPoint = {ctrx,ctry};\n    this.pathList[pathid].border = [\n      {ctrx:svgBox.x, ctry:svgBox.y},\n      {ctrx: svgBox.x + svgBox.width, ctry:svgBox.y},\n      {ctrx: svgBox.x + svgBox.width, ctry:svgBox.y + svgBox.height},\n      {ctrx: svgBox.x, ctry:svgBox.y + svgBox.height}\n    ];\n    myIndexDB.update(this.pathList[pathid]);\n  }\n\n  initPathList = (id:number,path:Path) =>{\n    // this.pathList[id] = path; \n    this.pathList.push(path);\n  }\n\n  addPath = (type?:number) => {\n    this.pathList.push(\n        {\n          id: genID(),\n          nodes: [],\n          strokeWidth: 5,\n          stroke: \"#000000\",\n          fill: \"none\",\n          type: type || 0,\n          centerPoint:{ctrx:-1,ctry:-1},\n          rotate:0,\n          border:[{ctrx:-1,ctry:-1},{ctrx:-1,ctry:-1},{ctrx:-1,ctry:-1},{ctrx:-1,ctry:-1}],\n          scalling:\"\",\n          scaleX: 1,\n          scaleY: 1,\n          scale_origin: '',\n          translate:{\n            left: 0,\n            right: 0,\n            top: 0,\n            bottom: 0\n          },\n          dragPath: {\n            x: 0,\n            y: 0\n          }\n        }\n    )\n    return this.pathList.length - 1;\n  }\n\n  deletePath = (pathId: number) => {\n    const id = this.pathList[pathId].id;\n    this.pathList.splice(pathId,1);\n    // for (let i = 0; i < this.pathList.length; i ++) {\n    //   this.pathList[i].id = i;\n    // }\n    this.editingPathId = -1;\n    myIndexDB.remove(id);\n  }\n\n  setEditingPath = (pathId: number) => {\n    this.editingPathId = pathId;\n  }\n\n  setNodes = (pathId: number, nodeId: number, node: Node) => {\n    if(this.pathList[pathId]){\n      this.pathList[pathId].nodes[nodeId] = node;\n      myIndexDB.update(this.pathList[pathId]);\n    }\n  }\n\n  addNodes =(pathId: number , posX: number, posY: number, ctrPosX?: number, ctrPosY?: number, ctr2PosX?: number, ctr2PoxY?: number, index?: number,over?:boolean) => {\n\n    const nodesLength = this.pathList[pathId].nodes.length;\n    const type = this.pathList[pathId].type;\n    if(nodesLength === 0 || over){\n      if(type){//闭合路径的第一个有两个控制点\n        this.pathList[pathId].nodes.push(\n          {\n            posX: posX,\n            posY: posY,\n            ctrPosX: ctrPosX || posX,\n            ctrPosY: ctrPosY || posY,\n            ctr2PosX: ctr2PosX,\n            ctr2PosY: ctr2PoxY\n          }\n        )\n      }\n      else{//非闭合路径的第一个和最后一个只有一个控制点\n        this.pathList[pathId].nodes.push(\n          {\n            posX: posX,\n            posY: posY,\n            ctrPosX: ctrPosX || posX,\n            ctrPosY: ctrPosY || posY\n          }\n        )\n      }\n      if(nodesLength === 0){\n        myIndexDB.add(this.pathList[pathId]);\n      }else{\n        myIndexDB.update(this.pathList[pathId]);\n      }\n    }\n    else{\n      this.pathList[pathId].nodes = [\n        ...this.pathList[pathId].nodes.slice(0, index || nodesLength),\n        {\n          posX: posX,\n          posY: posY,\n          ctrPosX: ctrPosX || posX,\n          ctrPosY: ctrPosY || posY,\n          ctr2PosX: ctr2PosX,\n          ctr2PosY: ctr2PoxY\n        },\n        ...this.pathList[pathId].nodes.slice(index || nodesLength)\n      ]\n      myIndexDB.update(this.pathList[pathId]);\n    }\n\n  }\n\n  setMouseState = (type: number, dragging:boolean, pathid:number, nodeid:number) => {\n    this.mouseState.pathid = pathid;\n    this.mouseState.nodeid = nodeid;\n    this.mouseState.type = type;\n    this.mouseState.drugging = dragging;\n  }\n\n  setCurrentTool = (toolName: string) => {\n    this.currentTool = toolName;\n  }\n\n  copyPath = (pathid: number) => {\n    const newPathid = this.addPath(this.pathList[pathid].type);\n    const nodelist = this.pathList[pathid].nodes;\n    for (let item of nodelist) {\n      if(item.ctr2PosY && item.ctr2PosX){\n        this.addNodes(newPathid,item.posX + 10,item.posY + 10,item.ctrPosX + 10,item.ctrPosY + 10,item.ctr2PosX + 10,item.ctr2PosY + 10);\n      }\n      else{\n        this.addNodes(newPathid,item.posX + 10,item.posY + 10,item.ctrPosX + 10,item.ctrPosY + 10);\n\n      }\n      }\n    this.pathList[newPathid].fill = this.pathList[pathid].fill;\n    this.pathList[newPathid].stroke = this.pathList[pathid].stroke;\n    this.pathList[newPathid].strokeWidth = this.pathList[pathid].strokeWidth;\n\n\n  }\n\n  movePath = (pathid: number , moveX: number , moveY: number) => {\n    for( let it of this.pathList[pathid].nodes){\n      it.posX += moveX;\n      it.posY += moveY;\n      it.ctrPosX += moveX;\n      it.ctrPosY += moveY;\n      if(it.ctr2PosY && it.ctr2PosX){\n        it.ctr2PosX += moveX;\n        it.ctr2PosY += moveY;\n      }\n    }\n    for( let it of this.pathList[pathid].border){\n      it.ctrx += moveX;\n      it.ctry += moveY;\n    }\n    this.pathList[pathid].centerPoint.ctrx += moveX;\n    this.pathList[pathid].centerPoint.ctry += moveY;\n\n    this.setDragPath(pathid,0,0);\n    myIndexDB.update(this.pathList[pathid]);\n  }\n\n  setBorder = (pathid: number, border: Point [])=>{\n    this.pathList[pathid].border = border;\n  }\n\n  setTranslate = (pathid: number, translate: {left: number, right: number,top: number,bottom: number}) =>{\n    this.pathList[pathid].translate=translate;\n  }\n  setScalling = (pathid: number, scalling: string) => {\n    if(pathid > -1){\n      this.pathList[pathid].scalling = scalling;\n    }\n}\n  setScaleY = (pathid: number,y: number) => {\n    if(this.pathList[pathid].scalling.indexOf(\"top\") !== -1){\n      if(y > this.pathList[pathid].border[2].ctry){\n        return\n      }\n      const preHeight = this.pathList[pathid].border[3].ctry - this.pathList[pathid].border[1].ctry;\n      const height  =this.pathList[pathid].border[3].ctry - y;\n      this.pathList[pathid].translate.top = preHeight - height;\n      this.pathList[pathid].scaleY = height/preHeight;\n    }\n    else {\n      if (y < this.pathList[pathid].border[0].ctry) {\n        return\n      }\n      const preHeight = this.pathList[pathid].border[3].ctry - this.pathList[pathid].border[1].ctry;\n      const height  = y - this.pathList[pathid].border[0].ctry;\n      this.pathList[pathid].scaleY = height/preHeight;\n      this.pathList[pathid].translate.bottom = height - preHeight;\n    }\n\n  }\n  setDragPath = (pathid: number,x: number, y: number) => {\n    this.pathList[pathid].dragPath = {x: x, y: y};\n  }\n\n  setScaleX = (pathid: number,x: number) => {\n    if(this.pathList[pathid].scalling.indexOf(\"left\") !== -1){\n      if(x > this.pathList[pathid].border[1].ctrx){\n        return\n      }\n      const preWidth = this.pathList[pathid].border[1].ctrx - this.pathList[pathid].border[0].ctrx;\n      const width  =this.pathList[pathid].border[1].ctrx - x\n      this.pathList[pathid].translate.left=preWidth-width;\n      this.pathList[pathid].scaleX=width/preWidth;\n    }\n    else {\n      if (x < this.pathList[pathid].border[0].ctrx) {\n        return\n      }\n      const preWidth = this.pathList[pathid].border[1].ctrx - this.pathList[pathid].border[0].ctrx;\n      const width  = x - this.pathList[pathid].border[0].ctrx;\n      this.pathList[pathid].translate.right = width - preWidth;\n      this.pathList[pathid].scaleX=width/preWidth;\n    }\n\n}\n  setScale = (pathid: number,x: number ,y: number) => {\n    this.pathList[pathid].scaleX = x;\n    this.pathList[pathid].scaleY = y;\n  }\n\n\n\nscaleFinshX =(pathid: number, x: number) => {//du\n    if(this.pathList[pathid].scalling.indexOf(\"left\") !== -1) {\n      const preWidth = this.pathList[pathid].border[1].ctrx - this.pathList[pathid].border[0].ctrx;\n      const width = this.pathList[pathid].border[1].ctrx - x;\n      const border = this.pathList[pathid].border[0].ctrx;\n      for (let it of this.pathList[pathid].nodes) {\n        it.posX = x + scallingPos(preWidth, width, it.posX, border);\n        it.ctrPosX = x + scallingPos(preWidth, width, it.ctrPosX, border);\n        if (it.ctr2PosX && it.ctr2PosY) {\n          it.ctr2PosX = x + scallingPos(preWidth, width, it.ctr2PosX, border);\n        }\n        this.pathList[pathid].border[0].ctrx = x;\n        this.pathList[pathid].border[3].ctrx = x;\n        this.pathList[pathid].centerPoint.ctrx = (this.pathList[pathid].border[1].ctrx + x) / 2;\n      }\n\n    }\n    else if(this.pathList[pathid].scalling.indexOf(\"right\") !== -1){\n      const preWidth = this.pathList[pathid].border[1].ctrx - this.pathList[pathid].border[0].ctrx;\n      const width = x - this.pathList[pathid].border[0].ctrx ;\n      const border = this.pathList[pathid].border[1].ctrx;\n      for (let it of this.pathList[pathid].nodes) {\n        it.posX = x + scallingPos(preWidth, width, it.posX, border);\n        it.ctrPosX = x + scallingPos(preWidth, width, it.ctrPosX, border);\n        if (it.ctr2PosX && it.ctr2PosY) {\n          it.ctr2PosX = x + scallingPos(preWidth, width, it.ctr2PosX, border);\n        }\n        this.pathList[pathid].border[1].ctrx = x;\n        this.pathList[pathid].border[2].ctrx = x;\n        this.pathList[pathid].centerPoint.ctrx = (this.pathList[pathid].border[0].ctrx + x) / 2;\n      }\n    }\n  this.pathList[pathid].scaleX=1;\n  this.pathList[pathid].translate.left=0;\n  this.pathList[pathid].translate.right=0;\n\n}\n\n  scaleFinshY =(pathid: number, y: number) => {\n    if(this.pathList[pathid].scalling.indexOf(\"top\") !== -1) {\n      const preHeight = this.pathList[pathid].border[3].ctry - this.pathList[pathid].border[0].ctry;\n      const height = this.pathList[pathid].border[3].ctry - y;\n      const border = this.pathList[pathid].border[0].ctry;\n      for (let it of this.pathList[pathid].nodes) {\n        it.posY = y + scallingPos(preHeight, height, it.posY, border);\n        it.ctrPosY = y + scallingPos(preHeight, height, it.ctrPosY, border);\n        if (it.ctr2PosX && it.ctr2PosY) {\n          it.ctr2PosY = y + scallingPos(preHeight, height, it.ctr2PosY, border);\n        }\n        this.pathList[pathid].border[0].ctry = y;\n        this.pathList[pathid].border[1].ctry = y;\n        this.pathList[pathid].centerPoint.ctry = (this.pathList[pathid].border[3].ctry + y) / 2;\n      }\n    }\n    else if(this.pathList[pathid].scalling.indexOf(\"bottom\") !== -1){\n      const preHeight = this.pathList[pathid].border[3].ctry - this.pathList[pathid].border[0].ctry;\n      const height = y - this.pathList[pathid].border[0].ctry ;\n      const border = this.pathList[pathid].border[3].ctry;\n      for (let it of this.pathList[pathid].nodes) {\n        it.posY = y + scallingPos(preHeight, height, it.posY, border);\n        it.ctrPosY = y + scallingPos(preHeight, height, it.ctrPosY, border);\n        if (it.ctr2PosX && it.ctr2PosY) {\n          it.ctr2PosY = y + scallingPos(preHeight, height, it.ctr2PosY, border);\n        }\n        this.pathList[pathid].border[3].ctry = y;\n        this.pathList[pathid].border[2].ctry = y;\n        this.pathList[pathid].centerPoint.ctry = (this.pathList[pathid].border[0].ctry + y) / 2;\n      }\n    }\n    this.pathList[pathid].scaleY=1;\n    this.pathList[pathid].translate.bottom=0;\n    this.pathList[pathid].translate.top=0;\n\n  }\n\n\n\n  setStateInfo = (pathId: number, name:string, value:string) => {\n    switch(name){\n      case 'X':\n        let oldX = this.pathList[pathId].nodes[0].posX;\n        this.movePath(pathId, Number(value) - oldX, 0);\n        break;\n      case 'Y':\n        let oldY = this.pathList[pathId].nodes[0].posY;\n        this.movePath(pathId,0, Number(value) - oldY);\n        break;\n      case 'fill':\n        this.pathList[pathId].fill = value;\n        break;\n      case 'strokeWidth':\n        this.pathList[pathId].strokeWidth = Number(value);\n        break;\n      case 'stroke':\n        this.pathList[pathId].stroke = value;\n        break;\n      case 'rotate':\n        this.pathList[pathId].rotate = Number(value);\n        break;\n      case 'scale_origin':\n        this.pathList[pathId].scale_origin = value;\n        break;\n      case 'scaleX':\n        this.pathList[pathId].scaleX = Number(value);\n        break;\n      case 'scaleY':\n        this.pathList[pathId].scaleY = Number(value);\n        break;\n      default:        \n    }\n    myIndexDB.update(this.pathList[pathId]);\n  }\n}\n\nexport const UIStore = new UIstore();","import {UIStore} from './UIStore';\nimport * as _ from 'lodash';\nimport {toJS} from 'mobx';\nclass IndexDB{\n\n    private dbName: string = 'svgData';//数据库名称\n    private version: number = 1;//数据库版本\n    private tableName: string = 'svgPath';//数据表名称\n    private db: IDBDatabase | null = null;\n\n    //打开数据库\n    openDB = () => {\n        return new Promise((resolve,reject)=>{\n            const request = window.indexedDB.open(this.dbName, this.version);\n\n            request.onsuccess = (event: any) => {//数据库打开成功\n                console.log('成功打开数据库')\n                this.db = event.target.result\n                resolve(1);\n            };\n    \n            request.onupgradeneeded = (event:any) => {\n                console.log('成功新建数据库')\n                this.db = event.target.result;\n                this.create_table(this.db);\n            }\n    \n            request.onerror = (event:any) => {\n                console.log('数据库打开报错');\n                reject(1);\n            };\n        })\n        \n    }\n\n    //新建数据表\n    create_table  = (idb: any) => {\n        if (!idb.objectStoreNames.contains(this.tableName)) {\n            let objectStore;\n            objectStore = idb.createObjectStore(this.tableName, { keyPath: 'id' });\n            objectStore.createIndex('id', 'id', { unique: true });\n        }\n    }\n    //向indexdb中增加数据\n\n    add  = (newPath:any) => {\n        if(this.db){\n            let path = toJS(newPath);\n            let request = this.db.transaction([this.tableName], 'readwrite')\n            .objectStore(this.tableName)\n            .add(path);\n            request.onsuccess = function (event:any) {\n                console.log('数据写入成功');\n            };\n    \n            request.onerror = function (event:any) {\n                console.log('数据写入失败');\n            }\n        } \n    }\n    //读取所有数据\n    readAll = () => {\n            return new Promise((resolve,reject)=>{\n                if(this.db){\n                    let objectStore = this.db.transaction(this.tableName).objectStore(this.tableName);\n                    objectStore.openCursor().onsuccess = function (event:any) {\n                        var cursor = event.target.result;\n                        if (cursor) {\n                            UIStore.initPathList(cursor.key,cursor.value);\n                            cursor.continue();\n                        } else {\n                            console.log('没有更多数据了！');\n                            resolve(1);\n                        }\n                    };\n                }\n                else{\n                    reject();\n                }\n            })\n    }\n\n    //更新数据\n    update = _.debounce((newPath:any)=> {\n        if(this.db){\n            let path = toJS(newPath);\n            let request = this.db.transaction([this.tableName], 'readwrite')\n            .objectStore(this.tableName)\n            .put(path);\n            request.onsuccess = function (event:any) {\n                console.log('数据更新成功');\n            };\n\n            request.onerror = function (event:any) {\n                console.log('数据更新失败');\n            }\n        }\n    },1000,{ 'maxWait': 10000 })\n\n    //删除数据\n    remove = (id: string) => {\n        if(this.db){\n            let request = this.db.transaction([this.tableName], 'readwrite')\n            .objectStore(this.tableName)\n            .delete(id);\n          request.onsuccess = function (event) {\n            console.log('数据删除成功');\n          };\n        }\n    }\n\n}\nexport const myIndexDB = new IndexDB();","import { observer} from 'mobx-react';\nimport React, { Fragment } from 'react';\nimport { nodeTypes } from './constants';\nimport { Node as typeNode, UIStore } from '../stores/UIStore';\n\ninterface Props {\n  node: typeNode,\n  id: number,\n  pathId: number,\n  onClick?: any,\n  onMouseLeave?: any,\n}\n\nconst Node = observer((props: Props) => {\n\n  if (props.id === -1) {\n    return (\n      <circle onClick={props.onClick} onMouseLeave={props.onMouseLeave} className=\"point-control-add\" cx={props.node.posX} cy={props.node.posY} />\n    )\n  }\n\n  const node = UIStore.pathList[props.pathId].nodes[props.id];\n  const mouseEvent = UIStore.mouseState;\n  const isEditingNode = mouseEvent.pathid === props.pathId && mouseEvent.nodeid === props.id;\n  const currentTool = UIStore.currentTool;\n\n  const handleMouseDown = (elec:number, event: any) => {\n\n    if (currentTool === \"pen_new_path\") {\n      UIStore.pathList[props.pathId].type = 1; //设定成闭合\n    }\n\n    switch(elec) {\n      case nodeTypes.AnchorPoint: {\n        UIStore.setMouseState(nodeTypes.AnchorPoint, true, props.pathId, props.id);\n        break;\n      }\n\n      case nodeTypes.Ctr1Point: {\n        UIStore.setMouseState(nodeTypes.Ctr1Point, true, props.pathId, props.id);\n        break;\n      }\n\n      case nodeTypes.Ctr2Point: {\n        UIStore.setMouseState(nodeTypes.Ctr2Point, true, props.pathId, props.id);\n        break\n      }\n    }\n  }\n  \n  return(\n    <Fragment>\n      <circle className=\"point-control\" onMouseDown={(e) => handleMouseDown(nodeTypes.AnchorPoint, e)} cx={node.posX} cy={node.posY} />\n      \n      { isEditingNode && <line x1={node.posX} y1={node.posY} x2={node.ctrPosX} y2={node.ctrPosY} stroke=\"#555\" strokeWidth=\"1\" /> }\n      { isEditingNode && <circle className=\"point-control\" onMouseDown={(e) => handleMouseDown(nodeTypes.Ctr1Point, e)} cx={node.ctrPosX} cy={node.ctrPosY} /> }\n      \n\n      {isEditingNode && mouseEvent.nodeid === props.id && node.ctr2PosX && node.ctr2PosY && <circle className=\"point-control\" onMouseDown={(e) => handleMouseDown(nodeTypes.Ctr2Point, e)} cx={node.ctr2PosX} cy={node.ctr2PosY} />}\n      {isEditingNode && mouseEvent.nodeid === props.id && node.ctr2PosX && node.ctr2PosY && <line x1={node.posX} y1={node.posY} x2={node.ctr2PosX} y2={node.ctr2PosY} stroke=\"#555\" strokeWidth=\"1\" />}\n    </Fragment>\n  )\n\n})\n\nexport default Node;","import React, {Fragment, useEffect, useState} from 'react';\nimport {UIStore, Path as typePath} from '../stores/UIStore'\nimport '../style/ScalingContainer.scss'\n\ninterface Props{\n  path: typePath,\n  pathId: number,\n}\n\nconst ScalingContainer:  React.FC<Props> = (props) => {\n\n  useEffect(() => {\n    setBorder(props.path.border);\n    setTranslate(props.path.translate);\n    setBorderD(`M ${props.path.border[0].ctrx+props.path.translate.left} ${props.path.border[0].ctry+props.path.translate.top}`\n      +` C ${props.path.border[0].ctrx+props.path.translate.left} ${props.path.border[0].ctry+props.path.translate.top} ${props.path.border[0].ctrx+props.path.translate.left} ${props.path.border[0].ctry+props.path.translate.top} ${props.path.border[1].ctrx+props.path.translate.right} ${props.path.border[1].ctry+props.path.translate.top}`\n      +` C ${props.path.border[1].ctrx+props.path.translate.right} ${props.path.border[1].ctry+props.path.translate.top} ${props.path.border[1].ctrx+props.path.translate.right} ${props.path.border[1].ctry+props.path.translate.top} ${props.path.border[2].ctrx+props.path.translate.right} ${props.path.border[2].ctry+props.path.translate.bottom}`\n      +` C ${props.path.border[2].ctrx+props.path.translate.right} ${props.path.border[2].ctry+props.path.translate.bottom} ${props.path.border[2].ctrx+props.path.translate.right} ${props.path.border[2].ctry+props.path.translate.bottom} ${props.path.border[3].ctrx+props.path.translate.left} ${props.path.border[3].ctry+props.path.translate.bottom}`\n      +` C ${props.path.border[3].ctrx+props.path.translate.left} ${props.path.border[3].ctry+props.path.translate.bottom} ${props.path.border[3].ctrx+props.path.translate.left} ${props.path.border[3].ctry+props.path.translate.bottom} ${props.path.border[0].ctrx+props.path.translate.left} ${props.path.border[0].ctry+props.path.translate.top}`)\n\n\n  }, [props])\n  const [translate, setTranslate] = useState(props.path.translate);\n  const [border, setBorder] = useState(props.path.border);\n  const [borderD,setBorderD] = useState<string>(`M ${props.path.border[0].ctrx} ${props.path.border[0].ctry}`\n    +` C ${props.path.border[0].ctrx} ${props.path.border[0].ctry} ${props.path.border[0].ctrx} ${props.path.border[0].ctry} ${props.path.border[1].ctrx} ${props.path.border[1].ctry}`\n    +` C ${props.path.border[1].ctrx} ${props.path.border[1].ctry} ${props.path.border[1].ctrx} ${props.path.border[1].ctry} ${props.path.border[2].ctrx} ${props.path.border[2].ctry}`\n    +` C ${props.path.border[2].ctrx} ${props.path.border[2].ctry} ${props.path.border[2].ctrx} ${props.path.border[2].ctry} ${props.path.border[3].ctrx} ${props.path.border[3].ctry}`\n    +` C ${props.path.border[3].ctrx} ${props.path.border[3].ctry} ${props.path.border[3].ctrx} ${props.path.border[3].ctry} ${props.path.border[0].ctrx} ${props.path.border[0].ctry}`)\n\n\n  const handleMouseDown = (event: any) => {\n    event.stopPropagation();\n    UIStore.setScalling(props.pathId, event.target.id);\n    switch (event.target.id){\n      case \"left\" :\n      case \"left_bottom\" :\n      case \"bottom\" :\n        UIStore.setStateInfo(props.pathId, \"scale_origin\", `${props.path.border[1].ctrx} ${props.path.border[1].ctry}`);\n        break;\n      case \"right\" :\n      case \"right_bottom\" :\n        UIStore.setStateInfo(props.pathId, \"scale_origin\", `${props.path.border[0].ctrx} ${props.path.border[0].ctry}`);\n        break;\n      case \"top\" :\n      case \"left_top\" :\n        UIStore.setStateInfo(props.pathId, \"scale_origin\", `${props.path.border[2].ctrx} ${props.path.border[2].ctry}`);\n        break;\n      case \"right_top\" :\n        UIStore.setStateInfo(props.pathId, \"scale_origin\", `${props.path.border[3].ctrx} ${props.path.border[3].ctry}`);\n        break;\n\n    }\n\n\n  }\n\n\n  return (\n\n    <Fragment >\n      <rect className='react' transform={`translate(${translate.left},${translate.top})`}  x={props.path.border[0].ctrx-4} y={border[0].ctry-4} />\n      <rect className='react' transform={`translate(${translate.right},${translate.top})`} x={border[1].ctrx-4} y={border[1].ctry-4} />\n      <rect className='react' transform={`translate(${translate.right},${translate.bottom})`} x={border[2].ctrx-4} y={border[2].ctry-4} />\n      <rect className='react' transform={`translate(${translate.left},${translate.bottom})`} x={border[3].ctrx-4} y={border[3].ctry-4} />\n      <rect className='react' transform={`translate(${(translate.left+translate.right)/2},${translate.top})`} x={props.path.centerPoint.ctrx-4} y={border[0].ctry-4}/>\n      <rect className='react' transform={`translate(${(translate.left+translate.right)/2},${translate.bottom})`} x={props.path.centerPoint.ctrx-4} y={border[3].ctry-4} />\n      <rect className='react' transform={`translate(${translate.left},${(translate.bottom+translate.top)/2})`} x={border[0].ctrx-4} y={props.path.centerPoint.ctry-4}/>\n      <rect className='react' transform={`translate(${translate.right},${(translate.bottom+translate.top)/2})`} x={border[1].ctrx-4} y={props.path.centerPoint.ctry-4} />\n      \n      <rect className='react-big' transform={`translate(${translate.left},${translate.top})`} id=\"left_top\" x={props.path.border[0].ctrx-8} y={border[0].ctry-8} onMouseDown={handleMouseDown}/>\n      <rect className='react-big' transform={`translate(${translate.right},${translate.top})`}id=\"right_top\" x={border[1].ctrx-8} y={border[1].ctry-8} onMouseDown={handleMouseDown}/>\n      <rect className='react-big' transform={`translate(${translate.right},${translate.bottom})`}id=\"right_bottom\" x={border[2].ctrx-8} y={border[2].ctry-8} onMouseDown={handleMouseDown}/>\n      <rect className='react-big' transform={`translate(${translate.left},${translate.bottom})`}id=\"left_bottom\" x={border[3].ctrx-8} y={border[3].ctry-8} onMouseDown={handleMouseDown}/>\n      <rect className='react-big' transform={`translate(${(translate.left+translate.right)/2},${translate.top})`}id=\"top\" x={props.path.centerPoint.ctrx-8} y={border[0].ctry-8} onMouseDown={handleMouseDown} />\n      <rect className='react-big' transform={`translate(${(translate.left+translate.right)/2},${translate.bottom})`}id=\"bottom\" x={props.path.centerPoint.ctrx-8} y={border[3].ctry-8} onMouseDown={handleMouseDown}/>\n      <rect className='react-big' transform={`translate(${translate.left},${(translate.bottom+translate.top)/2})`}id=\"left\" x={border[0].ctrx-8} y={props.path.centerPoint.ctry-8} onMouseDown={handleMouseDown}/>\n      <rect className='react-big' transform={`translate(${translate.right},${(translate.bottom+translate.top)/2})`}id=\"right\" x={border[1].ctrx-8} y={props.path.centerPoint.ctry-8} onMouseDown={handleMouseDown}/>\n      <path id=\"scale_react\" d={borderD}  strokeWidth='2' stroke='#55f' fill='none' strokeDasharray='5'/>\n    </Fragment>\n\n  )\n}\n\nexport default ScalingContainer;","import React, { Fragment, useState } from 'react';\nimport { Node as typeNode, UIStore, Path as typePath } from '../stores/UIStore';\nimport { getRelativePositon, getCentralSymmetryPosition } from '../utils/calculate';\nimport Node from './node';\nimport _ from 'lodash';\nimport Bezier from 'bezier-js';\nimport { observer } from 'mobx-react';\nimport ScalingContainer from '../containers/ScalingContainer';\n\ninterface Props{\n  path: typePath,\n  pathId: number,\n  currentTool:String;\n}\n\nconst path: React.FC<Props> = observer((props: Props) => {\n    \n    const id = props.pathId;\n\n    const getD = (nodes: string | any[], type: boolean) => {\n\n      let d = \"\";\n      const length = nodes.length;\n      if(length === 1){//钢笔增加路径的时候对第一个节点的渲染\n        return d;\n      }\n      for (let i = 0; i < nodes.length; i++) {\n        if (i === 0) {\n          d += `M ${nodes[i].posX} ${nodes[i].posY} C ${nodes[i].ctrPosX} ${nodes[i].ctrPosY} `\n        } else if (i + 1 <= nodes.length - 1) {\n          d += `${nodes[i].ctrPosX} ${nodes[i].ctrPosY} ${nodes[i].posX} ${nodes[i].posY} C ${nodes[i].ctr2PosX} ${nodes[i].ctr2PosY} `\n        } else {\n          d += `${nodes[i].ctrPosX} ${nodes[i].ctrPosY} ${nodes[i].posX} ${nodes[i].posY} `\n        }\n      }\n\n      if (type) {\n        const { ctr2PosX, ctr2PosY } = getCentralSymmetryPosition(nodes[0])\n        d += `C ${nodes[length - 1].ctr2PosX} ${nodes[length - 1].ctr2PosY} \n          ${nodes[0].ctr2PosX ? nodes[0].ctr2PosX : ctr2PosX} ${nodes[0].ctr2PosY ? nodes[0].ctr2PosY : ctr2PosY} ${nodes[0].posX} ${nodes[0].posY} z`\n      }\n\n      return d\n    }\n    \n    const getEditingPath = () => {\n      let paths = [];\n      let mockNode = null;\n\n      for (let i = 0; i + 1 < nodes.length; i++) {\n\n        if (i !== 0) {\n          const node = nodes[i];\n          mockNode = {\n            posX: node.posX,\n            posY: node.posY,\n            ctrPosX: node.ctr2PosX,\n            ctrPosY: node.ctr2PosY\n          }\n        }\n        \n        const _nodes = [\n          mockNode ? mockNode : nodes[i], \n          nodes[i + 1]\n        ]\n\n        const attrD = getD(_nodes, false);\n        paths.push({\n          attrD: attrD,\n          nodes: _nodes\n        });\n      }\n\n      if (props.path.type) { // 判定一下是不是闭合路径，如果是的话需要另外的控制点\n        let node = nodes[nodes.length - 1];\n        const mockEndNode = {\n          posX: node.posX,\n          posY: node.posY,\n          ctrPosX: node.ctr2PosX,\n          ctrPosY: node.ctr2PosY\n        }\n\n        node = nodes[0];\n        const mockStartNode = {\n          posX: node.posX,\n          posY: node.posY,\n          ctrPosX: node.ctr2PosX,\n          ctrPosY: node.ctr2PosY\n        }\n\n        const _nodes = [\n          mockEndNode,\n          mockStartNode\n        ]\n\n        const attrD = getD(_nodes, false);\n        paths.push({\n          attrD: attrD,\n          nodes: _nodes\n        });\n      }\n\n      return paths\n    }\n\n    const handleClick = (event: any) => {\n      event.stopPropagation();\n      UIStore.setEditingPath(id);\n      UIStore.setPathBbox(event.target, id);//被点击的时候计算中心点\n    }\n\n    const handleOnMouseMove = _.throttle((event: any, item: any) => {\n      event.stopPropagation();\n      if(props.currentTool !== \"pen_add_node\"){\n        return\n      }\n      const { x, y } = getRelativePositon(event);\n\n      const nums = item.nodes.reduce((pre: Array<number>, cur: typeNode, index: number) => {\n        if (index === item.nodes.length - 1) {\n          pre.push(cur.ctrPosX, cur.ctrPosY, cur.posX, cur.posY);\n        } else {\n          pre.push(cur.posX, cur.posY, cur.ctrPosX, cur.ctrPosY);\n        }\n\n        return pre\n      }, []).flat(1);\n\n      const bezier = new Bezier(nums);\n      setBezier(bezier);\n      const nodeInfo = bezier.project({x, y});\n\n      setNewNode({\n        posX: nodeInfo.x,\n        posY: nodeInfo.y,\n        ctrPosX: nodeInfo.x,\n        ctrPosY: nodeInfo.y,\n        t: nodeInfo.t\n      })\n\n    }, 50);\n\n    const handleAddNewNodeClick = () => {\n      if(props.currentTool !== \"pen_add_node\"){\n        return\n      }\n      const newPath = bezier?.split(newNode.t); // 这里贝塞尔曲线被分成了两个部分，需要分别更新左右两端\n      let points = newPath?.left.points; // 0 1 2 3 分别是第一个点的位置、控制点，第二个点的控制点、位置\n\n      if (!newPath || !points) {\n        return\n      }\n\n      let index = nodes.findIndex((node) => {\n        return node.posX === bezier?.points[0].x && node.posY === bezier?.points[0].y\n      });\n\n      let node = {\n        posX: points[0].x,\n        posY: points[0].y,\n        ctrPosX: index ? UIStore.pathList[id].nodes[index].ctrPosX : points[1].x,\n        ctrPosY: index ? UIStore.pathList[id].nodes[index].ctrPosY : points[1].y,\n        ctr2PosX: index ? points[1].x : undefined,\n        ctr2PosY: index ? points[1].y : undefined\n      } // 这里要判定一下index为0  即起始节点的情况，做特殊处理\n\n      let addingNode = {\n        posX: points[3].x,\n        posY: points[3].y,\n        ctrPosX: points[2].x,\n        ctrPosY: points[2].y,\n        ctr2PosX: 0,\n        ctr2PosY: 0\n      } // 这是新的节点信息\n\n      UIStore.setNodes(id, index, node); // 更新左端点\n\n      points = newPath?.right.points;\n\n      node = {\n        posX: points[3].x,\n        posY: points[3].y,\n        ctrPosX: points[2].x,\n        ctrPosY: points[2].y,\n        ctr2PosX: UIStore.pathList[id].nodes[index + 1].ctr2PosX || undefined,\n        ctr2PosY: UIStore.pathList[id].nodes[index + 1].ctr2PosY || undefined\n      } \n\n      addingNode.ctr2PosX = points[1].x;\n      addingNode.ctr2PosY = points[1].y; // 新的节点信息需要左右两端的\n      \n      UIStore.setNodes(id, index + 1, node); // 更新右端点\n\n      UIStore.addNodes(id, addingNode.posX, addingNode.posY, addingNode.ctrPosX, addingNode.ctrPosY, addingNode.ctr2PosX, addingNode.ctr2PosY, index + 1);\n      setNewNode(null);\n    }\n\n    const [newNode, setNewNode] = useState<any>();\n    const [bezier, setBezier] = useState<Bezier>();\n    const { nodes } = props.path;\n\n    if (props.currentTool === \"pen_add_node\") {\n      const paths = getEditingPath();\n      return (\n        <Fragment>\n          {\n            paths.map(item => \n              <Fragment>\n                <path key={item.attrD} onClick={handleClick} d={item.attrD} onMouseOver={e => handleOnMouseMove(e, item)} strokeWidth={props.path.strokeWidth} stroke={props.path.stroke}fill={props.path.fill}/>\n              </Fragment>\n            )\n          }\n          {nodes.length && nodes.map((node, index) => \n            <Node node={node} id={index} pathId={id} />\n          )}\n          {newNode && <Node node={newNode} id={-1} pathId={-1} onClick={handleAddNewNodeClick} onMouseLeave={() => setNewNode(null)} />}\n        </Fragment>\n      )\n    }\n\n    if (props.currentTool === \"mouse_rotate_path\" && UIStore.editingPathId === id) {\n      let rotate = `rotate(${props.path.rotate},${props.path.centerPoint.ctrx},${props.path.centerPoint.ctry})`;\n      let borderD = `M ${props.path.border[0].ctrx} ${props.path.border[0].ctry}` \n                      +` C ${props.path.border[0].ctrx} ${props.path.border[0].ctry} ${props.path.border[0].ctrx} ${props.path.border[0].ctry} ${props.path.border[1].ctrx} ${props.path.border[1].ctry}` \n                      +` C ${props.path.border[1].ctrx} ${props.path.border[1].ctry} ${props.path.border[1].ctrx} ${props.path.border[1].ctry} ${props.path.border[2].ctrx} ${props.path.border[2].ctry}` \n                      +` C ${props.path.border[2].ctrx} ${props.path.border[2].ctry} ${props.path.border[2].ctrx} ${props.path.border[2].ctry} ${props.path.border[3].ctrx} ${props.path.border[3].ctry}`\n                      +` C ${props.path.border[3].ctrx} ${props.path.border[3].ctry} ${props.path.border[3].ctrx} ${props.path.border[3].ctry} ${props.path.border[0].ctrx} ${props.path.border[0].ctry}`;\n      return (\n        <Fragment>\n          <path transform={rotate} onClick={handleClick} d={getD(nodes, !!props.path.type)} strokeWidth={props.path.strokeWidth} stroke={props.path.stroke} fill={props.path.fill}/>\n          <path d={borderD} transform={rotate} strokeWidth='2' stroke='#55f' fill='none' strokeDasharray='5'/>\n        </Fragment>\n\n      )\n    }\n\n  if (props.currentTool === \"mouse_drag_path\" && UIStore.editingPathId === id) {\n    let translate=`translate(${props.path.dragPath.x},${props.path.dragPath.y})`\n    let borderD = `M ${props.path.border[0].ctrx} ${props.path.border[0].ctry}`\n      +` C ${props.path.border[0].ctrx} ${props.path.border[0].ctry} ${props.path.border[0].ctrx} ${props.path.border[0].ctry} ${props.path.border[1].ctrx} ${props.path.border[1].ctry}`\n      +` C ${props.path.border[1].ctrx} ${props.path.border[1].ctry} ${props.path.border[1].ctrx} ${props.path.border[1].ctry} ${props.path.border[2].ctrx} ${props.path.border[2].ctry}`\n      +` C ${props.path.border[2].ctrx} ${props.path.border[2].ctry} ${props.path.border[2].ctrx} ${props.path.border[2].ctry} ${props.path.border[3].ctrx} ${props.path.border[3].ctry}`\n      +` C ${props.path.border[3].ctrx} ${props.path.border[3].ctry} ${props.path.border[3].ctrx} ${props.path.border[3].ctry} ${props.path.border[0].ctrx} ${props.path.border[0].ctry}`;\n\n    return (\n      <Fragment>\n        <path transform={translate}onClick={handleClick} d={getD(nodes, !!props.path.type)} strokeWidth={props.path.strokeWidth} stroke={props.path.stroke} fill={props.path.fill}/>\n        <path d={borderD} transform={translate} strokeWidth='2' stroke='#55f' fill='none' strokeDasharray='5'/>\n\n      </Fragment>\n\n    )\n  }\n\n  if (props.currentTool === \"mouse_scaling_path\" && UIStore.editingPathId === id) {\n    if(props.path.border.length === 4) {\n      let scale = `scale(${props.path.scaleX},${props.path.scaleY})`;\n      return(\n        <Fragment>\n          <path  transform ={scale} transform-origin={props.path.scale_origin}onClick={handleClick} d={getD(nodes, !!props.path.type)} strokeWidth={props.path.strokeWidth} stroke={props.path.stroke} fill={props.path.fill}/>\n          <ScalingContainer pathId={id} path={props.path}/>\n        </Fragment>\n      )\n    }\n  }\n\n    return (\n      <Fragment>\n        <path onClick={handleClick} d={getD(nodes, !!props.path.type)} strokeWidth={props.path.strokeWidth} stroke={props.path.stroke} fill={props.path.fill}/>\n        {id === UIStore.editingPathId && nodes.length && nodes.map((node, index) => \n          <Node key={index} node={node} id={index} pathId={id} />\n        )}\n      </Fragment>\n    )\n\n  }\n)\n\n\nexport default path;","import { useCallback, useEffect, useReducer } from \"react\";\n\nconst blacklistedTargets = [\"INPUT\", \"TEXTAREA\"];\n\nconst keysReducer = (state: any, action: any) => {\n  switch(action.type) {\n    case \"key-down\":\n      const keyDownState = { ...state, [action.key]: true };\n      return keyDownState\n\n    case \"key-up\":\n      const keyUpState = { ...state, [action.key]: false };\n      return keyUpState\n\n    case \"reset-keys\":\n      const resetState = { ...action.data };\n      return resetState;\n    default:\n      return state\n  }\n}\n\nconst useKeyboardShortcut = (command:string, callback: any) => {\n\n  const shortcutKeys = command.split(\"+\")\n\n  const initKeysMapping = shortcutKeys.reduce((pre, cur) => {\n    pre[cur.toLowerCase()] = false;\n    return pre\n  },{});\n\n  const [keys, setKeys] = useReducer(keysReducer, initKeysMapping);\n\n  const keydownListener = useCallback(\n    assignedKey => (keydownEvent: any) => {\n      const loweredKey = assignedKey.toLowerCase();\n\n      keydownEvent.stopPropagation();\n      keydownEvent.cancelBubble = true;\n      if (keydownEvent.repeat) return\n      if (blacklistedTargets.includes(keydownEvent.target.tagName)) return;\n      if (loweredKey !== keydownEvent.key.toLowerCase()) return;\n      if (keys[loweredKey] === undefined) return;\n      setKeys({ type: \"key-down\", key: loweredKey });\n      return false;\n    },\n    [keys]\n  );\n\n  const keyupListener = useCallback(\n    assignedKey => (keyupEvent: any) => {\n      const raisedKey = assignedKey.toLowerCase();\n\n      keyupEvent.stopPropagation();\n      keyupEvent.cancelBubble = true;\n      if (blacklistedTargets.includes(keyupEvent.target.tagName)) return;\n      if (keyupEvent.key.toLowerCase() !== raisedKey) return;\n      if (keys[raisedKey] === undefined) return;\n      setKeys({ type: \"key-up\", key: raisedKey });\n      return false;\n    },\n    [keys]\n  );\n\n  useEffect(() => {\n\n    if (!Object.values(keys).filter(value => !value).length) {\n      callback(keys)\n      setKeys({ type: \"reset-keys\", data: initKeysMapping });\n    } else {\n      setKeys({ type: null });\n    }\n  }, [callback, keys, initKeysMapping]);\n\n  useEffect(() => {\n    shortcutKeys.forEach(key => window.addEventListener(\"keydown\", keydownListener(key)));\n    return () => shortcutKeys.forEach(key => window.removeEventListener(\"keydown\", keydownListener(key)))\n  }, [])\n\n  useEffect(() => {\n    shortcutKeys.forEach(key => window.addEventListener(\"keyup\", keyupListener(key)));\n    return () => shortcutKeys.forEach(key => window.removeEventListener(\"keyup\", keyupListener(key)))\n  }, [])\n\n}\n\nexport default useKeyboardShortcut","import React, { Fragment,useEffect, useRef , useState} from 'react';\nimport {myIndexDB} from '../stores/myIndexDb';\nimport { Node as typeNode, UIStore } from '../stores/UIStore';\nimport Path from '../elements/path';\nimport { nodeTypes } from '../elements/constants';\nimport { getRelativePositon, getCentralSymmetryPosition ,getAngle,getCircleNodes,getRectNodes,calRotatePath} from '../utils/calculate';\nimport * as _ from 'lodash';\nimport '../style/EditorContainer.scss';\nimport useKeyboardShortcut from '../utils/useKeyboardShortcut';\n\ninterface Props{\n  currentTool:string;\n}\n\nconst EditorContainer: React.FC<Props> = (props) =>  {\n\n  useEffect(() => {\n    if (!edtiorRef) {\n      return\n    }\n    const editorInfo = edtiorRef?.current?.getBoundingClientRect();\n    if (editorInfo) {\n      UIStore.editorInfo.top = editorInfo.top;\n      UIStore.editorInfo.left = editorInfo.left;\n      setEditorInfo(editorInfo);\n    }\n    const initPathList = async() =>{\n      try{\n        await myIndexDB.openDB();\n        await myIndexDB.readAll();\n        setNode({ posX: -1, posY: -1, ctrPosX: -1, ctrPosY: -1});//加载结束后重新渲染页面\n        console.log('加载数据结束');\n      }catch(err){\n        console.log('加载失败');\n      }\n    }\n    initPathList();\n  }, [])\n\n  const edtiorRef = useRef<SVGSVGElement>(null);\n  const editing = useRef<boolean>(false)\n  const [pathId, setPathId] = useState<number>(-1)\n  const [editorInfo, setEditorInfo] = useState(UIStore.editorInfo);\n  const [startNode, setStartNode] = useState<Boolean>(false);\n  const pathList = UIStore.pathList;\n  let pathid = UIStore.mouseState.pathid;\n  let nodeid = UIStore.mouseState.nodeid;\n\n \n  const [node, setNode] = useState<typeNode>({posX: -1, posY: -1, ctrPosX: -1, ctrPosY: -1 });\n  \n  useEffect(() => {\n    UIStore.setNodes(UIStore.mouseState.pathid, UIStore.mouseState.nodeid, node);\n  }, [node])\n\n  useEffect(() => {\n    if (props.currentTool !== \"pen_new_path\"){\n      const _pathid=pathId;\n      if (_pathid !== -1 && UIStore.pathList[_pathid].nodes.length < 2){\n        UIStore.deletePath(_pathid);\n        editing.current=false;\n        setPathId(-1);\n      }\n      else if (_pathid !== -1 && UIStore.pathList[_pathid].nodes.length >= 2){\n        editing.current=false;\n        setPathId(-1);\n      }\n    }\n  }, [props.currentTool,pathId])\n\n  const [toolNode, setToolNode] = useState<boolean>(false);\n  const [newToolNode, setNewToolNode] = useState<typeNode>({posX: -1, posY: -1, ctrPosX: -1, ctrPosY: -1 }); \n  \n  const [newNode, setNewnode] = useState<typeNode>({posX: -1, posY: -1, ctrPosX: -1, ctrPosY: -1 });\n  const [lastNode, setLastnode] = useState<typeNode>({posX: -1, posY: -1, ctrPosX: -1, ctrPosY: -1 });\n\n  const [pos, setPos] = useState({posX : -1 ,posY : -1});\n  const [dragPath, setDragPath] = useState<boolean>(false);\n  let mouseUpTimeChange:any;\n\n  const handleMouseDown = (event: any) => {\n    event.stopPropagation();\n    const { x, y } = getRelativePositon(event);\n    switch(props.currentTool){\n      case 'mouse_drag_path':{\n        const currentPathid = UIStore.editingPathId;\n        if(currentPathid !== -1){\n          setDragPath(true);\n          setPos({\n            posX: x,\n            posY: y\n          })\n        }\n      break;\n      }\n\n      case 'mouse_rotate_path':{\n        const currentPathid = UIStore.editingPathId;\n        if(currentPathid !== -1){\n          setToolNode(true);\n          setNewToolNode({\n            posX:x,\n            posY:y,\n            ctrPosX:x,\n            ctrPosY:y\n          })\n        }\n      break;\n      }\n      case 'rectangle':\n      case 'circle':\n        setToolNode(true);\n        setNewToolNode({\n          posX:x,\n          posY:y,\n          ctrPosX:x,\n          ctrPosY:y\n        })\n      break;\n      case 'pen_drag_node':\n        pathid = UIStore.mouseState.pathid;\n        nodeid = UIStore.mouseState.nodeid;\n        if(pathid!==-1 && nodeid!== -1){\n          let node1 = UIStore.pathList[pathid].nodes[nodeid];\n          setNode({\n            ...node1\n          });\n       }\n      break;\n      case 'pen_new_path'://钢笔工具 按下的时候确定一个锚点的posx posy\n        if(!editing.current){\n          editing.current=true;\n          setStartNode(true);\n          setLastnode({//是路径的第一个锚点时 上一个锚点设置成一样\n            posX:x,\n            posY:y,\n            ctrPosX:x,\n            ctrPosY:y,\n            ctr2PosX:x,\n            ctr2PosY:y\n          })\n        }\n        setNewnode({\n          posX:x,\n          posY:y,\n          ctrPosX:x,\n          ctrPosY:y,\n          ctr2PosX:x,\n          ctr2PosY:y\n        })\n        break;\n    }\n  }\n    \n\n  const handleMouseMove = _.throttle((event: any) => {\n    event.stopPropagation();\n    const { x, y } = getRelativePositon(event);\n    switch(props.currentTool){\n      case 'mouse_drag_path':\n        if(!dragPath){\n          return;\n        }\n        const moveX=x-pos.posX;\n        const moveY=y-pos.posY;\n        const currentPathid = UIStore.editingPathId;\n        UIStore.setDragPath(currentPathid , moveX , moveY)\n\n      break;\n      case 'mouse_scaling_path':{\n        const currentPathid = UIStore.editingPathId;\n        if(currentPathid !== -1 && UIStore.pathList[currentPathid].scalling !== ''){\n          if(document.body.style.cursor === \"\"){\n            switch (UIStore.pathList[currentPathid].scalling){\n              case 'right':\n              case 'left':\n                document.body.style.cursor = 'e-resize';\n                break;\n              case 'top':\n              case 'bottom':\n                document.body.style.cursor = 's-resize';\n                break;\n              case 'left_bottom':\n              case 'right_top':\n                document.body.style.cursor = 'ne-resize';\n                break;\n              case 'left_top':\n              case 'right_bottom':\n                document.body.style.cursor = 'se-resize';\n                break;\n            }\n          }\n          if(UIStore.pathList[currentPathid].scalling.indexOf(\"left\") !== -1  || UIStore.pathList[currentPathid].scalling.indexOf(\"right\") !== -1){\n            UIStore.setScaleX(currentPathid,x);\n          }\n          if(UIStore.pathList[currentPathid].scalling.indexOf(\"top\") !== -1  || UIStore.pathList[currentPathid].scalling.indexOf(\"bottom\") !== -1){\n            UIStore.setScaleY(currentPathid,y);\n          }\n        }\n        break;\n      }\n      case 'mouse_rotate_path':{\n        if(toolNode){\n          const currentPathid = UIStore.editingPathId;\n          const {ctrx,ctry} = UIStore.pathList[currentPathid].centerPoint;\n          setNewToolNode({\n            ...newToolNode,\n            ctrPosX:x,\n            ctrPosY:y\n          })\n          let angle = getAngle({\n            posX:newToolNode.posX - ctrx,\n            posY:newToolNode.posY - ctry,\n            ctrPosX:newToolNode.ctrPosX - ctrx,\n            ctrPosY:newToolNode.ctrPosY - ctry\n          });\n          UIStore.setStateInfo(currentPathid,'rotate',angle.toString());\n        }\n      break;\n      }\n      case 'rectangle':\n      case 'circle':\n        if(toolNode){\n          setNewToolNode({\n            ...newToolNode,\n            ctrPosX:x,\n            ctrPosY:y\n          })\n        }\n      break;\n      case 'pen_drag_node':\n        if(!UIStore.mouseState.drugging){\n          return\n        }\n        switch (UIStore.mouseState.type) {\n          case (nodeTypes.AnchorPoint): {\n            setNode({\n              ...node,\n              posX: x,\n              posY: y,\n            });\n            break;\n          }\n    \n          case (nodeTypes.Ctr1Point): {\n            setNode({\n              ...node,\n              ctrPosX: x,\n              ctrPosY: y,\n            });\n            break;\n          }\n    \n          case (nodeTypes.Ctr2Point): {\n            setNode({\n              ...node,\n              ctr2PosX: x,\n              ctr2PosY: y\n            });\n            break;\n          }\n\n      }\n      break;\n      case 'pen_new_path'://钢笔工具 如果在编辑模式 移动鼠标的时候不断变化控制点\n        if(editing.current){\n          setNewnode(\n            {\n              ...newNode,\n              ctrPosX:x,\n              ctrPosY:y,\n            }\n          )\n        }\n      break;\n    }\n  }, 5, { 'trailing': true })\n \n\n  const handleMouseUp = (event: any) => {\n    event.stopPropagation();\n    const { x, y } = getRelativePositon(event);\n    clearTimeout(mouseUpTimeChange);\n    mouseUpTimeChange = setTimeout(\n        () => {\n          switch(props.currentTool){\n            case 'mouse_drag_path':\n              if(!dragPath){\n                return;\n              }\n              setDragPath(false);\n              const currentPathid = UIStore.editingPathId;\n              UIStore.movePath(currentPathid,x-pos.posX,y-pos.posY)\n              break;\n            case 'mouse_scaling_path':{\n              document.body.style.cursor = \"\";\n\n              const currentPathid = UIStore.editingPathId;\n              if(UIStore.pathList[currentPathid]?.scalling !== \"\"){\n                UIStore.scaleFinshX(currentPathid,x);\n                UIStore.scaleFinshY(currentPathid,y);\n                UIStore.setScalling(currentPathid,\"\");\n              }\n\n              break;\n            }\n            case 'mouse_rotate_path':\n              if(toolNode){\n                const currentPathid = UIStore.editingPathId;\n                calRotatePath(currentPathid);\n                UIStore.setStateInfo(currentPathid,'rotate','0');//把rotate置零\n              }\n              setToolNode(false);\n              setNewToolNode({posX: -1, posY: -1, ctrPosX: -1, ctrPosY: -1 });\n              break;\n            case 'rectangle':\n                if(toolNode){\n                  let _pathId = pathId;\n                  if(pathId === -1){\n                    _pathId = UIStore.addPath(1);\n                    let nodes = getRectNodes(newToolNode);\n                    nodes.forEach((node)=>{\n                      UIStore.addNodes(_pathId,node.posX,node.posY,node.ctrPosX,node.ctrPosY,node.ctr2PosX,node.ctr2PosY);\n                    })\n                  }\n                }\n                setToolNode(false);\n                setNewToolNode({posX: -1, posY: -1, ctrPosX: -1, ctrPosY: -1 });\n              break;\n            case 'circle':\n                if(toolNode){\n                  let _pathId = pathId;\n                  if(pathId === -1){\n                    _pathId = UIStore.addPath(1);\n                    let nodes = getCircleNodes(newToolNode);\n                    nodes.forEach((node)=>{\n                      UIStore.addNodes(_pathId,node.posX,node.posY,node.ctrPosX,node.ctrPosY,node.ctr2PosX,node.ctr2PosY);\n                    })\n                  }\n                }\n                setToolNode(false);\n                setNewToolNode({posX: -1, posY: -1, ctrPosX: -1, ctrPosY: -1 });\n              break;\n            case 'pen_drag_node':\n                UIStore.setMouseState(nodeTypes.AnchorPoint, false, pathid, nodeid);\n              break; \n            case 'pen_new_path':{//松开鼠标确定一个点 加入path里\n              if (!editing.current){\n                return;\n              }\n              let _pathId = pathId;\n              if(pathId === -1){\n                _pathId = UIStore.addPath()\n                setPathId(_pathId);\n              }\n\n              UIStore.setEditingPath(_pathId);\n\n              if (UIStore.pathList[_pathId].type) {\n                // 需要创建闭合路径了，退出编辑模式\n                const _node = UIStore.pathList[_pathId].nodes[0];\n                const { ctr2PosX, ctr2PosY } = getCentralSymmetryPosition(_node);\n                UIStore.pathList[_pathId].nodes[0].ctr2PosX = ctr2PosX;\n                UIStore.pathList[_pathId].nodes[0].ctr2PosY = ctr2PosY;\n                editing.current = false;\n                setPathId(-1);\n                return\n              }\n\n              const nodesLength = UIStore.pathList[_pathId].nodes.length;\n              const { ctr2PosX, ctr2PosY } = getCentralSymmetryPosition(newNode);\n              UIStore.addNodes(_pathId,newNode.posX,newNode.posY,newNode.ctrPosX,newNode.ctrPosY,ctr2PosX,ctr2PosY,nodesLength);\n              if(startNode){// 处理第一个节点的渲染\n                setLastnode({\n                  ...newNode,\n                  ctrPosX: ctr2PosX,\n                  ctrPosY: ctr2PosY\n                })\n                setStartNode(false);\n              }else{\n                setLastnode({\n                  ...newNode\n                })\n              }\n            }\n            break;\n          } \n\n        },250)\n  }\n\n  const pathDoubleClick:any = () => {\n    clearTimeout(mouseUpTimeChange);\n    switch(props.currentTool){\n      case 'pen_new_path':\n        if (!editing.current || pathId === -1){\n          return;\n        }\n        let _pathId = pathId;\n        const nodesLength = UIStore.pathList[_pathId].nodes.length;\n        UIStore.addNodes(_pathId,newNode.posX,newNode.posY,newNode.ctrPosX,newNode.ctrPosY,newNode.ctrPosX,newNode.ctrPosY,nodesLength,true);\n    }\n    editing.current=false;\n    setPathId(-1);\n  }\n\n  const addNodes:any = () =>{\n    if(editing.current){\n      const { ctr2PosX, ctr2PosY } = getCentralSymmetryPosition(lastNode);\n        let getD = `M ${lastNode.posX} ${lastNode.posY} C ${ctr2PosX} ${ctr2PosY} ${newNode.ctrPosX} ${newNode.ctrPosY}`;\n        let width = 0;\n\n        if(lastNode.posX !== newNode.posX && lastNode.posY !== newNode.posY){\n          getD += ` ${newNode.posX} ${newNode.posY}`;\n          width = 1;\n        }else{\n          getD += ` ${newNode.ctrPosX} ${newNode.ctrPosY}`;//当没有确定新的锚点时\n          width = 0;\n        }\n        return(\n          <Fragment>\n            <path d = {getD}  fill=\"none\" stroke=\"#000\" strokeWidth=\"1\"/>\n            <circle className=\"point-control\" cx={newNode.posX} cy={newNode.posY} stroke=\"#55f\" r=\"10\" />\n            <line x1={newNode.posX} y1={newNode.posY} x2={newNode.ctrPosX} y2={newNode.ctrPosY} stroke=\"#555\" strokeWidth={width} />\n          </Fragment>  \n        )\n    }\n  }\n  const addOtherPath:any = () =>{\n    if(toolNode){\n\n      let nodes = new Array(4).fill({\n        posX:-1,\n        posY:-1,\n        ctrPosX:-1,\n        ctrPosY:-1,\n        ctr2PosX:-1,\n        ctr2PosY:-1\n      })\n      switch(props.currentTool){\n        case 'rectangle': nodes = getRectNodes(newToolNode);break;\n        case 'circle':nodes = getCircleNodes(newToolNode);break;\n      }\n      let getD = \n      `M ${nodes[0].posX} ${nodes[0].posY} \n      C ${nodes[0].ctrPosX} ${nodes[0].ctrPosY} ${nodes[1].ctrPosX} ${nodes[1].ctrPosY} ${nodes[1].posX} ${nodes[1].posY} \n      C ${nodes[1].ctr2PosX} ${nodes[1].ctr2PosY} ${nodes[2].ctrPosX} ${nodes[2].ctrPosY} ${nodes[2].posX} ${nodes[2].posY} \n      C ${nodes[2].ctr2PosX} ${nodes[2].ctr2PosY} ${nodes[3].ctrPosX} ${nodes[3].ctrPosY} ${nodes[3].posX} ${nodes[3].posY} \n      C ${nodes[3].ctr2PosX} ${nodes[3].ctr2PosY} ${nodes[0].ctr2PosX} ${nodes[0].ctr2PosY} ${nodes[0].posX} ${nodes[0].posY} Z`;\n        return(\n          <Fragment>\n            <path d = {getD}  fill=\"none\" stroke=\"#55f\" strokeWidth=\"1\"/>\n          </Fragment>  \n        )\n    }\n  }\n\n  useKeyboardShortcut(\"backspace\", () => UIStore.deletePath(UIStore.editingPathId));\n  useKeyboardShortcut(\"control+c\", () => UIStore.copyPath(UIStore.editingPathId));\n\n  return(\n    <div className=\"editor-container\" >\n      <svg id=\"editor\" ref={edtiorRef} className={props.currentTool=== 'mouse_rotate_path' && toolNode ?\"editor-svg rotate-mouse\":\"editor-svg\"} width={editorInfo.width} height={editorInfo.height}\n           onMouseDown={handleMouseDown} onMouseMove={handleMouseMove} onMouseUp={handleMouseUp}\n          onDoubleClick={pathDoubleClick}>\n        {addNodes()}\n        {pathList.map((path, index) => (\n          <Path  key={path.id} pathId={index} path={path} currentTool={props.currentTool}/>\n        ))}\n        {addOtherPath()}\n\n      </svg>\n    </div>\n  )\n}\n\nexport default EditorContainer;","import { observer } from 'mobx-react';\nimport React, { Fragment } from 'react';\nimport '../style/statusContainer.scss';\nimport { UIStore } from '../stores/UIStore';\n\ninterface Props{\n  \n}\n\nconst StatusContainer: React.FC<Props> = observer((props: Props) => {\n\n  const currentPathid = UIStore.editingPathId\n  \n  const inputChange = (event: any) => {\n    let name = event.target.name;\n    let value = event.target.value;\n    if(currentPathid!== -1){\n      UIStore.setStateInfo(currentPathid,name,value);\n    }\n  }\n  let pathInfo:any;\n  if(currentPathid !== -1){\n     pathInfo = UIStore.pathList[currentPathid].nodes.length ? UIStore.pathList[currentPathid]: null;\n  }\n    \n  return (\n    <Fragment>\n      <div className = \"statusContainer\">\n          <h4>状态栏</h4>\n          <label className = \"statusinput\">\n            <span>PositionX:</span>\n            <input type=\"number\"  name=\"X\" value = {pathInfo?pathInfo.nodes[0].posX.toFixed(1):0} onChange={inputChange}/>\n          </label>\n          <label className = \"statusinput\">\n            <span>PositionY:</span>\n            <input type=\"number\" name=\"Y\"  value = {pathInfo?pathInfo.nodes[0].posY.toFixed(1):0} onChange = {inputChange}/>\n          </label>\n          <label className = \"statusinput\">\n            <span>fill:</span>\n            <input type=\"color\" name=\"fill\" value = {(!pathInfo || pathInfo.fill === 'none')?'#ffffff':pathInfo.fill} onChange = {inputChange}/>\n          </label>\n          <label className = \"statusinput\">\n            <span>stroke Width:</span>\n            <input type=\"number\" name=\"strokeWidth\" value = {pathInfo?pathInfo.strokeWidth:0} min = \"0\" max = \"40\"  onChange = {inputChange}/>\n          </label>\n          <label className = \"statusinput\">\n            <span>stroke:</span>\n            <input type=\"color\" name=\"stroke\" value = {pathInfo?pathInfo.stroke:'#000000'}  onChange = {inputChange}/>\n          </label>\n          <label className = \"statusinput\">\n            <span>rotate:</span>\n            <input type=\"text\" name=\"rotate\" readOnly={true} value = {pathInfo?pathInfo.rotate.toFixed(2):0}/>\n          </label>\n      </div>\n    </Fragment>\n  )\n\n})\n\nexport default StatusContainer;\n","import React  from 'react';\nimport '../style/FunctionContainer.scss'\n\n\ninterface Props{\n  currentTool:string;\n  set:(arg0: string)=>void;\n  id:string;\n\n}\n\nconst ToolbarContainer:  React.FC<Props> = (props) => {\n\n  function handleClick(e:any){\n    props.set(e.target.id)\n  }\n\n  return (\n\n\n      <div  className=\"function\">\n        {( ()=>{\n            switch(props.id){\n              case \"mouse\":return [\n                <div key={0} className={props.currentTool===\"mouse_rotate_path\"?\"functionItemSelect\":\"functionItem\"}\n                     onClick={handleClick} id=\"mouse_rotate_path\">Rotate Path</div>,\n                <div key={1} className={props.currentTool===\"mouse_scaling_path\"?\"functionItemSelect\":\"functionItem\"}\n                     onClick={handleClick} id=\"mouse_scaling_path\">Scaling Path</div>,\n                <div key={2} className={props.currentTool===\"mouse_drag_path\"?\"functionItemSelect\":\"functionItem\"}\n                     onClick={handleClick} id=\"mouse_drag_path\">Drag Path</div>\n              ]\n              case \"pen\":return [\n                <div key={0} className={props.currentTool===\"pen_add_node\"?\"functionItemSelect\":\"functionItem\"}\n                     onClick={handleClick} id=\"pen_add_node\">Add Node</div>,\n                <div key={1} className={props.currentTool===\"pen_drag_node\"?\"functionItemSelect\":\"functionItem\"}\n                     onClick={handleClick} id=\"pen_drag_node\">Drag Node</div>,\n                <div key={2} className={props.currentTool===\"pen_new_path\"?\"functionItemSelect\":\"functionItem\"}\n                     onClick={handleClick} id=\"pen_new_path\">New Path</div>\n              ]\n\n              default:return null;\n            }\n          }\n        )()}\n      </div>\n\n\n\n  )\n}\n\nexport default ToolbarContainer;\n","export function exportToSvg() {\n  const editor = document.getElementById(\"editor\");\n\n  const serializer = new XMLSerializer();\n  let source = serializer.serializeToString(editor!);\n\n  source = source.replace(/^<svg/, '<svg xmlns:xlink=\"http://www.w3.org/1999/xlink\"');\n\n  source = '<?xml version=\"1.0\" standalone=\"no\"?>\\r\\n' + source;\n  const blob = new Blob([source], {type: \"text/plain\"})\n  const a = document.createElement('a');\n  a.download = 'export.svg';\n  a.href = window.URL.createObjectURL(blob);\n  a.textContent = 'Download ready';\n  a.dataset.downloadurl = [\"text/plain\", a.download, a.href].join(':');\n  a.click();\n}\n","export default __webpack_public_path__ + \"static/media/circle.292ce4e1.svg\";","export default __webpack_public_path__ + \"static/media/pen.4de46a1c.svg\";","export default __webpack_public_path__ + \"static/media/mouse.dfeff54d.svg\";","export default __webpack_public_path__ + \"static/media/download.ed6268b9.svg\";","export default __webpack_public_path__ + \"static/media/rectangle.d8ea8f58.svg\";","import React from 'react';\nimport { exportToSvg } from '../utils/importAndExport';\nimport '../style/ToolbarContainer.scss'\nimport circle from '../asset/circle.svg'\nimport pen from '../asset/pen.svg'\nimport mouse from '../asset/mouse.svg'\nimport download from '../asset/download.svg'\nimport rectangle from '../asset/rectangle.svg'\n\ninterface Props{\n  currentTool:string;\n  set:(arg0: string)=>void;\n}\n\nconst ToolbarContainer:  React.FC<Props> = (props) => {\n\n  function handleClick(e:any){\n    props.set(e.target.id)\n  }\n\n  return (\n    <div className=\"toolbar\">\n        <div className=\"toolitem\" onClick={handleClick} >\n            <img className={props.currentTool.indexOf(\"mouse\")!==-1?\"itmeIconselect\":\"itmeIcon\"} id=\"mouse\"  alt=\"mouse\" src={mouse}/>\n        </div>\n        <div className=\"toolitem\" onClick={handleClick}>\n            <img className={props.currentTool===\"circle\"?\"itmeIconselect\":\"itmeIcon\"} id=\"circle\" alt=\"circle\" src={circle}/>\n        </div>\n        <div className=\"toolitem\" onClick={handleClick}>\n            <img className={props.currentTool===\"rectangle\"?\"itmeIconselect\":\"itmeIcon\"} id=\"rectangle\" alt=\"rectangle\" src={rectangle}/>\n        </div>\n        <div className=\"toolitem\" onClick={handleClick}>\n            <img className={props.currentTool.indexOf(\"pen\")!==-1?\"itmeIconselect\":\"itmeIcon\"} id=\"pen\" alt=\"pen\" src={pen}/>\n        </div>\n        <div className=\"toolitem\" onClick={exportToSvg}>\n            <img className=\"itmeIcon\" src={download} alt=\"dowmload\" />\n        </div>\n    </div>\n  )\n}\n\nexport default ToolbarContainer;\n","import React, { useState } from 'react';\nimport EditorContainer from './EditorContainer';\nimport StatusContainer from './StatusContainer';\nimport FunctionContainer from './FunctionContainer';\nimport '../style/index.scss';\nimport ToolbarContainer from \"./ToolbarContainer\";\nimport '../style/BasicContainer.scss'\nimport { UIStore } from '../stores/UIStore';\n\n\nconst BasicLayout = () => {\n\n  const [currentTool, setCurrenttool] = useState(\"mouse\");\n  const handleToolChange = (toolName: string) => {\n    UIStore.setCurrentTool(toolName);\n    setCurrenttool(toolName)\n  }\n\n  return(\n    <div className=\"basic-container\">\n      <ToolbarContainer currentTool={currentTool} set={handleToolChange}/>\n      {\n        currentTool.indexOf(\"mouse\")===-1\n          ? null\n          : <FunctionContainer currentTool={currentTool} set={handleToolChange} id=\"mouse\"/>\n      }\n      {\n        currentTool.indexOf(\"pen\")===-1\n          ? null\n          : <FunctionContainer currentTool={currentTool} set={handleToolChange} id=\"pen\"/>\n      }\n      <EditorContainer currentTool={currentTool} />\n\n\n      <StatusContainer />\n\n    </div>\n  )\n}\n\nexport default BasicLayout\n","import React from 'react';\nimport BasciLayout from './containers/BasciLayout'\nimport './App.css';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <BasciLayout />\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}
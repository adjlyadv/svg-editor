{"version":3,"sources":["elements/constants.ts","stores/UIStore.ts","utils/calculate.ts","elements/node.tsx","elements/path.tsx","containers/EditorContainer.tsx","containers/StatusContainer.tsx","asset/circle.svg","asset/pen.svg","asset/mouse.svg","asset/line.svg","asset/rectangle.svg","containers/ToolbarContainer.tsx","containers/BasciLayout.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["nodeTypes","UIStore","editorInfo","width","height","left","top","mouseState","type","drugging","pathid","nodeid","pathList","addPath","push","id","length","nodes","strokeWidth","stroke","fill","deletePath","pathId","setNodes","nodeId","node","addNodes","posX","posY","ctrPosX","ctrPosY","ctr2PosX","ctr2PoxY","index","nodesLength","slice","ctr2PosY","setMouseState","dragging","setStateInfo","name","value","node1","Number","node2","makeAutoObservable","this","getRelativePositon","event","x","clientX","y","clientY","Node","observer","props","onClick","onMouseLeave","className","cx","cy","handleMouseDown","elec","onMouseDown","e","x1","y1","x2","y2","path","getD","d","i","console","log","handleClick","stopPropagation","setPathid","handleOnMouseMove","_","throttle","item","nums","reduce","pre","cur","flat","bezier","Bezier","setBezier","nodeInfo","project","setNewNode","t","useState","editing","setEditing","newNode","onDoubleClick","currentTool","paths","mockNode","attrD","getEditingPath","map","onMouseOver","newPath","split","points","findIndex","undefined","addingNode","right","EditorContainer","useEffect","edtiorRef","current","getBoundingClientRect","setEditorInfo","useRef","setPathId","startNode","setStartNode","setNode","_pathid","mouseUpTimeChange","setNewnode","lastNode","setLastnode","handleMouseMove","ref","onMouseMove","onMouseUp","clearTimeout","setTimeout","_pathId","mockCtrX","mockCtrY","set","r","StatusContainer","inputChange","target","currentPathid","pathInfo","onChange","min","max","ToolbarContainer","alt","src","mouse","circle","rectangle","line","pen","BasicLayout","setCurrenttool","setCurrentPathid","App","BasciLayout","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"kWAAaA,EACE,EADFA,EAEA,EAFAA,EAGA,ECyJAC,EAAU,IAvHrB,aAAe,IAAD,gCAfdC,WAAa,CACXC,MAAO,IACPC,OAAQ,IACRC,KAAM,EACNC,IAAK,GAWO,KATdC,WAAY,CACVC,KAAMR,EACNS,UAAU,EACVC,OAAQ,EACRC,OAAQ,GAKI,KAFdC,SAAmB,GAEL,KAkCdC,QAAU,WAUR,OATA,EAAKD,SAASE,KACV,CACEC,GAAI,EAAKH,SAASI,OAClBC,MAAO,GACPC,YAAa,EACbC,OAAQ,UACRC,KAAM,YAGL,EAAKR,SAASI,OAAS,GA5ClB,KA+CdK,WAAa,SAACC,UACL,EAAKV,SAASU,IAhDT,KAmDdC,SAAW,SAACD,EAAgBE,EAAgBC,GAC1C,EAAKb,SAASU,GAAQL,MAAMO,GAAUC,GApD1B,KAuDdC,SAAU,SAACJ,EAAiBK,EAAcC,EAAcC,EAAkBC,EAAkBC,EAAmBC,EAAmBC,GAEhI,IAAMC,EAAc,EAAKtB,SAASU,GAAQL,MAAMD,OAC7B,IAAhBkB,EACD,EAAKtB,SAASU,GAAQL,MAAMH,KAC1B,CACEa,KAAMA,EACNC,KAAMA,EACNC,QAASA,GAAWF,EACpBG,QAASA,GAAWF,IAKxB,EAAKhB,SAASU,GAAQL,MAAtB,sBACK,EAAKL,SAASU,GAAQL,MAAMkB,MAAM,EAAGF,GAASC,EAAc,IADjE,CAEE,CACEP,KAAMA,EACNC,KAAMA,EACNC,QAASA,GAAWF,EACpBG,QAASA,GAAWF,EACpBG,SAAUA,EACVK,SAAUJ,IARd,YAUK,EAAKpB,SAASU,GAAQL,MAAMkB,MAAMF,GAASC,EAAc,MA/EpD,KAsFdG,cAAgB,SAAC7B,EAAc8B,EAAkB5B,EAAeC,GAC9D,EAAKJ,WAAWG,OAASA,EACzB,EAAKH,WAAWI,OAASA,EACzB,EAAKJ,WAAWC,KAAOA,EACvB,EAAKD,WAAWE,SAAW6B,GA1Ff,KA6FdC,aAAe,SAACjB,EAAgBkB,EAAaC,GAC3C,OAAOD,GACL,IAAK,IACH,IAAIE,EAAQ,EAAK9B,SAAS,GAAGK,MAAM,GACnCyB,EAAMf,KAAOgB,OAAOF,GACpB,EAAKlB,SAAS,EAAG,EAAEmB,GACnB,MACF,IAAK,IACH,IAAIE,EAAQ,EAAKhC,SAAS,GAAGK,MAAM,GACnC2B,EAAMhB,KAAOe,OAAOF,GACpB,EAAKlB,SAAS,EAAG,EAAEqB,GACnB,MACF,IAAK,OACH,EAAKhC,SAASU,GAAQF,KAAOqB,EAC7B,MACF,IAAK,cACH,EAAK7B,SAASU,GAAQJ,YAAcyB,OAAOF,GAC3C,MACF,IAAK,SACH,EAAK7B,SAASU,GAAQH,OAASsB,IA/GnCI,YAAmBC,MACnBA,KAAKlC,SAASE,KACZ,CACEC,GAAI,EACJE,MAAO,CACL,CACEU,KAAM,MACNC,KAAM,MACNC,QAAS,MACTC,QAAS,MAEX,CACEH,KAAM,MACNC,KAAM,MACNC,QAAS,MACTC,QAAS,KACTC,SAAU,MACVK,SAAU,OAEZ,CACET,KAAM,IACNC,KAAM,IACNC,QAAS,MACTC,QAAS,QAGbZ,YAAa,EACbC,OAAQ,UACRC,KAAM,aChEP,SAAS2B,EAAmBC,GACjC,IAAM9C,EAAaD,EAAQC,WAC3B,MAAO,CACL+C,EAAGD,EAAME,QAAUhD,EAAWG,KAC9B8C,EAAGH,EAAMI,QAAUlD,EAAWI,K,WCkDnB+C,EA3CFC,aAAS,SAACC,GAErB,IAAkB,IAAdA,EAAMxC,GACR,OACE,wBAAQyC,QAASD,EAAMC,QAASC,aAAcF,EAAME,aAAcC,UAAU,oBAAoBC,GAAIJ,EAAM9B,KAAKE,KAAMiC,GAAIL,EAAM9B,KAAKG,OAIxI,IAAMH,EAAOxB,EAAQW,SAAS2C,EAAMjC,QAAQL,MAAMsC,EAAMxC,IAElD8C,EAAkB,SAACC,EAAad,GACpC,OAAOc,GACL,KAAK9D,EACHC,EAAQoC,cAAcrC,GAAuB,EAAMuD,EAAMjC,OAAQiC,EAAMxC,IACvE,MAGF,KAAKf,EACHC,EAAQoC,cAAcrC,GAAqB,EAAMuD,EAAMjC,OAAQiC,EAAMxC,IACrE,MAGF,KAAKf,EACHC,EAAQoC,cAAcrC,GAAqB,EAAMuD,EAAMjC,OAAQiC,EAAMxC,MAO3E,OACE,eAAC,WAAD,WACE,wBAAQ2C,UAAU,gBAAgBK,YAAa,SAACC,GAAD,OAAOH,EAAgB7D,IAA2B2D,GAAIlC,EAAKE,KAAMiC,GAAInC,EAAKG,OACvH,sBAAMqC,GAAIxC,EAAKE,KAAMuC,GAAIzC,EAAKG,KAAMuC,GAAI1C,EAAKI,QAASuC,GAAI3C,EAAKK,QAASX,OAAO,OAAOD,YAAY,MACpG,wBAAQwC,UAAU,gBAAgBK,YAAa,SAACC,GAAD,OAAOH,EAAgB7D,IAAyB2D,GAAIlC,EAAKI,QAAS+B,GAAInC,EAAKK,UAEzHL,EAAKM,UAAYN,EAAKW,UAAY,wBAAQsB,UAAU,gBAAgBK,YAAa,SAACC,GAAD,OAAOH,EAAgB7D,IAAyB2D,GAAIlC,EAAKM,SAAU6B,GAAInC,EAAKW,WAC7JX,EAAKM,UAAYN,EAAKW,UAAY,sBAAM6B,GAAIxC,EAAKE,KAAMuC,GAAIzC,EAAKG,KAAMuC,GAAI1C,EAAKM,SAAUqC,GAAI3C,EAAKW,SAAUjB,OAAO,OAAOD,YAAY,Y,iCCsJ9HmD,EApLef,aAAS,SAACC,GAEpC,IAAMe,EAAO,SAACrD,GAEZ,IAAIsD,EAAI,GACR,GAAoB,IAAjBtD,EAAMD,OACP,OAAOuD,EAET,IAAK,IAAIC,EAAI,EAAGA,EAAIvD,EAAMD,OAAQwD,IACtB,IAANA,EACFD,GAAC,YAAStD,EAAMuD,GAAG7C,KAAlB,YAA0BV,EAAMuD,GAAG5C,KAAnC,cAA6CX,EAAMuD,GAAG3C,QAAtD,YAAiEZ,EAAMuD,GAAG1C,QAA1E,KACQ0C,EAAI,GAAKvD,EAAMD,OAAS,EACjCuD,GAAC,UAAOtD,EAAMuD,GAAG3C,QAAhB,YAA2BZ,EAAMuD,GAAG1C,QAApC,YAA+Cb,EAAMuD,GAAG7C,KAAxD,YAAgEV,EAAMuD,GAAG5C,KAAzE,cAAmFX,EAAMuD,GAAGzC,SAA5F,YAAwGd,EAAMuD,GAAGpC,SAAjH,KAEDmC,GAAC,UAAOtD,EAAMuD,GAAG3C,QAAhB,YAA2BZ,EAAMuD,GAAG1C,QAApC,YAA+Cb,EAAMuD,GAAG7C,KAAxD,YAAgEV,EAAMuD,GAAG5C,MAM9E,OAFA6C,QAAQC,IAAIH,GAELA,GAuCHI,EAAc,SAAC3B,GACnBA,EAAM4B,kBACNrB,EAAMsB,UAAUtB,EAAMc,KAAKtD,KAGvB+D,EAAoBC,IAAEC,UAAS,SAAChC,EAAYiC,GAChDjC,EAAM4B,kBADwD,MAE7C7B,EAAmBC,GAA5BC,EAFsD,EAEtDA,EAAGE,EAFmD,EAEnDA,EAEL+B,EAAOD,EAAKhE,MAAMkE,QAAO,SAACC,EAAoBC,EAAepD,GAOjE,OANIA,IAAUgD,EAAKhE,MAAMD,OAAS,EAChCoE,EAAItE,KAAKuE,EAAIxD,QAASwD,EAAIvD,QAASuD,EAAI1D,KAAM0D,EAAIzD,MAEjDwD,EAAItE,KAAKuE,EAAI1D,KAAM0D,EAAIzD,KAAMyD,EAAIxD,QAASwD,EAAIvD,SAGzCsD,IACN,IAAIE,KAAK,GAENC,EAAS,IAAIC,IAAON,GAC1BO,EAAUF,GACV,IAAMG,EAAWH,EAAOI,QAAQ,CAAC1C,IAAGE,MAEpCyC,EAAW,CACTjE,KAAM+D,EAASzC,EACfrB,KAAM8D,EAASvC,EACftB,QAAS6D,EAASzC,EAClBnB,QAAS4D,EAASvC,EAClB0C,EAAGH,EAASG,MAGb,IA1FkD,EAgJvBC,oBAAkB,GAhJK,mBAgJ9CC,EAhJ8C,KAgJrCC,EAhJqC,OAiJvBF,qBAjJuB,mBAiJ9CG,EAjJ8C,KAiJrCL,EAjJqC,OAkJzBE,qBAlJyB,mBAkJ9CP,EAlJ8C,KAkJtCE,EAlJsC,OAmJ/BlC,EAAMc,KAApBtD,EAnJ6C,EAmJ7CA,GAAIE,EAnJyC,EAmJzCA,MAEZ,IAAK8E,EACH,OACE,cAAC,WAAD,UACE,sBAAMG,cAnGc,SAAClD,GACzBA,EAAM4B,kBACmB,UAAtBrB,EAAM4C,aACPH,GAAW,IAgG+BxC,QAASmB,EAAaJ,EAAGD,EAAKrD,GAAQC,YAAaqC,EAAMc,KAAKnD,YAAaC,OAAQoC,EAAMc,KAAKlD,OAAQC,KAAMmC,EAAMc,KAAKjD,SAKrK,IAAMgF,EAtIiB,WAIrB,IAHA,IAAIA,EAAQ,GACRC,EAAW,KAEN7B,EAAI,EAAGA,EAAI,EAAIvD,EAAMD,OAAQwD,IAAK,CAEzC,GAAU,IAANA,GAAWA,EAAI,IAAMvD,EAAMD,OAAQ,CACrC,IAAMS,EAAOR,EAAMuD,GAEnB6B,EAAW,CACT1E,KAAMF,EAAKE,KACXC,KAAMH,EAAKG,KACXC,QAASJ,EAAKM,SACdD,QAASL,EAAKW,UAIlB,IAAMkE,EAAQhC,EAAK,CAAC+B,GAAsBpF,EAAMuD,GAAIvD,EAAMuD,EAAI,KAC9D4B,EAAMtF,KAAK,CACTwF,MAAOA,EACPrF,MAAO,CACLoF,GAAsBpF,EAAMuD,GAC5BvD,EAAMuD,EAAI,MAKhB,OAAO4B,EA2GKG,GAEd,OACE,eAAC,WAAD,WAEIH,EAAMI,KAAI,SAAAvB,GAAI,OACZ,cAAC,WAAD,UACE,sBAAuBzB,QAASmB,EAAaJ,EAAGU,EAAKqB,MAAOG,YAAa,SAAAzC,GAAC,OAAIc,EAAkBd,EAAGiB,IAAO/D,YAAaqC,EAAMc,KAAKnD,YAAaC,OAAQoC,EAAMc,KAAKlD,OAAOC,KAAMmC,EAAMc,KAAKjD,MAA/K6D,EAAKqB,YAIrBrF,EAAMuF,KAAI,SAAC/E,EAAMQ,GAAP,OACT,cAAC,EAAD,CAAMR,KAAMA,EAAMV,GAAIkB,EAAOX,OAAQP,OAEtCkF,GAAW,cAAC,EAAD,CAAMxE,KAAMwE,EAASlF,IAAK,EAAGO,QAAS,EAAGkC,QA/E3B,WAC5B,IAAMkD,EAAO,OAAGnB,QAAH,IAAGA,OAAH,EAAGA,EAAQoB,MAAMV,EAAQJ,GAClCe,EAAM,OAAGF,QAAH,IAAGA,OAAH,EAAGA,EAASrG,KAAKuG,OAE3B,GAAKF,GAAYE,EAAjB,CAIA,IAAI3E,EAAQhB,EAAM4F,WAAU,SAACpF,GAC3B,OAAOA,EAAKE,QAAL,OAAc4D,QAAd,IAAcA,OAAd,EAAcA,EAAQqB,OAAO,GAAG3D,IAAKxB,EAAKG,QAAL,OAAc2D,QAAd,IAAcA,OAAd,EAAcA,EAAQqB,OAAO,GAAGzD,MAG1E1B,EAAO,CACTE,KAAMiF,EAAO,GAAG3D,EAChBrB,KAAMgF,EAAO,GAAGzD,EAChBtB,QAASI,EAAQhC,EAAQW,SAASG,GAAIE,MAAMgB,GAAOJ,QAAU+E,EAAO,GAAG3D,EACvEnB,QAASG,EAAQhC,EAAQW,SAASG,GAAIE,MAAMgB,GAAOH,QAAU8E,EAAO,GAAGzD,EACvEpB,SAAUE,EAAQ2E,EAAO,GAAG3D,OAAI6D,EAChC1E,SAAUH,EAAQ2E,EAAO,GAAGzD,OAAI2D,GAG9BC,EAAa,CACfpF,KAAMiF,EAAO,GAAG3D,EAChBrB,KAAMgF,EAAO,GAAGzD,EAChBtB,QAAS+E,EAAO,GAAG3D,EACnBnB,QAAS8E,EAAO,GAAGzD,EACnBpB,SAAU,EACVK,SAAU,GAGZnC,EAAQsB,SAASR,EAAIkB,EAAOR,GAI5BA,EAAO,CACLE,MAHFiF,EAAM,OAAGF,QAAH,IAAGA,OAAH,EAAGA,EAASM,MAAMJ,QAGT,GAAG3D,EAChBrB,KAAMgF,EAAO,GAAGzD,EAChBtB,QAAS+E,EAAO,GAAG3D,EACnBnB,QAAS8E,EAAO,GAAGzD,EACnBpB,SAAU9B,EAAQW,SAASG,GAAIE,MAAMgB,EAAQ,GAAGF,eAAY+E,EAC5D1E,SAAUnC,EAAQW,SAASG,GAAIE,MAAMgB,EAAQ,GAAGG,eAAY0E,GAG9DC,EAAWhF,SAAW6E,EAAO,GAAG3D,EAChC8D,EAAW3E,SAAWwE,EAAO,GAAGzD,EAEhClD,EAAQsB,SAASR,EAAIkB,EAAQ,EAAGR,GAEhCxB,EAAQyB,SAASX,EAAIgG,EAAWpF,KAAMoF,EAAWnF,KAAMmF,EAAWlF,QAASkF,EAAWjF,QAASiF,EAAWhF,SAAUgF,EAAW3E,SAAUH,EAAQ,GACjJ2D,EAAW,QA8B4EnC,aAAc,kBAAMmC,EAAW,eCwD7GqB,G,MAzO0B,SAAC1D,GAExC2D,qBAAU,WAAO,IAAD,EACd,GAAKC,EAAL,CAGA,IAAMjH,EAAU,OAAGiH,QAAH,IAAGA,GAAH,UAAGA,EAAWC,eAAd,aAAG,EAAoBC,wBACnCnH,IACFD,EAAQC,WAAWI,IAAMJ,EAAWI,IACpCL,EAAQC,WAAWG,KAAOH,EAAWG,KACrCiH,EAAcpH,OAEf,IAEH,IAAMiH,EAAYI,iBAAsB,MAClCxB,EAAUwB,kBAAgB,GAfmB,EAgBvBzB,oBAAkB,GAhBK,mBAgB5CxE,EAhB4C,KAgBpCkG,EAhBoC,OAiBf1B,mBAAS7F,EAAQC,YAjBF,mBAiB5CA,EAjB4C,KAiBhCoH,EAjBgC,OAkBjBxB,oBAAkB,GAlBD,mBAkB5C2B,EAlB4C,KAkBjCC,EAlBiC,KAmB7C9G,EAAWX,EAAQW,SACrBF,EAAST,EAAQM,WAAWG,OAC5BC,EAASV,EAAQM,WAAWI,OArBmB,EAwB3BmF,mBAAmBlF,EAASX,EAAQM,WAAWG,QAAQO,MAAMhB,EAAQM,WAAWI,SAxBrD,mBAwB5Cc,EAxB4C,KAwBtCkG,EAxBsC,KA0BnDT,qBAAU,WACRjH,EAAQsB,SAAStB,EAAQM,WAAWG,OAAQT,EAAQM,WAAWI,OAAQc,KACtE,CAACA,IAEJyF,qBAAU,WACR,GAA0B,QAAtB3D,EAAM4C,YAAsB,CAC9B,IAAMyB,EAAQtG,GACG,IAAbsG,GAAkB3H,EAAQW,SAASgH,GAAS3G,MAAMD,OAAS,GAC7Df,EAAQoB,WAAWuG,GACnB7B,EAAQqB,SAAQ,EAChBI,GAAW,KAES,IAAbI,GAAkB3H,EAAQW,SAASgH,GAAS3G,MAAMD,QAAU,IACnE+E,EAAQqB,SAAQ,EAChBI,GAAW,IAKf/C,QAAQC,IAAKzE,EAAQW,YACpB,CAAC2C,EAAM4C,YAAY7E,IA9C6B,IAoD/CuG,EApD+C,EAgDrB/B,mBAAmBlF,EAASF,GAAQO,MAAMN,IAhDrB,mBAgD5CsF,EAhD4C,KAgDnC6B,EAhDmC,OAiDnBhC,mBAAmBlF,EAASF,GAAQO,MAAMN,IAjDvB,mBAiD5CoH,EAjD4C,KAiDlCC,EAjDkC,KA6F7CC,EAAkBlD,YAAW,SAAC/B,GAClCA,EAAM4B,kBAD2C,MAEhC7B,EAAmBC,GAA5BC,EAFyC,EAEzCA,EAAGE,EAFsC,EAEtCA,EACX,OAAOI,EAAM4C,aACX,IAAK,QACH,IAAIlG,EAAQM,WAAWE,SACrB,OAEF,OAAQR,EAAQM,WAAWC,MACzB,KAAMR,EACJ2H,EAAQ,2BACHlG,GADE,IAELE,KAAMsB,EACNrB,KAAMuB,KAER,MAGF,KAAMnD,EACJ2H,EAAQ,2BACHlG,GADE,IAELI,QAASoB,EACTnB,QAASqB,KAEX,MAGF,KAAMnD,EACJ2H,EAAQ,2BACHlG,GADE,IAELM,SAAUkB,EACVb,SAAUe,KAMlB,MACA,IAAK,MACA4C,EAAQqB,SACTU,EAAW,2BAEJ7B,GAFG,IAGNpE,QAAQoB,EACRnB,QAAQqB,QAMjB,EAAG,CAAE,UAAY,IA4EpB,OACE,qBAAKO,UAAU,mBAAf,SACE,sBAAKwE,IAAKf,EAAWzD,UAAU,aAAavD,MAAOD,EAAWC,MAAOC,OAAQF,EAAWE,OACnF2D,YAxKe,SAACf,GACvBA,EAAM4B,kBADgC,MAErB7B,EAAmBC,GAA5BC,EAF8B,EAE9BA,EAAGE,EAF2B,EAE3BA,EACX,OAAOI,EAAM4C,aACX,IAAK,QACHzF,EAAST,EAAQM,WAAWG,OAC5BC,EAASV,EAAQM,WAAWI,OAC5B,IAAI+B,EAAQzC,EAAQW,SAASF,GAAQO,MAAMN,GAC3CgH,EAAQ,eACHjF,IAGP,MACA,IAAK,MACCqD,EAAQqB,UACVrB,EAAQqB,SAAQ,EAChBM,GAAa,GACbM,EAAY,CACVrG,KAAKsB,EACLrB,KAAKuB,EACLtB,QAAQoB,EACRnB,QAAQqB,EACRpB,SAASkB,EACTb,SAASe,KAGb2E,EAAW,CACTnG,KAAKsB,EACLrB,KAAKuB,EACLtB,QAAQoB,EACRnB,QAAQqB,EACRpB,SAASkB,EACTb,SAASe,MAwIsBgF,YAAaF,EAAiBG,UA5E/C,SAACpF,GACrBA,EAAM4B,kBACNyD,aAAaR,GACbA,EAAoBS,YAChB,WACE,OAAO/E,EAAM4C,aACX,IAAK,QACHlG,EAAQoC,cAAcrC,GAAuB,EAAOU,EAAQC,GAC9D,MACA,IAAK,MACH,IAAKoF,EAAQqB,QACX,OAEF,IAAImB,EAAUjH,GACC,IAAZA,IACDiH,EAAUtI,EAAQY,UAClB2G,EAAUe,IAEZ,IAAMrG,EAAcjC,EAAQW,SAAS2H,GAAStH,MAAMD,OAC9CwH,EAA0B,EAAfvC,EAAQtE,KAAWsE,EAAQpE,QACtC4G,EAA0B,EAAfxC,EAAQrE,KAAWqE,EAAQnE,QAC5C7B,EAAQyB,SAAS6G,EAAQtC,EAAQtE,KAAKsE,EAAQrE,KAAKqE,EAAQpE,QAAQoE,EAAQnE,QAAQ0G,EAASC,EAASvG,GAClGuF,GACDO,EAAY,2BACP/B,GADM,IAETpE,QAAS2G,EACT1G,QAAS2G,KAEXf,GAAa,IAEbM,EAAY,eACP/B,IAGPxB,QAAQC,IAAKzE,EAAQW,aAKzB,MAsCCsF,cAnCmB,WAC1BmC,aAAaR,GACb9B,EAAQqB,SAAQ,EAChBI,GAAW,IA8BT,UAGG5G,EAAS4F,KAAI,SAAAnC,GAAI,OAChB,cAAC,EAAD,CAAoBA,KAAMA,EAAMQ,UAAWtB,EAAMmF,IAAKvC,YAAa5C,EAAM4C,aAA9D9B,EAAKtD,OA/BH,WACnB,GAAGgF,EAAQqB,QAAQ,CACf,IAAMoB,EAA2B,EAAhBT,EAASpG,KAAWoG,EAASlG,QACxC4G,EAA2B,EAAhBV,EAASnG,KAAWmG,EAASjG,QAC1CwC,EAAI,YAAQyD,EAASpG,KAAjB,YAAyBoG,EAASnG,KAAlC,cAA4C4G,EAA5C,YAAwDC,EAAxD,YAAoExC,EAAQpE,QAA5E,YAAuFoE,EAAQnE,SACnG3B,EAAQ,EASZ,OAPG4H,EAASpG,OAASsE,EAAQtE,MAAQoG,EAASnG,OAASqE,EAAQrE,MAC7D0C,GAAI,WAAQ2B,EAAQtE,KAAhB,YAAwBsE,EAAQrE,MACpCzB,EAAQ,IAERmE,GAAI,WAAQ2B,EAAQpE,QAAhB,YAA2BoE,EAAQnE,SACvC3B,EAAQ,GAGR,eAAC,WAAD,WACE,sBAAMoE,EAAKD,EAAOlD,KAAK,OAAOD,OAAO,OAAOD,YAAY,MACxD,wBAAQwC,UAAU,gBAAgBC,GAAIsC,EAAQtE,KAAMiC,GAAIqC,EAAQrE,KAAMT,OAAO,OAAOwH,EAAE,OACtF,sBAAM1E,GAAIgC,EAAQtE,KAAMuC,GAAI+B,EAAQrE,KAAMuC,GAAI8B,EAAQpE,QAASuC,GAAI6B,EAAQnE,QAASX,OAAO,OAAOD,YAAaf,IAC/G,wBAAQuD,UAAU,gBAAgBC,GAAIsC,EAAQpE,QAAS+B,GAAIqC,EAAQnE,QAASX,OAAO,OAAOwH,EAAE,WAc/FjH,UChMMkH,G,MAxC0BtF,aAAS,SAACC,GAEjD,IAAMsF,EAAc,SAAC7F,GACnB,IAAIR,EAAOQ,EAAM8F,OAAOtG,KACpBC,EAAQO,EAAM8F,OAAOrG,MACvBxC,EAAQsC,aAAagB,EAAMwF,cAAcvG,EAAKC,IAG5CuG,EAAW/I,EAAQW,SAAS2C,EAAMwF,eAExC,OACE,cAAC,WAAD,UACE,sBAAKrF,UAAY,kBAAjB,UACI,oDACA,wBAAOA,UAAY,cAAnB,UACE,8CACA,uBAAOlD,KAAK,SAAUgC,KAAK,IAAIC,MAAOuG,EAAS/H,MAAM,GAAGU,KAAMsH,SAAUJ,OAE1E,wBAAOnF,UAAY,cAAnB,UACE,8CACA,uBAAOlD,KAAK,SAASgC,KAAK,IAAIC,MAASuG,EAAS/H,MAAM,GAAGW,KAAMqH,SAAYJ,OAE7E,wBAAOnF,UAAY,cAAnB,UACE,yCACA,uBAAOlD,KAAK,QAAQgC,KAAK,OAAOC,MAASuG,EAAS5H,KAAM6H,SAAYJ,OAEtE,wBAAOnF,UAAY,cAAnB,UACE,iDACA,uBAAOlD,KAAK,SAASgC,KAAK,cAAc0G,IAAM,IAAIC,IAAM,KAAK1G,MAASuG,EAAS9H,YAAa+H,SAAYJ,OAE1G,wBAAOnF,UAAY,cAAnB,UACE,2CACA,uBAAOlD,KAAK,QAAQgC,KAAK,SAASC,MAASuG,EAAS7H,OAAQ8H,SAAYJ,gBCzCrE,G,YAAA,IAA0B,oCCA1B,MAA0B,gCCA1B,MAA0B,kCCA1B,MAA0B,iCCA1B,MAA0B,sCCwC1BO,EA3B4B,SAAC7F,GAE1C,SAASoB,EAAYX,GACnBT,EAAMmF,IAAI1E,EAAE8E,OAAO/H,IAGrB,OACE,sBAAK2C,UAAU,UAAf,UACI,qBAAKA,UAAU,WAAWF,QAASmB,EAAnC,SACI,qBAAKjB,UAA+B,UAApBH,EAAM4C,YAAsB,iBAAiB,WAAYpF,GAAG,QAASsI,IAAI,QAAQC,IAAKC,MAE1G,qBAAK7F,UAAU,WAAWF,QAASmB,EAAnC,SACI,qBAAKjB,UAA+B,WAApBH,EAAM4C,YAAuB,iBAAiB,WAAYpF,GAAG,SAASsI,IAAI,SAASC,IAAKE,MAE5G,qBAAK9F,UAAU,WAAWF,QAASmB,EAAnC,SACI,qBAAKjB,UAA+B,cAApBH,EAAM4C,YAA0B,iBAAiB,WAAYpF,GAAG,YAAYsI,IAAI,YAAYC,IAAKG,MAErH,qBAAK/F,UAAU,WAAWF,QAASmB,EAAnC,SACI,qBAAKjB,UAA+B,SAApBH,EAAM4C,YAAqB,iBAAiB,WAAYpF,GAAG,OAAOsI,IAAI,OAAOC,IAAKI,MAEtG,qBAAKhG,UAAU,WAAWF,QAASmB,EAAnC,SACI,qBAAKjB,UAA+B,QAApBH,EAAM4C,YAAoB,iBAAiB,WAAYpF,GAAG,MAAMsI,IAAI,MAAMC,IAAKK,UCZ5FC,G,MAdK,WAAO,IAAD,EAEc9D,mBAAS,SAFvB,mBAEjBK,EAFiB,KAEJ0D,EAFI,OAGkB/D,mBAAS,GAH3B,mBAGjBiD,EAHiB,KAGFe,EAHE,KAKxB,OACE,sBAAKpG,UAAU,kBAAf,UACE,cAAC,EAAD,CAAkByC,YAAaA,EAAauC,IAAKmB,IACjD,cAAC,EAAD,CAAiB1D,YAAaA,EAAa4C,cAAeA,EAAeL,IAAKoB,IAC9E,cAAC,EAAD,CAAiBf,cAAeA,S,MCLvBgB,MARf,WACE,OACE,qBAAKrG,UAAU,MAAf,SACE,cAACsG,EAAD,OCOSC,EAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCHdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1Bb,M","file":"static/js/main.e2418636.chunk.js","sourcesContent":["export const nodeTypes = {\n  AnchorPoint: 0,\n  Ctr1Point: 1,\n  Ctr2Point: 2\n}\n","import { makeAutoObservable } from 'mobx';\nimport { nodeTypes } from '../elements/constants';\n\nexport interface Node {\n  posX: number,\n  posY: number,\n  ctrPosX: number,\n  ctrPosY: number,\n  ctr2PosX?: number,\n  ctr2PosY?: number,\n}\n\nexport interface Path {\n  id: number,\n  nodes: Node[],\n  strokeWidth: number,\n  stroke: string,\n  fill:string\n}\n\nclass UIstore {\n\n  editorInfo = {\n    width: 800,\n    height: 600,\n    left: 0,\n    top: 0\n  }\n  mouseState ={\n    type: nodeTypes.AnchorPoint,\n    drugging: false,\n    pathid: 0,\n    nodeid: 0\n  }\n\n  pathList: Path[] = [];\n\n  constructor() {\n    makeAutoObservable(this);\n    this.pathList.push(\n      {\n        id: 0,\n        nodes: [\n          {\n            posX: 125.5,\n            posY: 171.5,\n            ctrPosX: 194.5,\n            ctrPosY: 85.5\n          },\n          {\n            posX: 246.5,\n            posY: 140.5,\n            ctrPosX: 288.5,\n            ctrPosY: 95.5,\n            ctr2PosX: 204.5,\n            ctr2PosY: 185.5\n          },\n          {\n            posX: 210,\n            posY: 261,\n            ctrPosX: 309.5,\n            ctrPosY: 309.5,\n          }\n        ],\n        strokeWidth: 5,\n        stroke: \"#000000\",\n        fill: \"#ffffff\"\n      }\n    )\n  }\n\n  addPath = () => {\n    this.pathList.push(\n        {\n          id: this.pathList.length,\n          nodes: [],\n          strokeWidth: 5,\n          stroke: \"#000000\",\n          fill: \"#ffffff\"\n        }\n    )\n    return this.pathList.length - 1;\n  }\n\n  deletePath = (pathId: number) => {\n    delete this.pathList[pathId]\n  }\n\n  setNodes = (pathId: number, nodeId: number, node: Node) => {\n    this.pathList[pathId].nodes[nodeId] = node;\n  }\n\n  addNodes =(pathId: number , posX: number, posY: number, ctrPosX?: number, ctrPosY?: number, ctr2PosX?: number, ctr2PoxY?: number, index?: number) => {\n\n    const nodesLength = this.pathList[pathId].nodes.length;\n    if(nodesLength === 0){\n      this.pathList[pathId].nodes.push(\n        {\n          posX: posX,\n          posY: posY,\n          ctrPosX: ctrPosX || posX,\n          ctrPosY: ctrPosY || posY\n        }\n      )\n    }\n    else{\n      this.pathList[pathId].nodes = [\n        ...this.pathList[pathId].nodes.slice(0, index || nodesLength - 1),\n        {\n          posX: posX,\n          posY: posY,\n          ctrPosX: ctrPosX || posX,\n          ctrPosY: ctrPosY || posY,\n          ctr2PosX: ctr2PosX,\n          ctr2PosY: ctr2PoxY\n        },\n        ...this.pathList[pathId].nodes.slice(index || nodesLength - 1)\n      ]\n\n    }\n\n  }\n\n  setMouseState = (type: number, dragging:boolean, pathid:number, nodeid:number) => {\n    this.mouseState.pathid = pathid;\n    this.mouseState.nodeid = nodeid;\n    this.mouseState.type = type;\n    this.mouseState.drugging = dragging;\n  }\n\n  setStateInfo = (pathId: number, name:string, value:string) => {\n    switch(name){\n      case 'X':\n        let node1 = this.pathList[0].nodes[0];\n        node1.posX = Number(value);\n        this.setNodes(0, 0,node1);\n        break;\n      case 'Y':\n        let node2 = this.pathList[0].nodes[0];\n        node2.posY = Number(value)\n        this.setNodes(0, 0,node2);\n        break;\n      case 'fill':\n        this.pathList[pathId].fill = value;\n        break;\n      case 'strokeWidth':\n        this.pathList[pathId].strokeWidth = Number(value);\n        break;\n      case 'stroke':\n        this.pathList[pathId].stroke = value;\n        break;\n      default:        \n    }\n  }\n}\n\nexport const UIStore = new UIstore();","import { UIStore } from '../stores/UIStore'\n\nexport function getRelativePositon(event: any) {\n  const editorInfo = UIStore.editorInfo;\n  return {\n    x: event.clientX - editorInfo.left,\n    y: event.clientY - editorInfo.top\n  }\n}","import { observer} from 'mobx-react';\nimport React, { Fragment } from 'react';\nimport { nodeTypes } from './constants';\nimport { Node as typeNode, UIStore } from '../stores/UIStore';\n\ninterface Props {\n  node: typeNode,\n  id: number,\n  pathId: number,\n  onClick?: any,\n  onMouseLeave?: any\n}\n\nconst Node = observer((props: Props) => {\n\n  if (props.id === -1) {\n    return (\n      <circle onClick={props.onClick} onMouseLeave={props.onMouseLeave} className=\"point-control-add\" cx={props.node.posX} cy={props.node.posY} />\n    )\n  }\n\n  const node = UIStore.pathList[props.pathId].nodes[props.id];\n\n  const handleMouseDown = (elec:number, event: any) => {\n    switch(elec) {\n      case nodeTypes.AnchorPoint: {\n        UIStore.setMouseState(nodeTypes.AnchorPoint, true, props.pathId, props.id);\n        break;\n      }\n\n      case nodeTypes.Ctr1Point: {\n        UIStore.setMouseState(nodeTypes.Ctr1Point, true, props.pathId, props.id);\n        break;\n      }\n\n      case nodeTypes.Ctr2Point: {\n        UIStore.setMouseState(nodeTypes.Ctr2Point, true, props.pathId, props.id);\n        break\n      }\n    }\n\n  }\n  \n  return(\n    <Fragment>\n      <circle className=\"point-control\" onMouseDown={(e) => handleMouseDown(nodeTypes.AnchorPoint, e)} cx={node.posX} cy={node.posY} />\n        <line x1={node.posX} y1={node.posY} x2={node.ctrPosX} y2={node.ctrPosY} stroke=\"#555\" strokeWidth=\"1\" />\n      <circle className=\"point-control\" onMouseDown={(e) => handleMouseDown(nodeTypes.Ctr1Point, e)} cx={node.ctrPosX} cy={node.ctrPosY} />\n\n      {node.ctr2PosX && node.ctr2PosY && <circle className=\"point-control\" onMouseDown={(e) => handleMouseDown(nodeTypes.Ctr2Point, e)} cx={node.ctr2PosX} cy={node.ctr2PosY} />}\n      {node.ctr2PosX && node.ctr2PosY && <line x1={node.posX} y1={node.posY} x2={node.ctr2PosX} y2={node.ctr2PosY} stroke=\"#555\" strokeWidth=\"1\" />}\n    </Fragment>\n  )\n\n})\n\nexport default Node;","import React, { Fragment, useState } from 'react';\nimport { Node as typeNode, UIStore } from '../stores/UIStore';\nimport { getRelativePositon } from '../utils/calculate';\nimport Node from './node';\nimport _ from 'lodash';\nimport Bezier from 'bezier-js';\nimport { observer } from 'mobx-react';\n\ninterface Props{\n  path: {\n    id: number,\n    nodes: typeNode[],\n    strokeWidth: number,\n    stroke: string,\n    fill:string\n  }\n  setPathid:(arg0: number)=>void;\n  currentTool:String;\n}\n\nconst path: React.FC<Props> = observer((props: Props) => {\n    \n    const getD = (nodes: string | any[]) => {\n\n      let d = \"\";\n      if(nodes.length === 1){//钢笔增加路径的时候对第一个节点的渲染\n        return d;\n      }\n      for (let i = 0; i < nodes.length; i++) {\n        if (i === 0) {\n          d += `M ${nodes[i].posX} ${nodes[i].posY} C ${nodes[i].ctrPosX} ${nodes[i].ctrPosY} `\n        } else if (i + 1 <= nodes.length - 1) {\n          d += `${nodes[i].ctrPosX} ${nodes[i].ctrPosY} ${nodes[i].posX} ${nodes[i].posY} C ${nodes[i].ctr2PosX} ${nodes[i].ctr2PosY} `\n        } else {\n          d += `${nodes[i].ctrPosX} ${nodes[i].ctrPosY} ${nodes[i].posX} ${nodes[i].posY}`\n        }\n      }\n\n      console.log(d)\n      \n      return d\n    }\n    \n    const getEditingPath = () => {\n      let paths = [];\n      let mockNode = null;\n\n      for (let i = 0; i + 1 < nodes.length; i++) {\n\n        if (i !== 0 && i + 1 !== nodes.length) {\n          const node = nodes[i];\n\n          mockNode = {\n            posX: node.posX,\n            posY: node.posY,\n            ctrPosX: node.ctr2PosX,\n            ctrPosY: node.ctr2PosY\n          }\n        }\n\n        const attrD = getD([mockNode ? mockNode : nodes[i], nodes[i + 1]]);\n        paths.push({\n          attrD: attrD,\n          nodes: [\n            mockNode ? mockNode : nodes[i], \n            nodes[i + 1]\n          ],\n        });\n      }\n\n      return paths\n    }\n    \n    const handleDoubleClick = (event: any) => {\n      event.stopPropagation();\n      if(props.currentTool === 'mouse')\n        setEditing(true);\n    }\n\n    const handleClick = (event: any) => {\n      event.stopPropagation();\n      props.setPathid(props.path.id);\n    }\n\n    const handleOnMouseMove = _.throttle((event: any, item: any) => {\n      event.stopPropagation();\n      const { x, y } = getRelativePositon(event);\n\n      const nums = item.nodes.reduce((pre: Array<number>, cur: typeNode, index: number) => {\n        if (index === item.nodes.length - 1) {\n          pre.push(cur.ctrPosX, cur.ctrPosY, cur.posX, cur.posY);\n        } else {\n          pre.push(cur.posX, cur.posY, cur.ctrPosX, cur.ctrPosY);\n        }\n\n        return pre\n      }, []).flat(1);\n\n      const bezier = new Bezier(nums);\n      setBezier(bezier);\n      const nodeInfo = bezier.project({x, y});\n\n      setNewNode({\n        posX: nodeInfo.x,\n        posY: nodeInfo.y,\n        ctrPosX: nodeInfo.x,\n        ctrPosY: nodeInfo.y,\n        t: nodeInfo.t\n      })\n\n    }, 50);\n\n    const handleAddNewNodeClick = () => {\n      const newPath = bezier?.split(newNode.t); // 这里贝塞尔曲线被分成了两个部分，需要分别更新左右两端\n      let points = newPath?.left.points; // 0 1 2 3 分别是第一个点的位置、控制点，第二个点的控制点、位置\n\n      if (!newPath || !points) {\n        return\n      }\n\n      let index = nodes.findIndex((node) => {\n        return node.posX === bezier?.points[0].x && node.posY === bezier?.points[0].y\n      });\n\n      let node = {\n        posX: points[0].x,\n        posY: points[0].y,\n        ctrPosX: index ? UIStore.pathList[id].nodes[index].ctrPosX : points[1].x,\n        ctrPosY: index ? UIStore.pathList[id].nodes[index].ctrPosY : points[1].y,\n        ctr2PosX: index ? points[1].x : undefined,\n        ctr2PosY: index ? points[1].y : undefined\n      } // 这里要判定一下index为0  即起始节点的情况，做特殊处理\n\n      let addingNode = {\n        posX: points[3].x,\n        posY: points[3].y,\n        ctrPosX: points[2].x,\n        ctrPosY: points[2].y,\n        ctr2PosX: 0,\n        ctr2PosY: 0\n      } // 这是新的节点信息\n\n      UIStore.setNodes(id, index, node); // 更新左端点\n\n      points = newPath?.right.points;\n\n      node = {\n        posX: points[3].x,\n        posY: points[3].y,\n        ctrPosX: points[2].x,\n        ctrPosY: points[2].y,\n        ctr2PosX: UIStore.pathList[id].nodes[index + 1].ctr2PosX || undefined,\n        ctr2PosY: UIStore.pathList[id].nodes[index + 1].ctr2PosY || undefined\n      }\n\n      addingNode.ctr2PosX = points[1].x;\n      addingNode.ctr2PosY = points[1].y; // 新的节点信息需要左右两端的\n      \n      UIStore.setNodes(id, index + 1, node); // 更新右端点\n\n      UIStore.addNodes(id, addingNode.posX, addingNode.posY, addingNode.ctrPosX, addingNode.ctrPosY, addingNode.ctr2PosX, addingNode.ctr2PosY, index + 1);\n      setNewNode(null);\n    }\n\n    const [editing, setEditing] = useState<boolean>(false);\n    const [newNode, setNewNode] = useState<any>();\n    const [bezier, setBezier] = useState<Bezier>();\n    const { id, nodes } = props.path;\n\n    if (!editing) {\n      return (\n        <Fragment>\n          <path onDoubleClick={handleDoubleClick} onClick={handleClick} d={getD(nodes)} strokeWidth={props.path.strokeWidth} stroke={props.path.stroke} fill={props.path.fill}/>\n        </Fragment>\n      );\n    }\n\n    const paths = getEditingPath();\n\n    return (\n      <Fragment>\n        {\n          paths.map(item => \n            <Fragment>\n              <path key={item.attrD} onClick={handleClick} d={item.attrD} onMouseOver={e => handleOnMouseMove(e, item)} strokeWidth={props.path.strokeWidth} stroke={props.path.stroke}fill={props.path.fill}/>\n            </Fragment>\n          )\n        }\n        {nodes.map((node, index) => \n          <Node node={node} id={index} pathId={id} />\n        )}\n        {newNode && <Node node={newNode} id={-1} pathId={-1} onClick={handleAddNewNodeClick} onMouseLeave={() => setNewNode(null)} />}\n      </Fragment>\n    )\n\n\n  }\n)\n\n\nexport default path;","import React, { Fragment,useEffect, useRef , useState} from 'react';\nimport { Node as typeNode, UIStore } from '../stores/UIStore';\nimport Path from '../elements/path';\nimport { nodeTypes } from '../elements/constants';\nimport { getRelativePositon } from '../utils/calculate';\nimport * as _ from 'lodash';\nimport '../style/EditorContainer.scss';\n\ninterface Props{\n  currentTool:string;\n  currentPathid:number;\n  set:(arg0: number)=>void;\n}\n\nconst EditorContainer: React.FC<Props> = (props) =>  {\n\n  useEffect(() => {\n    if (!edtiorRef) {\n      return\n    }\n    const editorInfo = edtiorRef?.current?.getBoundingClientRect();\n    if (editorInfo) {\n      UIStore.editorInfo.top = editorInfo.top;\n      UIStore.editorInfo.left = editorInfo.left;\n      setEditorInfo(editorInfo);\n    }\n  }, [])\n\n  const edtiorRef = useRef<SVGSVGElement>(null);\n  const editing = useRef<boolean>(false)\n  const [pathId, setPathId] = useState<number>(-1)\n  const [editorInfo, setEditorInfo] = useState(UIStore.editorInfo);\n  const [startNode, setStartNode] = useState<Boolean>(false);\n  const pathList = UIStore.pathList;\n  let pathid = UIStore.mouseState.pathid;\n  let nodeid = UIStore.mouseState.nodeid;\n\n \n  const [node, setNode] = useState<typeNode>(pathList[UIStore.mouseState.pathid].nodes[UIStore.mouseState.nodeid]);\n  \n  useEffect(() => {\n    UIStore.setNodes(UIStore.mouseState.pathid, UIStore.mouseState.nodeid, node);\n  }, [node])\n\n  useEffect(() => {\n    if (props.currentTool !== \"pen\"){\n      const _pathid=pathId;\n      if (_pathid !== -1 && UIStore.pathList[_pathid].nodes.length < 2){\n        UIStore.deletePath(_pathid);\n        editing.current=false;\n        setPathId(-1);\n      }\n      else if (_pathid !== -1 && UIStore.pathList[_pathid].nodes.length >= 2){\n        editing.current=false;\n        setPathId(-1);\n      }\n\n\n    }\n    console.log((UIStore.pathList))\n  }, [props.currentTool,pathId])\n\n  const [newNode, setNewnode] = useState<typeNode>(pathList[pathid].nodes[nodeid]);\n  const [lastNode, setLastnode] = useState<typeNode>(pathList[pathid].nodes[nodeid]);\n\n\n  let mouseUpTimeChange:any;\n\n  const handleMouseDown = (event: any) => {\n    event.stopPropagation();\n    const { x, y } = getRelativePositon(event);\n    switch(props.currentTool){\n      case 'mouse':{\n        pathid = UIStore.mouseState.pathid;\n        nodeid = UIStore.mouseState.nodeid\n        let node1 = UIStore.pathList[pathid].nodes[nodeid];\n        setNode({\n          ...node1\n        });\n      }\n      break;\n      case 'pen'://钢笔工具 按下的时候确定一个锚点的posx posy\n        if(!editing.current){\n          editing.current=true;\n          setStartNode(true);\n          setLastnode({//是路径的第一个锚点时 上一个锚点设置成一样\n            posX:x,\n            posY:y,\n            ctrPosX:x,\n            ctrPosY:y,\n            ctr2PosX:x,\n            ctr2PosY:y\n          })\n        }\n        setNewnode({\n          posX:x,\n          posY:y,\n          ctrPosX:x,\n          ctrPosY:y,\n          ctr2PosX:x,\n          ctr2PosY:y\n        })\n        break;\n    }\n  }\n    \n\n  const handleMouseMove = _.throttle((event: any) => {\n    event.stopPropagation();\n    const { x, y } = getRelativePositon(event);\n    switch(props.currentTool){\n      case 'mouse':\n        if(!UIStore.mouseState.drugging){\n          return\n        }\n        switch (UIStore.mouseState.type) {\n          case (nodeTypes.AnchorPoint): {\n            setNode({\n              ...node,\n              posX: x,\n              posY: y,\n            });\n            break;\n          }\n    \n          case (nodeTypes.Ctr1Point): {\n            setNode({\n              ...node,\n              ctrPosX: x,\n              ctrPosY: y,\n            });\n            break;\n          }\n    \n          case (nodeTypes.Ctr2Point): {\n            setNode({\n              ...node,\n              ctr2PosX: x,\n              ctr2PosY: y\n            });\n            break;\n          }\n      }\n    \n      break;\n      case 'pen'://钢笔工具 如果在编辑模式 移动鼠标的时候不断变化控制点\n        if(editing.current){\n          setNewnode(\n            {\n              ...newNode,\n              ctrPosX:x,\n              ctrPosY:y,\n            }\n          )\n        }\n      break;\n    }\n  }, 5, { 'trailing': true })\n \n\n  const handleMouseUp = (event: any) => {\n    event.stopPropagation();\n    clearTimeout(mouseUpTimeChange);\n    mouseUpTimeChange = setTimeout(\n        () => {\n          switch(props.currentTool){\n            case 'mouse':\n              UIStore.setMouseState(nodeTypes.AnchorPoint, false, pathid, nodeid);\n            break;\n            case 'pen':{//松开鼠标确定一个点 加入path里\n              if (!editing.current){\n                return;\n              }\n              let _pathId = pathId;\n              if(pathId === -1){\n                _pathId = UIStore.addPath()\n                setPathId(_pathId);\n              }\n              const nodesLength = UIStore.pathList[_pathId].nodes.length;\n              const mockCtrX = newNode.posX * 2 - newNode.ctrPosX;\n              const mockCtrY = newNode.posY * 2 - newNode.ctrPosY;\n              UIStore.addNodes(_pathId,newNode.posX,newNode.posY,newNode.ctrPosX,newNode.ctrPosY,mockCtrX,mockCtrY,nodesLength);\n              if(startNode){// 处理第一个节点的渲染\n                setLastnode({\n                  ...newNode,\n                  ctrPosX: mockCtrX,\n                  ctrPosY: mockCtrY\n                })\n                setStartNode(false);\n              }else{\n                setLastnode({\n                  ...newNode\n                })\n              }\n              console.log((UIStore.pathList))\n            }\n            break;\n          } \n\n        },250)\n  }\n\n  const pathDoubleClick:any = () => {\n    clearTimeout(mouseUpTimeChange);\n    editing.current=false;\n    setPathId(-1);\n  }\n\n  const addNodes:any = () =>{ \n    if(editing.current){\n        const mockCtrX = lastNode.posX * 2 - lastNode.ctrPosX;\n        const mockCtrY = lastNode.posY * 2 - lastNode.ctrPosY;\n        let getD = `M ${lastNode.posX} ${lastNode.posY} C ${mockCtrX} ${mockCtrY} ${newNode.ctrPosX} ${newNode.ctrPosY}`;\n        let width = 0;\n\n        if(lastNode.posX !== newNode.posX && lastNode.posY !== newNode.posY){\n          getD += ` ${newNode.posX} ${newNode.posY}`;\n          width = 1;\n        }else{\n          getD += ` ${newNode.ctrPosX} ${newNode.ctrPosY}`;//当没有确定新的锚点时\n          width = 0;\n        }\n        return(\n          <Fragment>\n            <path d = {getD}  fill=\"none\" stroke=\"#000\" strokeWidth=\"1\"/>\n            <circle className=\"point-control\" cx={newNode.posX} cy={newNode.posY} stroke=\"#55f\" r=\"10\" />\n            <line x1={newNode.posX} y1={newNode.posY} x2={newNode.ctrPosX} y2={newNode.ctrPosY} stroke=\"#555\" strokeWidth={width} />\n            <circle className=\"point-control\" cx={newNode.ctrPosX} cy={newNode.ctrPosY} stroke=\"#000\" r=\"10\" />\n          </Fragment>  \n        )\n    }\n  }\n\n  return(\n    <div className=\"editor-container\">\n      <svg ref={edtiorRef} className=\"editor-svg\" width={editorInfo.width} height={editorInfo.height}\n           onMouseDown={handleMouseDown} onMouseMove={handleMouseMove} onMouseUp={handleMouseUp}\n           onDoubleClick={pathDoubleClick}>\n        {pathList.map(path => (\n          <Path key={path.id} path={path} setPathid={props.set} currentTool={props.currentTool}/>\n        ))}\n        {addNodes()}\n      </svg>\n    </div>\n  )\n}\n\nexport default EditorContainer;","import { observer } from 'mobx-react';\nimport React, { Fragment } from 'react';\nimport '../style/statusContainer.scss';\nimport { UIStore } from '../stores/UIStore';\n\ninterface Props{\n  currentPathid:number;\n}\n\nconst StatusContainer: React.FC<Props> = observer((props: Props) => {\n  \n  const inputChange = (event: any) => {\n    let name = event.target.name;\n    let value = event.target.value;\n      UIStore.setStateInfo(props.currentPathid,name,value);\n  }\n\n  const pathInfo = UIStore.pathList[props.currentPathid];\n\n  return (\n    <Fragment>\n      <div className = \"statusContainer\">\n          <h4>状态栏</h4>\n          <label className = \"statusinput\">\n            <span>PositionX:</span>\n            <input type=\"number\"  name=\"X\" value={pathInfo.nodes[0].posX} onChange={inputChange}/>\n          </label>\n          <label className = \"statusinput\">\n            <span>PositionY:</span>\n            <input type=\"number\" name=\"Y\" value = {pathInfo.nodes[0].posY} onChange = {inputChange}/>\n          </label>\n          <label className = \"statusinput\">\n            <span>fill:</span>\n            <input type=\"color\" name=\"fill\" value = {pathInfo.fill} onChange = {inputChange}/>\n          </label>\n          <label className = \"statusinput\">\n            <span>stroke Width:</span>\n            <input type=\"number\" name=\"strokeWidth\" min = \"0\" max = \"40\" value = {pathInfo.strokeWidth} onChange = {inputChange}/>\n          </label>\n          <label className = \"statusinput\">\n            <span>stroke:</span>\n            <input type=\"color\" name=\"stroke\" value = {pathInfo.stroke} onChange = {inputChange}/>\n          </label>\n      </div>\n    </Fragment>\n  )\n\n})\n\nexport default StatusContainer;\n","export default __webpack_public_path__ + \"static/media/circle.292ce4e1.svg\";","export default __webpack_public_path__ + \"static/media/pen.4de46a1c.svg\";","export default __webpack_public_path__ + \"static/media/mouse.dfeff54d.svg\";","export default __webpack_public_path__ + \"static/media/line.86048c7a.svg\";","export default __webpack_public_path__ + \"static/media/rectangle.d8ea8f58.svg\";","import React from 'react';\nimport '../style/ToolbarContainer.scss'\nimport circle from '../asset/circle.svg'\nimport pen from '../asset/pen.svg'\nimport mouse from '../asset/mouse.svg'\nimport line from '../asset/line.svg'\nimport rectangle from '../asset/rectangle.svg'\n\ninterface Props{\n  currentTool:string;\n  set:(arg0: string)=>void;\n}\n\nconst ToolbarContainer:  React.FC<Props> = (props) => {\n\n  function handleClick(e:any){\n    props.set(e.target.id)\n  }\n\n  return (\n    <div className=\"toolbar\">\n        <div className=\"toolitem\" onClick={handleClick} >\n            <img className={props.currentTool===\"mouse\"?\"itmeIconselect\":\"itmeIcon\"} id=\"mouse\"  alt=\"mouse\" src={mouse}/>\n        </div>\n        <div className=\"toolitem\" onClick={handleClick}>\n            <img className={props.currentTool===\"circle\"?\"itmeIconselect\":\"itmeIcon\"} id=\"circle\" alt=\"circle\" src={circle}/>\n        </div>\n        <div className=\"toolitem\" onClick={handleClick}>\n            <img className={props.currentTool===\"rectangle\"?\"itmeIconselect\":\"itmeIcon\"} id=\"rectangle\" alt=\"rectangle\" src={rectangle}/>\n        </div>\n        <div className=\"toolitem\" onClick={handleClick}>\n            <img className={props.currentTool===\"line\"?\"itmeIconselect\":\"itmeIcon\"} id=\"line\" alt=\"line\" src={line}/>\n        </div>\n        <div className=\"toolitem\" onClick={handleClick}>\n            <img className={props.currentTool===\"pen\"?\"itmeIconselect\":\"itmeIcon\"} id=\"pen\" alt=\"pen\" src={pen}/>\n        </div>\n    </div>\n  )\n}\n\nexport default ToolbarContainer;\n","import React, { useState } from 'react';\nimport EditorContainer from './EditorContainer';\nimport StatusContainer from './StatusContainer';\nimport '../style/index.scss';\nimport ToolbarContainer from \"./ToolbarContainer\";\nimport '../style/BasicContainer.scss'\n\n\nconst BasicLayout = () => {\n\n  const [currentTool, setCurrenttool] = useState(\"mouse\");\n  const [currentPathid, setCurrentPathid] = useState(0);\n\n  return(\n    <div className=\"basic-container\">\n      <ToolbarContainer currentTool={currentTool} set={setCurrenttool}/>\n      <EditorContainer currentTool={currentTool} currentPathid={currentPathid} set={setCurrentPathid} />\n      <StatusContainer currentPathid={currentPathid}/>\n    </div>\n  )\n}\n\nexport default BasicLayout\n","import React from 'react';\nimport BasciLayout from './containers/BasciLayout'\nimport './App.css';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <BasciLayout />\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}
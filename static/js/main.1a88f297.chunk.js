(this["webpackJsonpsvg-editor"]=this["webpackJsonpsvg-editor"]||[]).push([[0],[,,,,,,,,,,,,,,,,function(t,e,s){},,function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){},function(t,e,s){"use strict";s.r(e);var o=s(0),c=s(1),n=s.n(c),i=s(8),a=s.n(i),r=(s(16),s(3)),l=s(9),u=s(2),d=new function t(){var e=this;Object(l.a)(this,t),this.editorInfo={width:800,height:600,left:0,top:0},this.mouseState={type:!1,drugging:!1,pathid:0,nodeid:0},this.pathList=[],this.addPath=function(){return e.pathList.push({id:e.pathList.length,nodes:[],strokeWidth:5,stroke:"#000000",fill:"#ffffff"}),e.pathList.length},this.setNodes=function(t,s,o){e.pathList[t].nodes[s]=o},this.addNodes=function(t,s,o){e.pathList[t-1].nodes.push({posX:s,posY:o,ctrPosX:s,ctrPosY:o})},this.setMouseState=function(t,s,o,c){e.mouseState.pathid=o,e.mouseState.nodeid=c,e.mouseState.type=t,e.mouseState.drugging=s},this.setStateInfo=function(t,s,o){switch(s){case"X":var c=e.pathList[0].nodes[0];c.posX=Number(o),e.setNodes(0,0,c);break;case"Y":var n=e.pathList[0].nodes[0];n.posY=Number(o),e.setNodes(0,0,n);break;case"fill":e.pathList[t].fill=o;break;case"strokeWidth":e.pathList[t].strokeWidth=Number(o);break;case"stroke":e.pathList[t].stroke=o}},Object(u.k)(this),this.pathList.push({id:0,nodes:[{posX:125.5,posY:171.5,ctrPosX:194.5,ctrPosY:85.5},{posX:246.5,posY:140.5,ctrPosX:288.5,ctrPosY:95.5},{posX:210,posY:261,ctrPosX:309.5,ctrPosY:309.5}],strokeWidth:5,stroke:"#000000",fill:"none"})},p=s(4),h=Object(p.a)((function(t){var e=d.pathList[t.pathId].nodes[t.id],s=function(e,s){e?(d.setMouseState(!0,!0,t.pathId,t.id),console.log("\u6309\u4e0b\u53bb\u951a\u70b9\u5c5e\u4e8e\u8def\u5f84"+t.pathId+"\u7684\u951a\u70b9"+t.id)):(d.setMouseState(!1,!0,t.pathId,t.id),console.log("\u6309\u4e0b\u53bb\u63a7\u5236\u70b9\u5c5e\u4e8e\u8def\u5f84"+t.pathId+"\u7684\u951a\u70b9"+t.id))};return Object(o.jsxs)(c.Fragment,{children:[Object(o.jsx)("circle",{className:"point-control",onMouseDown:function(t){return s(!0)},cx:e.posX,cy:e.posY,stroke:"#55f",r:"4"}),Object(o.jsx)("line",{x1:e.posX,y1:e.posY,x2:e.ctrPosX,y2:e.ctrPosY,stroke:"#555",strokeWidth:"1"}),Object(o.jsx)("circle",{className:"point-control",onMouseDown:function(t){return s(!1)},cx:e.ctrPosX,cy:e.ctrPosY,stroke:"#55f",r:"4"})]})})),j=Object(p.a)((function(t){var e=function(t){for(var e="",s=0;s<t.length;s++)if(0===s)e+="M ".concat(t[s].posX," ").concat(t[s].posY," C ").concat(t[s].ctrPosX," ").concat(t[s].ctrPosY," ");else if(s!==t.length-1){var o=2*t[s].posX-t[s].ctrPosX,c=2*t[s].posY-t[s].ctrPosY;e+="".concat(t[s].ctrPosX," ").concat(t[s].ctrPosY," ").concat(t[s].posX," ").concat(t[s].posY," C ").concat(o," ").concat(c," ")}else e+="".concat(t[s].ctrPosX," ").concat(t[s].ctrPosY," ").concat(t[s].posX," ").concat(t[s].posY);return console.log(e),e},s=Object(c.useState)(!1),n=Object(r.a)(s,2),i=n[0],a=n[1],l=t.path,u=l.id,d=l.nodes;if(!i)return Object(o.jsx)(c.Fragment,{children:Object(o.jsx)("path",{onDoubleClick:function(t){t.stopPropagation(),a(!0)},d:e(d),strokeWidth:t.path.strokeWidth,stroke:t.path.stroke,fill:t.path.fill})});var p=function(){for(var t=[],s=null,o=0;o+1<d.length;o++){if(0!==o&&o+1!==d.length){var c=d[o],n=2*d[o].posX-d[o].ctrPosX,i=2*d[o].posY-d[o].ctrPosY;s={posX:c.posX,posY:c.posY,ctrPosX:n,ctrPosY:i}}var a=e([s||d[o],d[o+1]]);t.push({attrD:a,nodes:[s||d[o],d[o+1]]})}return t}();return Object(o.jsx)(c.Fragment,{children:p.map((function(e){return Object(o.jsxs)(c.Fragment,{children:[Object(o.jsx)("path",{d:e.attrD,strokeWidth:t.path.strokeWidth,stroke:t.path.stroke,fill:t.path.fill}),d.map((function(t,e){return Object(o.jsx)(h,{node:t,id:e,pathId:u})}))]})}))})}));var f=s(10),m=(s(18),function(t){var e=t.currentTool;Object(c.useEffect)((function(){var t;if(n){var e=null===n||void 0===n||null===(t=n.current)||void 0===t?void 0:t.getBoundingClientRect();e&&(d.editorInfo.top=e.top,d.editorInfo.left=e.left,v(e))}}),[]);var s,n=Object(c.useRef)(null),i=Object(c.useState)(!0),a=Object(r.a)(i,2),l=a[0],u=a[1],p=Object(c.useState)(-1),h=Object(r.a)(p,2),m=h[0],b=h[1],O=Object(c.useState)(d.editorInfo),g=Object(r.a)(O,2),x=g[0],v=g[1],P=d.pathList,X=d.mouseState.pathid,Y=d.mouseState.nodeid,k=Object(c.useState)(P[d.mouseState.pathid].nodes[d.mouseState.nodeid]),N=Object(r.a)(k,2),S=N[0],I=N[1];Object(c.useEffect)((function(){d.setNodes(d.mouseState.pathid,d.mouseState.nodeid,S)}),[S]);var C=f.debounce((function(t){if(t.stopPropagation(),d.mouseState.drugging){var e=function(t){var e=d.editorInfo;return{x:t.clientX-e.left,y:t.clientY-e.top}}(t),s=e.x,o=e.y;d.mouseState.type?I({posX:s,posY:o,ctrPosX:S.ctrPosX,ctrPosY:S.ctrPosY}):I({posX:S.posX,posY:S.posY,ctrPosX:s,ctrPosY:o})}}),5,{trailing:!0});return Object(o.jsx)("div",{className:"editor-container",children:Object(o.jsx)("svg",{ref:n,className:"editor-svg",width:x.width,height:x.height,onMouseDown:function(t){t.stopPropagation(),X=d.mouseState.pathid,Y=d.mouseState.nodeid;var e=d.pathList[X].nodes[Y];I({posX:e.posX,posY:e.posY,ctrPosX:e.ctrPosX,ctrPosY:e.ctrPosY})},onMouseMove:C,onMouseUp:function(t){t.stopPropagation(),d.setMouseState(!1,!1,X,Y)},onDoubleClick:function(){clearTimeout(s),u(!1),b(-1)},onClick:function(t){t.stopPropagation(),clearTimeout(s),s=setTimeout((function(){switch(e){case"pen":if(l){var s=m;"pen"===e&&-1===m&&(s=d.addPath(),b(s)),d.addNodes(s,t.pageX-x.left,t.pageY-x.top)}else u(!0)}}),300)},children:P.map((function(t){return Object(o.jsx)(j,{path:t},t.id)}))})})}),b=(s(19),function(){var t=function(t){var e=t.target.name,s=t.target.value;d.setStateInfo(0,e,s)},e=d.pathList[0];return Object(o.jsx)(c.Fragment,{children:Object(o.jsxs)("div",{className:"statusContainer",children:[Object(o.jsx)("h4",{children:"\u72b6\u6001\u680f"}),Object(o.jsxs)("label",{className:"statusinput",children:[Object(o.jsx)("span",{children:"PositionX:"}),Object(o.jsx)("input",{type:"number",name:"X",defaultValue:e.nodes[0].posX,onChange:t})]}),Object(o.jsxs)("label",{className:"statusinput",children:[Object(o.jsx)("span",{children:"PositionY:"}),Object(o.jsx)("input",{type:"number",name:"Y",defaultValue:e.nodes[0].posY,onChange:t})]}),Object(o.jsxs)("label",{className:"statusinput",children:[Object(o.jsx)("span",{children:"fill:"}),Object(o.jsx)("input",{type:"color",name:"fill",defaultValue:e.fill,onChange:t})]}),Object(o.jsxs)("label",{className:"statusinput",children:[Object(o.jsx)("span",{children:"stroke Width:"}),Object(o.jsx)("input",{type:"number",name:"strokeWidth",min:"0",max:"40",defaultValue:e.strokeWidth,onChange:t})]}),Object(o.jsxs)("label",{className:"statusinput",children:[Object(o.jsx)("span",{children:"stroke:"}),Object(o.jsx)("input",{type:"color",name:"stroke",defaultValue:e.stroke,onChange:t})]})]})})}),O=(s(20),s(21),s.p+"static/media/circle.292ce4e1.svg"),g=s.p+"static/media/pen.4de46a1c.svg",x=s.p+"static/media/mouse.dfeff54d.svg",v=s.p+"static/media/line.86048c7a.svg",P=s.p+"static/media/rectangle.d8ea8f58.svg",X=function(t){function e(e){t.set(e.target.id)}return Object(o.jsxs)("div",{className:"toolbar",children:[Object(o.jsx)("div",{className:"toolitem",onClick:e,children:Object(o.jsx)("img",{className:"mouse"===t.currentTool?"itmeIconselect":"itmeIcon",id:"mouse",alt:"mouse",src:x})}),Object(o.jsx)("div",{className:"toolitem",onClick:e,children:Object(o.jsx)("img",{className:"circle"===t.currentTool?"itmeIconselect":"itmeIcon",id:"circle",alt:"circle",src:O})}),Object(o.jsx)("div",{className:"toolitem",onClick:e,children:Object(o.jsx)("img",{className:"rectangle"===t.currentTool?"itmeIconselect":"itmeIcon",id:"rectangle",alt:"rectangle",src:P})}),Object(o.jsx)("div",{className:"toolitem",onClick:e,children:Object(o.jsx)("img",{className:"line"===t.currentTool?"itmeIconselect":"itmeIcon",id:"line",alt:"line",src:v})}),Object(o.jsx)("div",{className:"toolitem",onClick:e,children:Object(o.jsx)("img",{className:"pen"===t.currentTool?"itmeIconselect":"itmeIcon",id:"pen",alt:"pen",src:g})})]})},Y=(s(22),function(){var t=Object(c.useState)("mouse"),e=Object(r.a)(t,2),s=e[0],n=e[1];return Object(o.jsxs)("div",{className:"basic-container",children:[Object(o.jsx)(X,{currentTool:s,set:n}),Object(o.jsx)(m,{currentTool:s}),Object(o.jsx)(b,{})]})});s(23);var k=function(){return Object(o.jsx)("div",{className:"App",children:Object(o.jsx)(Y,{})})},N=function(t){t&&t instanceof Function&&s.e(3).then(s.bind(null,25)).then((function(e){var s=e.getCLS,o=e.getFID,c=e.getFCP,n=e.getLCP,i=e.getTTFB;s(t),o(t),c(t),n(t),i(t)}))};a.a.render(Object(o.jsx)(n.a.StrictMode,{children:Object(o.jsx)(k,{})}),document.getElementById("root")),N()}],[[24,1,2]]]);
//# sourceMappingURL=main.1a88f297.chunk.js.map
(this["webpackJsonpsvg-editor"]=this["webpackJsonpsvg-editor"]||[]).push([[0],{27:function(t,e,c){},33:function(t,e,c){},34:function(t,e,c){},35:function(t,e,c){},36:function(t,e,c){},37:function(t,e,c){},38:function(t,e,c){},39:function(t,e,c){},40:function(t,e,c){},41:function(t,e,c){"use strict";c.r(e);var r=c(0),o=c(1),a=c.n(o),s=c(19),n=c.n(s),i=(c(27),c(4)),p=c(3),h=c(14),d=c.n(h),l=c(20),b=c(11),u=c(5),f=c(15),P=c(2),x=0,j=1,m=2;function y(t){var e=v.editorInfo;return{x:t.clientX-e.left,y:t.clientY-e.top}}function X(t){return{ctr2PosX:2*t.posX-t.ctrPosX,ctr2PosY:2*t.posY-t.ctrPosY}}function g(t){var e=t.posX,c=t.posY,r=t.ctrPosY,o=t.ctrPosX,a=Math.sqrt((e-o)*(e-o)+(c-r)*(c-r)),s=.552284749831*a,n=[];return n[0]={posX:e,posY:c+a,ctrPosX:e+s,ctrPosY:c+a,ctr2PosX:e-s,ctr2PosY:c+a},n[1]={posX:e+a,posY:c,ctrPosX:e+a,ctrPosY:c+s,ctr2PosX:e+a,ctr2PosY:c-s},n[2]={posX:e,posY:c-a,ctrPosX:e+s,ctrPosY:c-a,ctr2PosX:e-s,ctr2PosY:c-a},n[3]={posX:e-a,posY:c,ctrPosX:e-a,ctrPosY:c-s,ctr2PosX:e-a,ctr2PosY:c+s},n}function Y(t){var e=t.posX,c=t.posY,r=t.ctrPosY,o=t.ctrPosX,a=[];return a[0]={posX:e,posY:c,ctrPosX:e,ctrPosY:c,ctr2PosX:e,ctr2PosY:c},a[1]={posX:o,posY:c,ctrPosX:o,ctrPosY:c,ctr2PosX:o,ctr2PosY:c},a[2]={posX:o,posY:r,ctrPosX:o,ctrPosY:r,ctr2PosX:o,ctr2PosY:r},a[3]={posX:e,posY:r,ctrPosX:e,ctrPosY:r,ctr2PosX:e,ctr2PosY:r},a}function O(t,e,c,r){return c===r?0:(c-r)/t*e}var v=new function t(){var e=this;Object(b.a)(this,t),this.editorInfo={width:800,height:600,left:0,top:0},this.mouseState={type:x,drugging:!1,pathid:-1,nodeid:-1},this.currentTool="mouse",this.pathList=[],this.editingPathId=-1,this.setPathBbox=function(t,c){var r=t.getBBox(),o=r.x+(r.width>>1),a=r.y+(r.height>>1);e.pathList[c].centerPoint={ctrx:o,ctry:a},e.pathList[c].border=[{ctrx:r.x,ctry:r.y},{ctrx:r.x+r.width,ctry:r.y},{ctrx:r.x+r.width,ctry:r.y+r.height},{ctrx:r.x,ctry:r.y+r.height}],_.update(e.pathList[c])},this.initPathList=function(t,c){e.pathList.push(c)},this.addPath=function(t){return e.pathList.push({id:Number(Math.random().toString().substr(3,18)+Date.now()).toString(36),nodes:[],strokeWidth:5,stroke:"#000000",fill:"none",type:t||0,centerPoint:{ctrx:-1,ctry:-1},rotate:0,border:[{ctrx:-1,ctry:-1},{ctrx:-1,ctry:-1},{ctrx:-1,ctry:-1},{ctrx:-1,ctry:-1}],scalling:"",scaleX:1,scaleY:1,scale_origin:"",translate:{left:0,right:0,top:0,bottom:0},dragPath:{x:0,y:0}}),e.pathList.length-1},this.deletePath=function(t){var c=e.pathList[t].id;e.pathList.splice(t,1),e.editingPathId=-1,_.remove(c)},this.setEditingPath=function(t){e.editingPathId=t},this.setNodes=function(t,c,r){e.pathList[t]&&(e.pathList[t].nodes[c]=r,_.update(e.pathList[t]))},this.addNodes=function(t,c,r,o,a,s,n,i,p){var h=e.pathList[t].nodes.length,d=e.pathList[t].type;0===h||p?(d?e.pathList[t].nodes.push({posX:c,posY:r,ctrPosX:o||c,ctrPosY:a||r,ctr2PosX:s,ctr2PosY:n}):e.pathList[t].nodes.push({posX:c,posY:r,ctrPosX:o||c,ctrPosY:a||r}),0===h?_.add(e.pathList[t]):_.update(e.pathList[t])):(e.pathList[t].nodes=[].concat(Object(f.a)(e.pathList[t].nodes.slice(0,i||h)),[{posX:c,posY:r,ctrPosX:o||c,ctrPosY:a||r,ctr2PosX:s,ctr2PosY:n}],Object(f.a)(e.pathList[t].nodes.slice(i||h))),_.update(e.pathList[t]))},this.setMouseState=function(t,c,r,o){e.mouseState.pathid=r,e.mouseState.nodeid=o,e.mouseState.type=t,e.mouseState.drugging=c},this.setCurrentTool=function(t){e.currentTool=t},this.copyPath=function(t){var c,r=e.addPath(e.pathList[t].type),o=e.pathList[t].nodes,a=Object(u.a)(o);try{for(a.s();!(c=a.n()).done;){var s=c.value;s.ctr2PosY&&s.ctr2PosX?e.addNodes(r,s.posX+10,s.posY+10,s.ctrPosX+10,s.ctrPosY+10,s.ctr2PosX+10,s.ctr2PosY+10):e.addNodes(r,s.posX+10,s.posY+10,s.ctrPosX+10,s.ctrPosY+10)}}catch(n){a.e(n)}finally{a.f()}e.pathList[r].fill=e.pathList[t].fill,e.pathList[r].stroke=e.pathList[t].stroke,e.pathList[r].strokeWidth=e.pathList[t].strokeWidth},this.movePath=function(t,c,r){var o,a=Object(u.a)(e.pathList[t].nodes);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.posX+=c,s.posY+=r,s.ctrPosX+=c,s.ctrPosY+=r,s.ctr2PosY&&s.ctr2PosX&&(s.ctr2PosX+=c,s.ctr2PosY+=r)}}catch(h){a.e(h)}finally{a.f()}var n,i=Object(u.a)(e.pathList[t].border);try{for(i.s();!(n=i.n()).done;){var p=n.value;p.ctrx+=c,p.ctry+=r}}catch(h){i.e(h)}finally{i.f()}e.pathList[t].centerPoint.ctrx+=c,e.pathList[t].centerPoint.ctry+=r,e.setDragPath(t,0,0),_.update(e.pathList[t])},this.setBorder=function(t,c){e.pathList[t].border=c},this.setTranslate=function(t,c){e.pathList[t].translate=c},this.setScalling=function(t,c){t>-1&&(e.pathList[t].scalling=c)},this.setScaleY=function(t,c){if(-1!==e.pathList[t].scalling.indexOf("top")){if(c>e.pathList[t].border[2].ctry)return;var r=e.pathList[t].border[3].ctry-e.pathList[t].border[1].ctry,o=e.pathList[t].border[3].ctry-c;e.pathList[t].translate.top=r-o,e.pathList[t].scaleY=o/r}else{if(c<e.pathList[t].border[0].ctry)return;var a=e.pathList[t].border[3].ctry-e.pathList[t].border[1].ctry,s=c-e.pathList[t].border[0].ctry;e.pathList[t].scaleY=s/a,e.pathList[t].translate.bottom=s-a}},this.setDragPath=function(t,c,r){e.pathList[t].dragPath={x:c,y:r}},this.setScaleX=function(t,c){if(-1!==e.pathList[t].scalling.indexOf("left")){if(c>e.pathList[t].border[1].ctrx)return;var r=e.pathList[t].border[1].ctrx-e.pathList[t].border[0].ctrx,o=e.pathList[t].border[1].ctrx-c;e.pathList[t].translate.left=r-o,e.pathList[t].scaleX=o/r}else{if(c<e.pathList[t].border[0].ctrx)return;var a=e.pathList[t].border[1].ctrx-e.pathList[t].border[0].ctrx,s=c-e.pathList[t].border[0].ctrx;e.pathList[t].translate.right=s-a,e.pathList[t].scaleX=s/a}},this.setScale=function(t,c,r){e.pathList[t].scaleX=c,e.pathList[t].scaleY=r},this.scaleFinshX=function(t,c){if(-1!==e.pathList[t].scalling.indexOf("left")){var r,o=e.pathList[t].border[1].ctrx-e.pathList[t].border[0].ctrx,a=e.pathList[t].border[1].ctrx-c,s=e.pathList[t].border[0].ctrx,n=Object(u.a)(e.pathList[t].nodes);try{for(n.s();!(r=n.n()).done;){var i=r.value;i.posX=c+O(o,a,i.posX,s),i.ctrPosX=c+O(o,a,i.ctrPosX,s),i.ctr2PosX&&i.ctr2PosY&&(i.ctr2PosX=c+O(o,a,i.ctr2PosX,s)),e.pathList[t].border[0].ctrx=c,e.pathList[t].border[3].ctrx=c,e.pathList[t].centerPoint.ctrx=(e.pathList[t].border[1].ctrx+c)/2}}catch(P){n.e(P)}finally{n.f()}}else if(-1!==e.pathList[t].scalling.indexOf("right")){var p,h=e.pathList[t].border[1].ctrx-e.pathList[t].border[0].ctrx,d=c-e.pathList[t].border[0].ctrx,l=e.pathList[t].border[1].ctrx,b=Object(u.a)(e.pathList[t].nodes);try{for(b.s();!(p=b.n()).done;){var f=p.value;f.posX=c+O(h,d,f.posX,l),f.ctrPosX=c+O(h,d,f.ctrPosX,l),f.ctr2PosX&&f.ctr2PosY&&(f.ctr2PosX=c+O(h,d,f.ctr2PosX,l)),e.pathList[t].border[1].ctrx=c,e.pathList[t].border[2].ctrx=c,e.pathList[t].centerPoint.ctrx=(e.pathList[t].border[0].ctrx+c)/2}}catch(P){b.e(P)}finally{b.f()}}e.pathList[t].scaleX=1,e.pathList[t].translate.left=0,e.pathList[t].translate.right=0},this.scaleFinshY=function(t,c){if(-1!==e.pathList[t].scalling.indexOf("top")){var r,o=e.pathList[t].border[3].ctry-e.pathList[t].border[0].ctry,a=e.pathList[t].border[3].ctry-c,s=e.pathList[t].border[0].ctry,n=Object(u.a)(e.pathList[t].nodes);try{for(n.s();!(r=n.n()).done;){var i=r.value;i.posY=c+O(o,a,i.posY,s),i.ctrPosY=c+O(o,a,i.ctrPosY,s),i.ctr2PosX&&i.ctr2PosY&&(i.ctr2PosY=c+O(o,a,i.ctr2PosY,s)),e.pathList[t].border[0].ctry=c,e.pathList[t].border[1].ctry=c,e.pathList[t].centerPoint.ctry=(e.pathList[t].border[3].ctry+c)/2}}catch(P){n.e(P)}finally{n.f()}}else if(-1!==e.pathList[t].scalling.indexOf("bottom")){var p,h=e.pathList[t].border[3].ctry-e.pathList[t].border[0].ctry,d=c-e.pathList[t].border[0].ctry,l=e.pathList[t].border[3].ctry,b=Object(u.a)(e.pathList[t].nodes);try{for(b.s();!(p=b.n()).done;){var f=p.value;f.posY=c+O(h,d,f.posY,l),f.ctrPosY=c+O(h,d,f.ctrPosY,l),f.ctr2PosX&&f.ctr2PosY&&(f.ctr2PosY=c+O(h,d,f.ctr2PosY,l)),e.pathList[t].border[3].ctry=c,e.pathList[t].border[2].ctry=c,e.pathList[t].centerPoint.ctry=(e.pathList[t].border[0].ctry+c)/2}}catch(P){b.e(P)}finally{b.f()}}e.pathList[t].scaleY=1,e.pathList[t].translate.bottom=0,e.pathList[t].translate.top=0},this.setStateInfo=function(t,c,r){switch(c){case"X":var o=e.pathList[t].nodes[0].posX;e.movePath(t,Number(r)-o,0);break;case"Y":var a=e.pathList[t].nodes[0].posY;e.movePath(t,0,Number(r)-a);break;case"fill":e.pathList[t].fill=r;break;case"strokeWidth":e.pathList[t].strokeWidth=Number(r);break;case"stroke":e.pathList[t].stroke=r;break;case"rotate":e.pathList[t].rotate=Number(r);break;case"scale_origin":e.pathList[t].scale_origin=r;break;case"scaleX":e.pathList[t].scaleX=Number(r);break;case"scaleY":e.pathList[t].scaleY=Number(r)}_.update(e.pathList[t])},Object(P.k)(this)},L=c(7),k=c.n(L),_=new function t(){var e=this;Object(b.a)(this,t),this.dbName="svgData",this.version=1,this.tableName="svgPath",this.db=null,this.openDB=function(){return new Promise((function(t,c){var r=window.indexedDB.open(e.dbName,e.version);r.onsuccess=function(c){console.log("\u6210\u529f\u6253\u5f00\u6570\u636e\u5e93"),e.db=c.target.result,t(1)},r.onupgradeneeded=function(t){console.log("\u6210\u529f\u65b0\u5efa\u6570\u636e\u5e93"),e.db=t.target.result,e.create_table(e.db)},r.onerror=function(t){console.log("\u6570\u636e\u5e93\u6253\u5f00\u62a5\u9519"),c(1)}}))},this.create_table=function(t){t.objectStoreNames.contains(e.tableName)||t.createObjectStore(e.tableName,{keyPath:"id"}).createIndex("id","id",{unique:!0})},this.add=function(t){if(e.db){var c=Object(P.m)(t),r=e.db.transaction([e.tableName],"readwrite").objectStore(e.tableName).add(c);r.onsuccess=function(t){console.log("\u6570\u636e\u5199\u5165\u6210\u529f")},r.onerror=function(t){console.log("\u6570\u636e\u5199\u5165\u5931\u8d25")}}},this.readAll=function(){return new Promise((function(t,c){e.db?e.db.transaction(e.tableName).objectStore(e.tableName).openCursor().onsuccess=function(e){var c=e.target.result;c?(v.initPathList(c.key,c.value),c.continue()):(console.log("\u6ca1\u6709\u66f4\u591a\u6570\u636e\u4e86\uff01"),t(1))}:c()}))},this.update=L.debounce((function(t){if(e.db){var c=Object(P.m)(t),r=e.db.transaction([e.tableName],"readwrite").objectStore(e.tableName).put(c);r.onsuccess=function(t){console.log("\u6570\u636e\u66f4\u65b0\u6210\u529f")},r.onerror=function(t){console.log("\u6570\u636e\u66f4\u65b0\u5931\u8d25")}}}),1e3,{maxWait:1e4}),this.remove=function(t){e.db&&(e.db.transaction([e.tableName],"readwrite").objectStore(e.tableName).delete(t).onsuccess=function(t){console.log("\u6570\u636e\u5220\u9664\u6210\u529f")})}},N=c(8),w=Object(N.a)((function(t){if(-1===t.id)return Object(r.jsx)("circle",{onClick:t.onClick,onMouseLeave:t.onMouseLeave,className:"point-control-add",cx:t.node.posX,cy:t.node.posY});var e=v.pathList[t.pathId].nodes[t.id],c=v.mouseState,a=c.pathid===t.pathId&&c.nodeid===t.id,s=v.currentTool,n=function(e,c){switch("pen_new_path"===s&&(v.pathList[t.pathId].type=1),e){case x:v.setMouseState(x,!0,t.pathId,t.id);break;case j:v.setMouseState(j,!0,t.pathId,t.id);break;case m:v.setMouseState(m,!0,t.pathId,t.id)}};return Object(r.jsxs)(o.Fragment,{children:[Object(r.jsx)("circle",{className:"point-control",onMouseDown:function(t){return n(x)},cx:e.posX,cy:e.posY}),a&&Object(r.jsx)("line",{x1:e.posX,y1:e.posY,x2:e.ctrPosX,y2:e.ctrPosY,stroke:"#555",strokeWidth:"1"}),a&&Object(r.jsx)("circle",{className:"point-control",onMouseDown:function(t){return n(j)},cx:e.ctrPosX,cy:e.ctrPosY}),a&&c.nodeid===t.id&&e.ctr2PosX&&e.ctr2PosY&&Object(r.jsx)("circle",{className:"point-control",onMouseDown:function(t){return n(m)},cx:e.ctr2PosX,cy:e.ctr2PosY}),a&&c.nodeid===t.id&&e.ctr2PosX&&e.ctr2PosY&&Object(r.jsx)("line",{x1:e.posX,y1:e.posY,x2:e.ctr2PosX,y2:e.ctr2PosY,stroke:"#555",strokeWidth:"1"})]})})),I=c(21),S=c.n(I),C=(c(33),function(t){Object(o.useEffect)((function(){d(t.path.border),s(t.path.translate),f("M ".concat(t.path.border[0].ctrx+t.path.translate.left," ").concat(t.path.border[0].ctry+t.path.translate.top)+" C ".concat(t.path.border[0].ctrx+t.path.translate.left," ").concat(t.path.border[0].ctry+t.path.translate.top," ").concat(t.path.border[0].ctrx+t.path.translate.left," ").concat(t.path.border[0].ctry+t.path.translate.top," ").concat(t.path.border[1].ctrx+t.path.translate.right," ").concat(t.path.border[1].ctry+t.path.translate.top)+" C ".concat(t.path.border[1].ctrx+t.path.translate.right," ").concat(t.path.border[1].ctry+t.path.translate.top," ").concat(t.path.border[1].ctrx+t.path.translate.right," ").concat(t.path.border[1].ctry+t.path.translate.top," ").concat(t.path.border[2].ctrx+t.path.translate.right," ").concat(t.path.border[2].ctry+t.path.translate.bottom)+" C ".concat(t.path.border[2].ctrx+t.path.translate.right," ").concat(t.path.border[2].ctry+t.path.translate.bottom," ").concat(t.path.border[2].ctrx+t.path.translate.right," ").concat(t.path.border[2].ctry+t.path.translate.bottom," ").concat(t.path.border[3].ctrx+t.path.translate.left," ").concat(t.path.border[3].ctry+t.path.translate.bottom)+" C ".concat(t.path.border[3].ctrx+t.path.translate.left," ").concat(t.path.border[3].ctry+t.path.translate.bottom," ").concat(t.path.border[3].ctrx+t.path.translate.left," ").concat(t.path.border[3].ctry+t.path.translate.bottom," ").concat(t.path.border[0].ctrx+t.path.translate.left," ").concat(t.path.border[0].ctry+t.path.translate.top))}),[t]);var e=Object(o.useState)(t.path.translate),c=Object(i.a)(e,2),a=c[0],s=c[1],n=Object(o.useState)(t.path.border),p=Object(i.a)(n,2),h=p[0],d=p[1],l=Object(o.useState)("M ".concat(t.path.border[0].ctrx," ").concat(t.path.border[0].ctry)+" C ".concat(t.path.border[0].ctrx," ").concat(t.path.border[0].ctry," ").concat(t.path.border[0].ctrx," ").concat(t.path.border[0].ctry," ").concat(t.path.border[1].ctrx," ").concat(t.path.border[1].ctry)+" C ".concat(t.path.border[1].ctrx," ").concat(t.path.border[1].ctry," ").concat(t.path.border[1].ctrx," ").concat(t.path.border[1].ctry," ").concat(t.path.border[2].ctrx," ").concat(t.path.border[2].ctry)+" C ".concat(t.path.border[2].ctrx," ").concat(t.path.border[2].ctry," ").concat(t.path.border[2].ctrx," ").concat(t.path.border[2].ctry," ").concat(t.path.border[3].ctrx," ").concat(t.path.border[3].ctry)+" C ".concat(t.path.border[3].ctrx," ").concat(t.path.border[3].ctry," ").concat(t.path.border[3].ctrx," ").concat(t.path.border[3].ctry," ").concat(t.path.border[0].ctrx," ").concat(t.path.border[0].ctry)),b=Object(i.a)(l,2),u=b[0],f=b[1],P=function(e){switch(e.stopPropagation(),v.setScalling(t.pathId,e.target.id),e.target.id){case"left":case"left_bottom":case"bottom":v.setStateInfo(t.pathId,"scale_origin","".concat(t.path.border[1].ctrx," ").concat(t.path.border[1].ctry));break;case"right":case"right_bottom":v.setStateInfo(t.pathId,"scale_origin","".concat(t.path.border[0].ctrx," ").concat(t.path.border[0].ctry));break;case"top":case"left_top":v.setStateInfo(t.pathId,"scale_origin","".concat(t.path.border[2].ctrx," ").concat(t.path.border[2].ctry));break;case"right_top":v.setStateInfo(t.pathId,"scale_origin","".concat(t.path.border[3].ctrx," ").concat(t.path.border[3].ctry))}};return Object(r.jsxs)(o.Fragment,{children:[Object(r.jsx)("rect",{className:"react",transform:"translate(".concat(a.left,",").concat(a.top,")"),x:t.path.border[0].ctrx-4,y:h[0].ctry-4}),Object(r.jsx)("rect",{className:"react",transform:"translate(".concat(a.right,",").concat(a.top,")"),x:h[1].ctrx-4,y:h[1].ctry-4}),Object(r.jsx)("rect",{className:"react",transform:"translate(".concat(a.right,",").concat(a.bottom,")"),x:h[2].ctrx-4,y:h[2].ctry-4}),Object(r.jsx)("rect",{className:"react",transform:"translate(".concat(a.left,",").concat(a.bottom,")"),x:h[3].ctrx-4,y:h[3].ctry-4}),Object(r.jsx)("rect",{className:"react",transform:"translate(".concat((a.left+a.right)/2,",").concat(a.top,")"),x:t.path.centerPoint.ctrx-4,y:h[0].ctry-4}),Object(r.jsx)("rect",{className:"react",transform:"translate(".concat((a.left+a.right)/2,",").concat(a.bottom,")"),x:t.path.centerPoint.ctrx-4,y:h[3].ctry-4}),Object(r.jsx)("rect",{className:"react",transform:"translate(".concat(a.left,",").concat((a.bottom+a.top)/2,")"),x:h[0].ctrx-4,y:t.path.centerPoint.ctry-4}),Object(r.jsx)("rect",{className:"react",transform:"translate(".concat(a.right,",").concat((a.bottom+a.top)/2,")"),x:h[1].ctrx-4,y:t.path.centerPoint.ctry-4}),Object(r.jsx)("rect",{className:"react-big",transform:"translate(".concat(a.left,",").concat(a.top,")"),id:"left_top",x:t.path.border[0].ctrx-8,y:h[0].ctry-8,onMouseDown:P}),Object(r.jsx)("rect",{className:"react-big",transform:"translate(".concat(a.right,",").concat(a.top,")"),id:"right_top",x:h[1].ctrx-8,y:h[1].ctry-8,onMouseDown:P}),Object(r.jsx)("rect",{className:"react-big",transform:"translate(".concat(a.right,",").concat(a.bottom,")"),id:"right_bottom",x:h[2].ctrx-8,y:h[2].ctry-8,onMouseDown:P}),Object(r.jsx)("rect",{className:"react-big",transform:"translate(".concat(a.left,",").concat(a.bottom,")"),id:"left_bottom",x:h[3].ctrx-8,y:h[3].ctry-8,onMouseDown:P}),Object(r.jsx)("rect",{className:"react-big",transform:"translate(".concat((a.left+a.right)/2,",").concat(a.top,")"),id:"top",x:t.path.centerPoint.ctrx-8,y:h[0].ctry-8,onMouseDown:P}),Object(r.jsx)("rect",{className:"react-big",transform:"translate(".concat((a.left+a.right)/2,",").concat(a.bottom,")"),id:"bottom",x:t.path.centerPoint.ctrx-8,y:h[3].ctry-8,onMouseDown:P}),Object(r.jsx)("rect",{className:"react-big",transform:"translate(".concat(a.left,",").concat((a.bottom+a.top)/2,")"),id:"left",x:h[0].ctrx-8,y:t.path.centerPoint.ctry-8,onMouseDown:P}),Object(r.jsx)("rect",{className:"react-big",transform:"translate(".concat(a.right,",").concat((a.bottom+a.top)/2,")"),id:"right",x:h[1].ctrx-8,y:t.path.centerPoint.ctry-8,onMouseDown:P}),Object(r.jsx)("path",{id:"scale_react",d:u,strokeWidth:"2",stroke:"#55f",fill:"none",strokeDasharray:"5"})]})}),M=Object(N.a)((function(t){var e=t.pathId,c=function(t,e){var c="",r=t.length;if(1===r)return c;for(var o=0;o<t.length;o++)0===o?c+="M ".concat(t[o].posX," ").concat(t[o].posY," C ").concat(t[o].ctrPosX," ").concat(t[o].ctrPosY," "):o+1<=t.length-1?c+="".concat(t[o].ctrPosX," ").concat(t[o].ctrPosY," ").concat(t[o].posX," ").concat(t[o].posY," C ").concat(t[o].ctr2PosX," ").concat(t[o].ctr2PosY," "):c+="".concat(t[o].ctrPosX," ").concat(t[o].ctrPosY," ").concat(t[o].posX," ").concat(t[o].posY," ");if(e){var a=X(t[0]),s=a.ctr2PosX,n=a.ctr2PosY;c+="C ".concat(t[r-1].ctr2PosX," ").concat(t[r-1].ctr2PosY," \n          ").concat(t[0].ctr2PosX?t[0].ctr2PosX:s," ").concat(t[0].ctr2PosY?t[0].ctr2PosY:n," ").concat(t[0].posX," ").concat(t[0].posY," z")}return c},a=function(t){t.stopPropagation(),v.setEditingPath(e),v.setPathBbox(t.target,e)},s=k.a.throttle((function(e,c){if(e.stopPropagation(),"pen_add_node"===t.currentTool){var r=y(e),o=r.x,a=r.y,s=c.nodes.reduce((function(t,e,r){return r===c.nodes.length-1?t.push(e.ctrPosX,e.ctrPosY,e.posX,e.posY):t.push(e.posX,e.posY,e.ctrPosX,e.ctrPosY),t}),[]).flat(1),n=new S.a(s);f(n);var i=n.project({x:o,y:a});d({posX:i.x,posY:i.y,ctrPosX:i.x,ctrPosY:i.y,t:i.t})}}),50),n=Object(o.useState)(),p=Object(i.a)(n,2),h=p[0],d=p[1],l=Object(o.useState)(),b=Object(i.a)(l,2),u=b[0],f=b[1],P=t.path.nodes;if("pen_add_node"===t.currentTool&&v.editingPathId===e){var x=function(){for(var e=[],r=null,o=0;o+1<P.length;o++){if(0!==o){var a=P[o];r={posX:a.posX,posY:a.posY,ctrPosX:a.ctr2PosX,ctrPosY:a.ctr2PosY}}var s=[r||P[o],P[o+1]],n=c(s,!1);e.push({attrD:n,nodes:s})}if(t.path.type){var i=P[P.length-1],p=[{posX:i.posX,posY:i.posY,ctrPosX:i.ctr2PosX,ctrPosY:i.ctr2PosY},{posX:(i=P[0]).posX,posY:i.posY,ctrPosX:i.ctr2PosX,ctrPosY:i.ctr2PosY}],h=c(p,!1);e.push({attrD:h,nodes:p})}return e}();return Object(r.jsxs)(o.Fragment,{children:[x.map((function(e){return Object(r.jsx)(o.Fragment,{children:Object(r.jsx)("path",{onClick:a,d:e.attrD,onMouseOver:function(t){return s(t,e)},strokeWidth:t.path.strokeWidth,stroke:t.path.stroke,fill:t.path.fill},e.attrD)})})),P.length&&P.map((function(t,c){return Object(r.jsx)(w,{node:t,id:c,pathId:e})})),h&&Object(r.jsx)(w,{node:h,id:-1,pathId:-1,onClick:function(){if("pen_add_node"===t.currentTool){var c=null===u||void 0===u?void 0:u.split(h.t),r=null===c||void 0===c?void 0:c.left.points;if(c&&r){var o=P.findIndex((function(t){return t.posX===(null===u||void 0===u?void 0:u.points[0].x)&&t.posY===(null===u||void 0===u?void 0:u.points[0].y)})),a={posX:r[0].x,posY:r[0].y,ctrPosX:o?v.pathList[e].nodes[o].ctrPosX:r[1].x,ctrPosY:o?v.pathList[e].nodes[o].ctrPosY:r[1].y,ctr2PosX:o?r[1].x:void 0,ctr2PosY:o?r[1].y:void 0},s={posX:r[3].x,posY:r[3].y,ctrPosX:r[2].x,ctrPosY:r[2].y,ctr2PosX:0,ctr2PosY:0};v.setNodes(e,o,a),a={posX:(r=null===c||void 0===c?void 0:c.right.points)[3].x,posY:r[3].y,ctrPosX:r[2].x,ctrPosY:r[2].y,ctr2PosX:v.pathList[e].nodes[o+1].ctr2PosX||void 0,ctr2PosY:v.pathList[e].nodes[o+1].ctr2PosY||void 0},s.ctr2PosX=r[1].x,s.ctr2PosY=r[1].y,v.setNodes(e,o+1,a),v.addNodes(e,s.posX,s.posY,s.ctrPosX,s.ctrPosY,s.ctr2PosX,s.ctr2PosY,o+1),d(null)}}},onMouseLeave:function(){return d(null)}})]})}if("mouse_rotate_path"===t.currentTool&&v.editingPathId===e){var j="rotate(".concat(t.path.rotate,",").concat(t.path.centerPoint.ctrx,",").concat(t.path.centerPoint.ctry,")"),m="M ".concat(t.path.border[0].ctrx," ").concat(t.path.border[0].ctry)+" C ".concat(t.path.border[0].ctrx," ").concat(t.path.border[0].ctry," ").concat(t.path.border[0].ctrx," ").concat(t.path.border[0].ctry," ").concat(t.path.border[1].ctrx," ").concat(t.path.border[1].ctry)+" C ".concat(t.path.border[1].ctrx," ").concat(t.path.border[1].ctry," ").concat(t.path.border[1].ctrx," ").concat(t.path.border[1].ctry," ").concat(t.path.border[2].ctrx," ").concat(t.path.border[2].ctry)+" C ".concat(t.path.border[2].ctrx," ").concat(t.path.border[2].ctry," ").concat(t.path.border[2].ctrx," ").concat(t.path.border[2].ctry," ").concat(t.path.border[3].ctrx," ").concat(t.path.border[3].ctry)+" C ".concat(t.path.border[3].ctrx," ").concat(t.path.border[3].ctry," ").concat(t.path.border[3].ctrx," ").concat(t.path.border[3].ctry," ").concat(t.path.border[0].ctrx," ").concat(t.path.border[0].ctry);return Object(r.jsxs)(o.Fragment,{children:[Object(r.jsx)("path",{transform:j,onClick:a,d:c(P,!!t.path.type),strokeWidth:t.path.strokeWidth,stroke:t.path.stroke,fill:t.path.fill}),Object(r.jsx)("path",{d:m,transform:j,strokeWidth:"2",stroke:"#55f",fill:"none",strokeDasharray:"5"})]})}if("mouse_drag_path"===t.currentTool&&v.editingPathId===e){var g="translate(".concat(t.path.dragPath.x,",").concat(t.path.dragPath.y,")"),Y="M ".concat(t.path.border[0].ctrx," ").concat(t.path.border[0].ctry)+" C ".concat(t.path.border[0].ctrx," ").concat(t.path.border[0].ctry," ").concat(t.path.border[0].ctrx," ").concat(t.path.border[0].ctry," ").concat(t.path.border[1].ctrx," ").concat(t.path.border[1].ctry)+" C ".concat(t.path.border[1].ctrx," ").concat(t.path.border[1].ctry," ").concat(t.path.border[1].ctrx," ").concat(t.path.border[1].ctry," ").concat(t.path.border[2].ctrx," ").concat(t.path.border[2].ctry)+" C ".concat(t.path.border[2].ctrx," ").concat(t.path.border[2].ctry," ").concat(t.path.border[2].ctrx," ").concat(t.path.border[2].ctry," ").concat(t.path.border[3].ctrx," ").concat(t.path.border[3].ctry)+" C ".concat(t.path.border[3].ctrx," ").concat(t.path.border[3].ctry," ").concat(t.path.border[3].ctrx," ").concat(t.path.border[3].ctry," ").concat(t.path.border[0].ctrx," ").concat(t.path.border[0].ctry);return Object(r.jsxs)(o.Fragment,{children:[Object(r.jsx)("path",{transform:g,onClick:a,d:c(P,!!t.path.type),strokeWidth:t.path.strokeWidth,stroke:t.path.stroke,fill:t.path.fill}),Object(r.jsx)("path",{d:Y,transform:g,strokeWidth:"2",stroke:"#55f",fill:"none",strokeDasharray:"5"})]})}if("mouse_scaling_path"===t.currentTool&&v.editingPathId===e&&4===t.path.border.length){var O="scale(".concat(t.path.scaleX,",").concat(t.path.scaleY,")");return Object(r.jsxs)(o.Fragment,{children:[Object(r.jsx)("path",{transform:O,"transform-origin":t.path.scale_origin,onClick:a,d:c(P,!!t.path.type),strokeWidth:t.path.strokeWidth,stroke:t.path.stroke,fill:t.path.fill}),Object(r.jsx)(C,{pathId:e,path:t.path})]})}return Object(r.jsxs)(o.Fragment,{children:[Object(r.jsx)("path",{onClick:a,d:c(P,!!t.path.type),strokeWidth:t.path.strokeWidth,stroke:t.path.stroke,fill:t.path.fill}),e===v.editingPathId&&P.length&&P.map((function(t,c){return Object(r.jsx)(w,{node:t,id:c,pathId:e},c)}))]})})),T=(c(34),c(10)),D=["INPUT","TEXTAREA"],E=function(t,e){switch(e.type){case"key-down":return Object(p.a)(Object(p.a)({},t),{},Object(T.a)({},e.key,!0));case"key-up":return Object(p.a)(Object(p.a)({},t),{},Object(T.a)({},e.key,!1));case"reset-keys":return Object(p.a)({},e.data);default:return t}},W=function(t,e){var c=t.split("+"),r=c.reduce((function(t,e){return t[e.toLowerCase()]=!1,t}),{}),a=Object(o.useReducer)(E,r),s=Object(i.a)(a,2),n=s[0],p=s[1],h=Object(o.useCallback)((function(t){return function(e){var c=t.toLowerCase();if(e.stopPropagation(),e.cancelBubble=!0,!e.repeat&&!D.includes(e.target.tagName)&&c===e.key.toLowerCase()&&void 0!==n[c])return p({type:"key-down",key:c}),!1}}),[n]),d=Object(o.useCallback)((function(t){return function(e){var c=t.toLowerCase();if(e.stopPropagation(),e.cancelBubble=!0,!D.includes(e.target.tagName)&&e.key.toLowerCase()===c&&void 0!==n[c])return p({type:"key-up",key:c}),!1}}),[n]);Object(o.useEffect)((function(){Object.values(n).filter((function(t){return!t})).length?p({type:null}):(e(n),p({type:"reset-keys",data:r}))}),[e,n,r]),Object(o.useEffect)((function(){return c.forEach((function(t){return window.addEventListener("keydown",h(t))})),function(){return c.forEach((function(t){return window.removeEventListener("keydown",h(t))}))}}),[]),Object(o.useEffect)((function(){return c.forEach((function(t){return window.addEventListener("keyup",d(t))})),function(){return c.forEach((function(t){return window.removeEventListener("keyup",d(t))}))}}),[])},F=function(t){Object(o.useEffect)((function(){var t;if(e){var c=null===e||void 0===e||null===(t=e.current)||void 0===t?void 0:t.getBoundingClientRect();c&&(v.editorInfo.top=c.top,v.editorInfo.left=c.left,P(c)),function(){var t=Object(l.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.openDB();case 3:return t.next=5,_.readAll();case 5:F({posX:-1,posY:-1,ctrPosX:-1,ctrPosY:-1}),console.log("\u52a0\u8f7d\u6570\u636e\u7ed3\u675f"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log("\u52a0\u8f7d\u5931\u8d25");case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}()()}}),[]);var e=Object(o.useRef)(null),c=Object(o.useRef)(!1),a=Object(o.useState)(-1),s=Object(i.a)(a,2),n=s[0],h=s[1],b=Object(o.useState)(v.editorInfo),u=Object(i.a)(b,2),f=u[0],P=u[1],O=Object(o.useState)(!1),k=Object(i.a)(O,2),N=k[0],w=k[1],I=v.pathList,S=v.mouseState.pathid,C=v.mouseState.nodeid,T=Object(o.useState)({posX:-1,posY:-1,ctrPosX:-1,ctrPosY:-1}),D=Object(i.a)(T,2),E=D[0],F=D[1];Object(o.useEffect)((function(){v.setNodes(v.mouseState.pathid,v.mouseState.nodeid,E)}),[E]),Object(o.useEffect)((function(){if("pen_new_path"!==t.currentTool){var e=n;-1!==e&&v.pathList[e].nodes.length<2?(v.deletePath(e),c.current=!1,h(-1)):-1!==e&&v.pathList[e].nodes.length>=2&&(c.current=!1,h(-1))}}),[t.currentTool,n]);var B,R=Object(o.useState)(!1),z=Object(i.a)(R,2),A=z[0],q=z[1],U=Object(o.useState)({posX:-1,posY:-1,ctrPosX:-1,ctrPosY:-1}),J=Object(i.a)(U,2),Z=J[0],G=J[1],H=Object(o.useState)({posX:-1,posY:-1,ctrPosX:-1,ctrPosY:-1}),K=Object(i.a)(H,2),Q=K[0],V=K[1],$=Object(o.useState)({posX:-1,posY:-1,ctrPosX:-1,ctrPosY:-1}),tt=Object(i.a)($,2),et=tt[0],ct=tt[1],rt=Object(o.useState)({posX:-1,posY:-1}),ot=Object(i.a)(rt,2),at=ot[0],st=ot[1],nt=Object(o.useState)(!1),it=Object(i.a)(nt,2),pt=it[0],ht=it[1],dt=L.throttle((function(e){e.stopPropagation();var r=y(e),o=r.x,a=r.y;switch(t.currentTool){case"mouse_drag_path":if(!pt)return;var s=o-at.posX,n=a-at.posY,i=v.editingPathId;v.setDragPath(i,s,n);break;case"mouse_scaling_path":var h=v.editingPathId;if(-1!==h&&""!==v.pathList[h].scalling){if(""===document.body.style.cursor)switch(v.pathList[h].scalling){case"right":case"left":document.body.style.cursor="e-resize";break;case"top":case"bottom":document.body.style.cursor="s-resize";break;case"left_bottom":case"right_top":document.body.style.cursor="ne-resize";break;case"left_top":case"right_bottom":document.body.style.cursor="se-resize"}-1===v.pathList[h].scalling.indexOf("left")&&-1===v.pathList[h].scalling.indexOf("right")||v.setScaleX(h,o),-1===v.pathList[h].scalling.indexOf("top")&&-1===v.pathList[h].scalling.indexOf("bottom")||v.setScaleY(h,a)}break;case"mouse_rotate_path":if(A){var d=v.editingPathId,l=v.pathList[d].centerPoint,b=l.ctrx,u=l.ctry;G(Object(p.a)(Object(p.a)({},Z),{},{ctrPosX:o,ctrPosY:a}));var f=function(t){var e=t.posX,c=t.posY,r=t.ctrPosX,o=t.ctrPosY,a=e*o-c*r,s=(e*r+c*o)/(Math.sqrt(Math.pow(e,2)+Math.pow(c,2))*Math.sqrt(Math.pow(r,2)+Math.pow(o,2))),n=Math.acos(s),i=180/(Math.PI/n);return a<0&&(i=-i),i}({posX:Z.posX-b,posY:Z.posY-u,ctrPosX:Z.ctrPosX-b,ctrPosY:Z.ctrPosY-u});v.setStateInfo(d,"rotate",f.toString())}break;case"rectangle":case"circle":A&&G(Object(p.a)(Object(p.a)({},Z),{},{ctrPosX:o,ctrPosY:a}));break;case"pen_drag_node":if(!v.mouseState.drugging)return;switch(v.mouseState.type){case x:F(Object(p.a)(Object(p.a)({},E),{},{posX:o,posY:a}));break;case j:F(Object(p.a)(Object(p.a)({},E),{},{ctrPosX:o,ctrPosY:a}));break;case m:F(Object(p.a)(Object(p.a)({},E),{},{ctr2PosX:o,ctr2PosY:a}))}break;case"pen_new_path":c.current&&V(Object(p.a)(Object(p.a)({},Q),{},{ctrPosX:o,ctrPosY:a}))}}),5,{trailing:!0});return W("backspace",(function(){return v.deletePath(v.editingPathId)})),W("control+c",(function(){return v.copyPath(v.editingPathId)})),Object(r.jsx)("div",{className:"editor-container",children:Object(r.jsxs)("svg",{id:"editor",ref:e,className:"mouse_rotate_path"===t.currentTool&&A?"editor-svg rotate-mouse":"editor-svg",width:f.width,height:f.height,onMouseDown:function(e){e.stopPropagation();var r=y(e),o=r.x,a=r.y;switch(t.currentTool){case"mouse_drag_path":-1!==v.editingPathId&&(ht(!0),st({posX:o,posY:a}));break;case"mouse_rotate_path":-1!==v.editingPathId&&(q(!0),G({posX:o,posY:a,ctrPosX:o,ctrPosY:a}));break;case"rectangle":case"circle":q(!0),G({posX:o,posY:a,ctrPosX:o,ctrPosY:a});break;case"pen_drag_node":if(S=v.mouseState.pathid,C=v.mouseState.nodeid,-1!==S&&-1!==C){var s=v.pathList[S].nodes[C];F(Object(p.a)({},s))}break;case"pen_new_path":c.current||(c.current=!0,w(!0),ct({posX:o,posY:a,ctrPosX:o,ctrPosY:a,ctr2PosX:o,ctr2PosY:a})),V({posX:o,posY:a,ctrPosX:o,ctrPosY:a,ctr2PosX:o,ctr2PosY:a})}},onMouseMove:dt,onMouseUp:function(e){e.stopPropagation();var r=y(e),o=r.x,a=r.y;clearTimeout(B),B=setTimeout((function(){switch(t.currentTool){case"mouse_drag_path":if(!pt)return;ht(!1);var e=v.editingPathId;v.movePath(e,o-at.posX,a-at.posY);break;case"mouse_scaling_path":var r;document.body.style.cursor="";var s=v.editingPathId;""!==(null===(r=v.pathList[s])||void 0===r?void 0:r.scalling)&&(v.scaleFinshX(s,o),v.scaleFinshY(s,a),v.setScalling(s,""));break;case"mouse_rotate_path":if(A){var i=v.editingPathId;!function(t){var e=v.pathList[t],c=e.rotate,r=e.centerPoint,o=e.border,a=c*Math.PI/180,s=Math.cos(a),n=Math.sin(a),i={posX:-1,posY:-1,ctrPosX:-1,ctrPosY:-1,ctr2PosX:-1,ctr2PosY:-1};e.nodes.forEach((function(e,c){i.posX=(e.posX-r.ctrx)*s-(e.posY-r.ctry)*n+r.ctrx,i.posY=(e.posX-r.ctrx)*n+(e.posY-r.ctry)*s+r.ctry,i.ctrPosX=(e.ctrPosX-r.ctrx)*s-(e.ctrPosY-r.ctry)*n+r.ctrx,i.ctrPosY=(e.ctrPosX-r.ctrx)*n+(e.ctrPosY-r.ctry)*s+r.ctry,e.ctr2PosX&&e.ctr2PosY?(i.ctr2PosX=(e.ctr2PosX-r.ctrx)*s-(e.ctr2PosY-r.ctry)*n+r.ctrx,i.ctr2PosY=(e.ctr2PosX-r.ctrx)*n+(e.ctr2PosY-r.ctry)*s+r.ctry,v.setNodes(t,c,i)):v.setNodes(t,c,{posX:i.posX,posY:i.posY,ctrPosX:i.ctrPosX,ctrPosY:i.ctrPosY})}));var p=[{ctrx:-1,ctry:-1},{ctrx:-1,ctry:-1},{ctrx:-1,ctry:-1},{ctrx:-1,ctry:-1}];o.forEach((function(t,e){p[e].ctrx=(t.ctrx-r.ctrx)*s-(t.ctry-r.ctry)*n+r.ctrx,p[e].ctry=(t.ctrx-r.ctrx)*n+(t.ctry-r.ctry)*s+r.ctry})),v.setBorder(t,p)}(i),v.setStateInfo(i,"rotate","0")}q(!1),G({posX:-1,posY:-1,ctrPosX:-1,ctrPosY:-1});break;case"rectangle":if(A){var d=n;if(-1===n)d=v.addPath(1),Y(Z).forEach((function(t){v.addNodes(d,t.posX,t.posY,t.ctrPosX,t.ctrPosY,t.ctr2PosX,t.ctr2PosY)}))}q(!1),G({posX:-1,posY:-1,ctrPosX:-1,ctrPosY:-1});break;case"circle":if(A){var l=n;if(-1===n)l=v.addPath(1),g(Z).forEach((function(t){v.addNodes(l,t.posX,t.posY,t.ctrPosX,t.ctrPosY,t.ctr2PosX,t.ctr2PosY)}))}q(!1),G({posX:-1,posY:-1,ctrPosX:-1,ctrPosY:-1});break;case"pen_drag_node":v.setMouseState(x,!1,S,C);break;case"pen_new_path":if(!c.current)return;var b=n;if(-1===n&&(b=v.addPath(),h(b)),v.setEditingPath(b),v.pathList[b].type){var u=X(v.pathList[b].nodes[0]),f=u.ctr2PosX,P=u.ctr2PosY;return v.pathList[b].nodes[0].ctr2PosX=f,v.pathList[b].nodes[0].ctr2PosY=P,c.current=!1,void h(-1)}var j=v.pathList[b].nodes.length,m=X(Q),y=m.ctr2PosX,O=m.ctr2PosY;v.addNodes(b,Q.posX,Q.posY,Q.ctrPosX,Q.ctrPosY,y,O,j),N?(ct(Object(p.a)(Object(p.a)({},Q),{},{ctrPosX:y,ctrPosY:O})),w(!1)):ct(Object(p.a)({},Q))}}),250)},onDoubleClick:function(){switch(clearTimeout(B),t.currentTool){case"pen_new_path":if(!c.current||-1===n)return;var e=n,r=v.pathList[e].nodes.length;v.addNodes(e,Q.posX,Q.posY,Q.ctrPosX,Q.ctrPosY,Q.ctrPosX,Q.ctrPosY,r,!0)}c.current=!1,h(-1)},children:[function(){if(c.current){var t=X(et),e=t.ctr2PosX,a=t.ctr2PosY,s="M ".concat(et.posX," ").concat(et.posY," C ").concat(e," ").concat(a," ").concat(Q.ctrPosX," ").concat(Q.ctrPosY),n=0;return et.posX!==Q.posX&&et.posY!==Q.posY?(s+=" ".concat(Q.posX," ").concat(Q.posY),n=1):(s+=" ".concat(Q.ctrPosX," ").concat(Q.ctrPosY),n=0),Object(r.jsxs)(o.Fragment,{children:[Object(r.jsx)("path",{d:s,fill:"none",stroke:"#000",strokeWidth:"1"}),Object(r.jsx)("circle",{className:"point-control",cx:Q.posX,cy:Q.posY,stroke:"#55f",r:"10"}),Object(r.jsx)("line",{x1:Q.posX,y1:Q.posY,x2:Q.ctrPosX,y2:Q.ctrPosY,stroke:"#555",strokeWidth:n})]})}}(),I.map((function(e,c){return Object(r.jsx)(M,{pathId:c,path:e,currentTool:t.currentTool},e.id)})),function(){if(A){var e=new Array(4).fill({posX:-1,posY:-1,ctrPosX:-1,ctrPosY:-1,ctr2PosX:-1,ctr2PosY:-1});switch(t.currentTool){case"rectangle":e=Y(Z);break;case"circle":e=g(Z)}var c="M ".concat(e[0].posX," ").concat(e[0].posY," \n      C ").concat(e[0].ctrPosX," ").concat(e[0].ctrPosY," ").concat(e[1].ctrPosX," ").concat(e[1].ctrPosY," ").concat(e[1].posX," ").concat(e[1].posY," \n      C ").concat(e[1].ctr2PosX," ").concat(e[1].ctr2PosY," ").concat(e[2].ctrPosX," ").concat(e[2].ctrPosY," ").concat(e[2].posX," ").concat(e[2].posY," \n      C ").concat(e[2].ctr2PosX," ").concat(e[2].ctr2PosY," ").concat(e[3].ctrPosX," ").concat(e[3].ctrPosY," ").concat(e[3].posX," ").concat(e[3].posY," \n      C ").concat(e[3].ctr2PosX," ").concat(e[3].ctr2PosY," ").concat(e[0].ctr2PosX," ").concat(e[0].ctr2PosY," ").concat(e[0].posX," ").concat(e[0].posY," Z");return Object(r.jsx)(o.Fragment,{children:Object(r.jsx)("path",{d:c,fill:"none",stroke:"#55f",strokeWidth:"1"})})}}()]})})},B=(c(35),Object(N.a)((function(t){var e,c=v.editingPathId,a=function(t){var e=t.target.name,r=t.target.value;-1!==c&&v.setStateInfo(c,e,r)};return-1!==c&&(e=v.pathList[c].nodes.length?v.pathList[c]:null),Object(r.jsx)(o.Fragment,{children:Object(r.jsxs)("div",{className:"statusContainer",children:[Object(r.jsx)("h4",{children:"\u72b6\u6001\u680f"}),Object(r.jsxs)("label",{className:"statusinput",children:[Object(r.jsx)("span",{children:"PositionX:"}),Object(r.jsx)("input",{type:"number",name:"X",value:e?e.nodes[0].posX.toFixed(1):0,onChange:a})]}),Object(r.jsxs)("label",{className:"statusinput",children:[Object(r.jsx)("span",{children:"PositionY:"}),Object(r.jsx)("input",{type:"number",name:"Y",value:e?e.nodes[0].posY.toFixed(1):0,onChange:a})]}),Object(r.jsxs)("label",{className:"statusinput",children:[Object(r.jsx)("span",{children:"fill:"}),Object(r.jsx)("input",{type:"color",name:"fill",value:e&&"none"!==e.fill?e.fill:"#ffffff",onChange:a})]}),Object(r.jsxs)("label",{className:"statusinput",children:[Object(r.jsx)("span",{children:"stroke Width:"}),Object(r.jsx)("input",{type:"number",name:"strokeWidth",value:e?e.strokeWidth:0,min:"0",max:"40",onChange:a})]}),Object(r.jsxs)("label",{className:"statusinput",children:[Object(r.jsx)("span",{children:"stroke:"}),Object(r.jsx)("input",{type:"color",name:"stroke",value:e?e.stroke:"#000000",onChange:a})]}),Object(r.jsxs)("label",{className:"statusinput",children:[Object(r.jsx)("span",{children:"rotate:"}),Object(r.jsx)("input",{type:"text",name:"rotate",readOnly:!0,value:e?e.rotate.toFixed(2):0})]})]})})}))),R=(c(36),function(t){function e(e){t.set(e.target.id)}return Object(r.jsx)("div",{className:"function",children:function(){switch(t.id){case"mouse":return[Object(r.jsx)("div",{className:"mouse_rotate_path"===t.currentTool?"functionItemSelect":"functionItem",onClick:e,id:"mouse_rotate_path",children:"Rotate Path"},0),Object(r.jsx)("div",{className:"mouse_scaling_path"===t.currentTool?"functionItemSelect":"functionItem",onClick:e,id:"mouse_scaling_path",children:"Scaling Path"},1),Object(r.jsx)("div",{className:"mouse_drag_path"===t.currentTool?"functionItemSelect":"functionItem",onClick:e,id:"mouse_drag_path",children:"Drag Path"},2)];case"pen":return[Object(r.jsx)("div",{className:"pen_add_node"===t.currentTool?"functionItemSelect":"functionItem",onClick:e,id:"pen_add_node",children:"Add Node"},0),Object(r.jsx)("div",{className:"pen_drag_node"===t.currentTool?"functionItemSelect":"functionItem",onClick:e,id:"pen_drag_node",children:"Drag Node"},1),Object(r.jsx)("div",{className:"pen_new_path"===t.currentTool?"functionItemSelect":"functionItem",onClick:e,id:"pen_new_path",children:"New Path"},2)];default:return null}}()})});c(37);function z(){var t=document.getElementById("editor"),e=(new XMLSerializer).serializeToString(t);e='<?xml version="1.0" standalone="no"?>\r\n'+(e=e.replace(/^<svg/,'<svg xmlns:xlink="http://www.w3.org/1999/xlink"'));var c=new Blob([e],{type:"text/plain"}),r=document.createElement("a");r.download="export.svg",r.href=window.URL.createObjectURL(c),r.textContent="Download ready",r.dataset.downloadurl=["text/plain",r.download,r.href].join(":"),r.click()}c(38);var A=c.p+"static/media/circle.292ce4e1.svg",q=c.p+"static/media/pen.4de46a1c.svg",U=c.p+"static/media/mouse.dfeff54d.svg",J=c.p+"static/media/download.ed6268b9.svg",Z=c.p+"static/media/rectangle.d8ea8f58.svg",G=function(t){function e(e){t.set(e.target.id)}return Object(r.jsxs)("div",{className:"toolbar",children:[Object(r.jsx)("div",{className:"toolitem",onClick:e,children:Object(r.jsx)("img",{className:-1!==t.currentTool.indexOf("mouse")?"itmeIconselect":"itmeIcon",id:"mouse",alt:"mouse",src:U})}),Object(r.jsx)("div",{className:"toolitem",onClick:e,children:Object(r.jsx)("img",{className:"circle"===t.currentTool?"itmeIconselect":"itmeIcon",id:"circle",alt:"circle",src:A})}),Object(r.jsx)("div",{className:"toolitem",onClick:e,children:Object(r.jsx)("img",{className:"rectangle"===t.currentTool?"itmeIconselect":"itmeIcon",id:"rectangle",alt:"rectangle",src:Z})}),Object(r.jsx)("div",{className:"toolitem",onClick:e,children:Object(r.jsx)("img",{className:-1!==t.currentTool.indexOf("pen")?"itmeIconselect":"itmeIcon",id:"pen",alt:"pen",src:q})}),Object(r.jsx)("div",{className:"toolitem",onClick:z,children:Object(r.jsx)("img",{className:"itmeIcon",src:J,alt:"dowmload"})})]})},H=(c(39),function(){var t=Object(o.useState)("mouse"),e=Object(i.a)(t,2),c=e[0],a=e[1],s=function(t){v.setCurrentTool(t),a(t)};return Object(r.jsxs)("div",{className:"basic-container",children:[Object(r.jsx)(G,{currentTool:c,set:s}),-1===c.indexOf("mouse")?null:Object(r.jsx)(R,{currentTool:c,set:s,id:"mouse"}),-1===c.indexOf("pen")?null:Object(r.jsx)(R,{currentTool:c,set:s,id:"pen"}),Object(r.jsx)(F,{currentTool:c}),Object(r.jsx)(B,{})]})});c(40);var K=function(){return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(H,{})})},Q=function(t){t&&t instanceof Function&&c.e(3).then(c.bind(null,42)).then((function(e){var c=e.getCLS,r=e.getFID,o=e.getFCP,a=e.getLCP,s=e.getTTFB;c(t),r(t),o(t),a(t),s(t)}))};n.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(K,{})}),document.getElementById("root")),Q()}},[[41,1,2]]]);
//# sourceMappingURL=main.d96644ed.chunk.js.map
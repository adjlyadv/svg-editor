{"version":3,"sources":["stores/UIStore.ts","elements/node.tsx","elements/path.tsx","containers/EditorContainer.tsx","utils/calculate.ts","containers/StatusContainer.tsx","asset/circle.svg","asset/pen.svg","asset/mouse.svg","asset/line.svg","asset/rectangle.svg","containers/ToolbarContainer.tsx","containers/BasciLayout.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["UIStore","editorInfo","width","height","left","top","mouseState","type","drugging","pathid","nodeid","pathList","addPath","push","id","length","nodes","strokeWidth","stroke","fill","setNodes","pathId","nodeId","node","addNodes","posX","posY","ctrPosX","ctrPosY","setMouseState","dragging","setStateInfo","name","value","node1","Number","node2","makeAutoObservable","this","Node","observer","props","handleMouseDown","elec","event","console","log","className","onMouseDown","e","cx","cy","r","x1","y1","x2","y2","path","getD","d","i","mockCtrX","mockCtrY","useState","editing","setEditing","onDoubleClick","stopPropagation","paths","mockNode","attrD","getEditingPath","map","item","index","EditorContainer","currentTool","useEffect","edtiorRef","current","getBoundingClientRect","setEditorInfo","clickTimeChange","useRef","setPathId","setNode","handleMouseMove","_","x","clientX","y","clientY","getRelativePositon","ref","onMouseMove","onMouseUp","clearTimeout","onClick","setTimeout","_pathId","pageX","pageY","StatusContainer","inputChange","target","pathInfo","defaultValue","onChange","min","max","ToolbarContainer","handleClick","set","alt","src","mouse","circle","rectangle","line","pen","BasicLayout","setCurrenttool","App","BasciLayout","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1a88f297.chunk.js","sourcesContent":["import { makeAutoObservable } from 'mobx';\n\nexport interface Node {\n  posX: number,\n  posY: number,\n  ctrPosX: number,\n  ctrPosY: number\n}\n\nexport interface Path {\n  id: number,\n  nodes: Node[],\n  strokeWidth: number,\n  stroke: string,\n  fill:string\n}\n\nclass UIstore {\n\n  editorInfo = {\n    width: 800,\n    height: 600,\n    left: 0,\n    top: 0\n  }\n  mouseState ={\n    type: false,\n    drugging: false,\n    pathid: 0,\n    nodeid: 0\n  }\n\n  pathList: Path[] = [];\n\n  constructor() {\n    makeAutoObservable(this);\n    this.pathList.push(\n      {\n        id: 0,\n        nodes: [\n          {\n            posX: 125.5,\n            posY: 171.5,\n            ctrPosX: 194.5,\n            ctrPosY: 85.5\n          },\n          {\n            posX: 246.5,\n            posY: 140.5,\n            ctrPosX: 288.5,\n            ctrPosY: 95.5,\n          },\n          {\n            posX: 210,\n            posY: 261,\n            ctrPosX: 309.5,\n            ctrPosY: 309.5,\n          },\n        ],\n        strokeWidth: 5,\n        stroke: \"#000000\",\n        fill: \"none\"\n      }\n    )\n    // M125.5,171.5C194.5,85.5 288.5,95.5 246.5,140.5C204.5,185.5 309.5,309.5 210,261\n  }\n\n  addPath = () => {\n    this.pathList.push(\n        {\n          id: this.pathList.length,\n          nodes: [],\n          strokeWidth: 5,\n          stroke: \"#000000\",\n          fill: \"#ffffff\"\n        }\n    )\n    return this.pathList.length;\n  }\n  setNodes = (pathId: number, nodeId: number, node: Node) => {\n    this.pathList[pathId].nodes[nodeId] = node;\n  }\n\n  addNodes =(pathId: number , posX: number, posY: number) => {\n    this.pathList[pathId-1].nodes.push(\n        {\n          posX: posX,\n          posY: posY,\n          ctrPosX:posX,\n          ctrPosY:posY,\n        }\n    )\n\n  }\n  setMouseState = (type:boolean,dragging:boolean,pathid:number,nodeid:number) => {\n    this.mouseState.pathid = pathid;\n    this.mouseState.nodeid = nodeid;\n    this.mouseState.type = type;//为真是锚点，为假是控制点\n    this.mouseState.drugging = dragging;\n  }\n\n  setStateInfo = (pathId: number, name:string, value:string) => {\n    switch(name){\n      case 'X':\n        let node1 = this.pathList[0].nodes[0];\n        node1.posX = Number(value);\n        this.setNodes(0, 0,node1);\n        break;\n      case 'Y':\n        let node2 = this.pathList[0].nodes[0];\n        node2.posY = Number(value)\n        this.setNodes(0, 0,node2);\n        break;\n      case 'fill':\n        this.pathList[pathId].fill = value;\n        break;\n      case 'strokeWidth':\n        this.pathList[pathId].strokeWidth = Number(value);\n        break;\n      case 'stroke':\n        this.pathList[pathId].stroke = value;\n        break;\n      default:        \n    }\n  }\n}\n\nexport const UIStore = new UIstore();","import { observer} from 'mobx-react';\nimport React, { Fragment } from 'react';\nimport { Node as typeNode, UIStore } from '../stores/UIStore';\n\ninterface Props {\n  node: typeNode,\n  id: number,\n  pathId: number\n}\n\nconst Node = observer((props: Props) => {\n\n  const node = UIStore.pathList[props.pathId].nodes[props.id]; \n\n  const handleMouseDown = (elec:boolean, event: any) => {\n    if(elec){\n      UIStore.setMouseState(true,true,props.pathId,props.id);\n      console.log(\"按下去锚点属于路径\"+props.pathId+\"的锚点\"+props.id);\n    }else{\n      UIStore.setMouseState(false,true,props.pathId,props.id);\n      console.log(\"按下去控制点属于路径\"+props.pathId+\"的锚点\"+props.id)\n    }\n  }\n  \n  return(\n    <Fragment>\n      <circle className=\"point-control\" onMouseDown={(e) => handleMouseDown(true, e)} cx={node.posX} cy={node.posY} stroke=\"#55f\" r=\"4\" />\n        <line x1={node.posX} y1={node.posY} x2={node.ctrPosX} y2={node.ctrPosY} stroke=\"#555\" strokeWidth=\"1\" />\n      <circle className=\"point-control\" onMouseDown={(e) => handleMouseDown(false, e)} cx={node.ctrPosX} cy={node.ctrPosY} stroke=\"#55f\" r=\"4\" />\n    </Fragment>\n  )\n\n})\n\nexport default Node;","import React, { Fragment, useState } from 'react';\nimport { Node as typeNode } from '../stores/UIStore'\nimport Node from './node';\n// import Bezier from 'bezier-js';\nimport { observer } from 'mobx-react';\n\ninterface Props{\n  path: {\n    id: number,\n    nodes: typeNode[],\n    strokeWidth: number,\n    stroke: string,\n    fill:string\n  }\n}\n\nconst path: React.FC<Props> = observer((props: Props) => {\n\n    const getD = (nodes: string | any[]) => {\n\n      let d = \"\";\n      for (let i = 0; i < nodes.length; i++) {\n        if (i === 0) {\n          d += `M ${nodes[i].posX} ${nodes[i].posY} C ${nodes[i].ctrPosX} ${nodes[i].ctrPosY} `\n        } else if (i !== nodes.length - 1) {\n          const mockCtrX = nodes[i].posX * 2 - nodes[i].ctrPosX;\n          const mockCtrY = nodes[i].posY * 2 - nodes[i].ctrPosY;\n          d += `${nodes[i].ctrPosX} ${nodes[i].ctrPosY} ${nodes[i].posX} ${nodes[i].posY} C ${mockCtrX} ${mockCtrY} `\n        } else {\n          d += `${nodes[i].ctrPosX} ${nodes[i].ctrPosY} ${nodes[i].posX} ${nodes[i].posY}`\n        }\n      }\n      console.log(d)\n      \n      return d\n    }\n\n    const getEditingPath = () => {\n      let paths = [];\n      let mockNode = null;\n\n      for (let i = 0; i + 1 < nodes.length; i++) {\n\n        if (i !== 0 && i + 1 !== nodes.length) {\n          const node = nodes[i];\n          const mockCtrX = nodes[i].posX * 2 - nodes[i].ctrPosX;\n          const mockCtrY = nodes[i].posY * 2 - nodes[i].ctrPosY;\n\n          mockNode = {\n            posX: node.posX,\n            posY: node.posY,\n            ctrPosX: mockCtrX,\n            ctrPosY: mockCtrY\n          }\n        }\n\n\n        const attrD = getD([mockNode ? mockNode : nodes[i], nodes[i + 1]]);\n        paths.push({\n          attrD: attrD,\n          nodes: [\n            mockNode ? mockNode : nodes[i], \n            nodes[i + 1]\n          ],\n        });\n      }\n\n      return paths\n    }\n\n    const handleDoubleClick = (event: any) => {\n      event.stopPropagation();\n      setEditing(true);\n    }\n\n    const [editing, setEditing] = useState<boolean>(false);\n    const { id, nodes } = props.path;\n\n    if (!editing) {\n      return (\n        <Fragment>\n          <path onDoubleClick={handleDoubleClick} d={getD(nodes)} strokeWidth={props.path.strokeWidth} stroke={props.path.stroke}fill={props.path.fill}/>\n        </Fragment>\n      );\n    }\n\n    const paths = getEditingPath();\n\n    return (\n      <Fragment>\n        {\n          paths.map(item => \n            <Fragment>\n              <path d={item.attrD} strokeWidth={props.path.strokeWidth} stroke={props.path.stroke}fill={props.path.fill}/>\n              {nodes.map((node, index) => \n                <Node node={node} id={index} pathId={id} />\n              )}\n            </Fragment>\n          )\n        }\n      </Fragment>\n    )\n\n\n  }\n)\n\n\nexport default path;","import React, { useEffect, useRef , useState} from 'react';\nimport { Node as typeNode, UIStore } from '../stores/UIStore';\nimport Path from '../elements/path';\nimport { getRelativePositon } from '../utils/calculate';\nimport * as _ from 'lodash';\nimport '../style/EditorContainer.scss';\n\ninterface Props{\n  currentTool:string\n}\n\nconst EditorContainer: React.FC<Props> = ({currentTool}) =>  {\n\n  useEffect(() => {\n    if (!edtiorRef) {\n      return\n    }\n    const editorInfo = edtiorRef?.current?.getBoundingClientRect();\n    if (editorInfo) {\n      UIStore.editorInfo.top = editorInfo.top;\n      UIStore.editorInfo.left = editorInfo.left;\n      setEditorInfo(editorInfo);\n    }\n  }, [])\n\n  const edtiorRef = useRef<SVGSVGElement>(null);\n  var clickTimeChange:any;\n  const [editing, setEditing] = useState<boolean>(true)\n  const [pathId, setPathId] = useState<number>(-1)\n  const [editorInfo, setEditorInfo] = useState(UIStore.editorInfo);\n\n  const pathList = UIStore.pathList;\n  let pathid = UIStore.mouseState.pathid;\n  let nodeid = UIStore.mouseState.nodeid;\n\n\n  const [node, setNode] = useState<typeNode>(pathList[UIStore.mouseState.pathid].nodes[UIStore.mouseState.nodeid]);\n  \n  \n  useEffect(() => {\n    UIStore.setNodes(UIStore.mouseState.pathid, UIStore.mouseState.nodeid, node);\n  }, [node])\n\n  const handleMouseDown = (event: any) => {\n    event.stopPropagation();\n    pathid = UIStore.mouseState.pathid;\n    nodeid = UIStore.mouseState.nodeid;\n    let node1 = UIStore.pathList[pathid].nodes[nodeid];\n    setNode({\n      posX: node1.posX,\n      posY: node1.posY,\n      ctrPosX: node1.ctrPosX,\n      ctrPosY: node1.ctrPosY\n    });\n  }\n\n  const handleMouseMove = _.debounce((event: any) => {\n    event.stopPropagation();\n    if(!UIStore.mouseState.drugging){\n      return\n    }\n    const { x, y } = getRelativePositon(event);\n    //锚点\n    if(UIStore.mouseState.type){\n    setNode({\n      posX: x,\n      posY: y,\n      ctrPosX: node.ctrPosX,\n      ctrPosY: node.ctrPosY\n    });\n  }\n  //控制点\n  else{\n    setNode({\n      posX: node.posX,\n      posY: node.posY,\n      ctrPosX: x,\n      ctrPosY: y\n    })\n  }\n\n  }, 5, { 'trailing': true })\n  \n  const handleMouseUp = (event: any) => {\n    event.stopPropagation();\n    UIStore.setMouseState(false,false,pathid,nodeid);\n  }\n\n  const pathClick:any = (e:any) => {\n    e.stopPropagation();\n    clearTimeout(clickTimeChange);\n    clickTimeChange = setTimeout(\n        () => {\n          switch(currentTool) {\n            case \"pen\": {\n              if(!editing){\n                setEditing(true);\n              }\n              else{\n                let _pathId = pathId;\n                if(currentTool === \"pen\" && pathId === -1){\n                  _pathId = UIStore.addPath()\n                  setPathId(_pathId);\n                }\n                UIStore.addNodes(_pathId, e.pageX-editorInfo.left,e.pageY-editorInfo.top)\n              }\n            }\n          }\n        },\n        300\n    );\n\n  }\n  \n  const pathDoubleClick:any = () => {\n    clearTimeout(clickTimeChange);\n    setEditing(false);\n    setPathId(-1);\n  }\n\n  return(\n    <div className=\"editor-container\">\n      <svg ref={edtiorRef} className=\"editor-svg\" width={editorInfo.width} height={editorInfo.height}\n           onMouseDown={handleMouseDown} onMouseMove={handleMouseMove} onMouseUp={handleMouseUp}\n           onDoubleClick={pathDoubleClick} onClick={pathClick}>\n        {pathList.map(path => (\n          <Path key={path.id} path={path}/>\n        ))}\n      </svg>\n    </div>\n  )\n}\n\nexport default EditorContainer;","import { UIStore } from '../stores/UIStore'\n\nexport function getRelativePositon(event: any) {\n  const editorInfo = UIStore.editorInfo;\n  return {\n    x: event.clientX - editorInfo.left,\n    y: event.clientY - editorInfo.top\n  }\n}","\nimport React, { Fragment } from 'react';\nimport '../style/statusContainer.scss';\nimport { UIStore } from '../stores/UIStore';\n\nconst StatusContainer: React.FC<{}> = () => {\n  \n  const inputChange = (event: any) => {\n    let name = event.target.name;\n    let value = event.target.value;\n      UIStore.setStateInfo(0,name,value);\n  }\n\n  const pathInfo = UIStore.pathList[0];\n\n  return (\n    <Fragment>\n      <div className = \"statusContainer\">\n          <h4>状态栏</h4>\n          <label className = \"statusinput\">\n            <span>PositionX:</span>\n            <input type=\"number\"  name=\"X\" defaultValue={pathInfo.nodes[0].posX} onChange={inputChange}/>\n          </label>\n          <label className = \"statusinput\">\n            <span>PositionY:</span>\n            <input type=\"number\" name=\"Y\" defaultValue = {pathInfo.nodes[0].posY} onChange = {inputChange}/>\n          </label>\n          <label className = \"statusinput\">\n            <span>fill:</span>\n            <input type=\"color\" name=\"fill\" defaultValue = {pathInfo.fill} onChange = {inputChange}/>\n          </label>\n          <label className = \"statusinput\">\n            <span>stroke Width:</span>\n            <input type=\"number\" name=\"strokeWidth\" min = \"0\" max = \"40\" defaultValue = {pathInfo.strokeWidth} onChange = {inputChange}/>\n          </label>\n          <label className = \"statusinput\">\n            <span>stroke:</span>\n            <input type=\"color\" name=\"stroke\" defaultValue = {pathInfo.stroke} onChange = {inputChange}/>\n          </label>\n      </div>\n    </Fragment>\n  )\n\n}\n\nexport default StatusContainer;\n","export default __webpack_public_path__ + \"static/media/circle.292ce4e1.svg\";","export default __webpack_public_path__ + \"static/media/pen.4de46a1c.svg\";","export default __webpack_public_path__ + \"static/media/mouse.dfeff54d.svg\";","export default __webpack_public_path__ + \"static/media/line.86048c7a.svg\";","export default __webpack_public_path__ + \"static/media/rectangle.d8ea8f58.svg\";","import React from 'react';\nimport '../style/ToolbarContainer.scss'\nimport circle from '../asset/circle.svg'\nimport pen from '../asset/pen.svg'\nimport mouse from '../asset/mouse.svg'\nimport line from '../asset/line.svg'\nimport rectangle from '../asset/rectangle.svg'\n\ninterface Props{\n  currentTool:string;\n  set:(arg0: string)=>void;\n}\n\nconst ToolbarContainer:  React.FC<Props> = (props) => {\n\n  function handleClick(e:any){\n    props.set(e.target.id)\n  }\n\n  return (\n    <div className=\"toolbar\">\n        <div className=\"toolitem\" onClick={handleClick} >\n            <img className={props.currentTool===\"mouse\"?\"itmeIconselect\":\"itmeIcon\"} id=\"mouse\"  alt=\"mouse\" src={mouse}/>\n        </div>\n        <div className=\"toolitem\" onClick={handleClick}>\n            <img className={props.currentTool===\"circle\"?\"itmeIconselect\":\"itmeIcon\"} id=\"circle\" alt=\"circle\" src={circle}/>\n        </div>\n        <div className=\"toolitem\" onClick={handleClick}>\n            <img className={props.currentTool===\"rectangle\"?\"itmeIconselect\":\"itmeIcon\"} id=\"rectangle\" alt=\"rectangle\" src={rectangle}/>\n        </div>\n        <div className=\"toolitem\" onClick={handleClick}>\n            <img className={props.currentTool===\"line\"?\"itmeIconselect\":\"itmeIcon\"} id=\"line\" alt=\"line\" src={line}/>\n        </div>\n        <div className=\"toolitem\" onClick={handleClick}>\n            <img className={props.currentTool===\"pen\"?\"itmeIconselect\":\"itmeIcon\"} id=\"pen\" alt=\"pen\" src={pen}/>\n        </div>\n    </div>\n  )\n}\n\nexport default ToolbarContainer;\n","import React, { useState } from 'react';\nimport EditorContainer from './EditorContainer';\nimport StatusContainer from './StatusContainer';\nimport '../style/index.scss';\nimport ToolbarContainer from \"./ToolbarContainer\";\nimport '../style/BasicContainer.scss'\n\n\nconst BasicLayout = () => {\n\n  const [currentTool, setCurrenttool] = useState(\"mouse\");\n\n  return(\n    <div className=\"basic-container\">\n      <ToolbarContainer currentTool={currentTool} set={setCurrenttool}/>\n      <EditorContainer currentTool={currentTool}/>\n      <StatusContainer />\n    </div>\n  )\n}\n\nexport default BasicLayout\n","import React from 'react';\nimport BasciLayout from './containers/BasciLayout'\nimport './App.css';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <BasciLayout />\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}
(this["webpackJsonpsvg-editor"]=this["webpackJsonpsvg-editor"]||[]).push([[0],{22:function(t,e,s){},27:function(t,e,s){},28:function(t,e,s){},29:function(t,e,s){},30:function(t,e,s){},31:function(t,e,s){},32:function(t,e,s){},33:function(t,e,s){"use strict";s.r(e);var o=s(0),c=s(1),n=s.n(c),r=s(14),i=s.n(r),a=(s(22),s(3)),l=s(10),d=s(15),u=s(2),p=0,h=1,j=2,P=new function t(){var e=this;Object(d.a)(this,t),this.editorInfo={width:800,height:600,left:0,top:0},this.mouseState={type:p,drugging:!1,pathid:0,nodeid:0},this.pathList=[],this.addPath=function(){return e.pathList.push({id:e.pathList.length,nodes:[],strokeWidth:5,stroke:"#000000",fill:"#ffffff"}),e.pathList.length},this.setNodes=function(t,s,o){e.pathList[t].nodes[s]=o},this.addNodes=function(t,s,o,c,n,r,i,a){var d=e.pathList[t].nodes.length;e.pathList[t].nodes=[].concat(Object(l.a)(e.pathList[t].nodes.slice(0,a||d-1)),[{posX:s,posY:o,ctrPosX:c||s,ctrPosY:n||o,ctr2PosX:r,ctr2PosY:i}],Object(l.a)(e.pathList[t].nodes.slice(a||d-1)))},this.setMouseState=function(t,s,o,c){e.mouseState.pathid=o,e.mouseState.nodeid=c,e.mouseState.type=t,e.mouseState.drugging=s},this.setStateInfo=function(t,s,o){switch(s){case"X":var c=e.pathList[0].nodes[0];c.posX=Number(o),e.setNodes(0,0,c);break;case"Y":var n=e.pathList[0].nodes[0];n.posY=Number(o),e.setNodes(0,0,n);break;case"fill":e.pathList[t].fill=o;break;case"strokeWidth":e.pathList[t].strokeWidth=Number(o);break;case"stroke":e.pathList[t].stroke=o}},Object(u.k)(this),this.pathList.push({id:0,nodes:[{posX:125.5,posY:171.5,ctrPosX:194.5,ctrPosY:85.5},{posX:246.5,posY:140.5,ctrPosX:288.5,ctrPosY:95.5,ctr2PosX:204.5,ctr2PosY:185.5},{posX:210,posY:261,ctrPosX:309.5,ctrPosY:309.5}],strokeWidth:5,stroke:"#000000",fill:"none"})};function b(t){var e=P.editorInfo;return{x:t.clientX-e.left,y:t.clientY-e.top}}var f=s(4),m=Object(f.a)((function(t){if(-1===t.id)return Object(o.jsx)("circle",{onClick:t.onClick,onMouseLeave:t.onMouseLeave,className:"point-control-add",cx:t.node.posX,cy:t.node.posY});var e=P.pathList[t.pathId].nodes[t.id],s=function(e,s){switch(e){case p:P.setMouseState(p,!0,t.pathId,t.id);break;case h:P.setMouseState(h,!0,t.pathId,t.id);break;case j:P.setMouseState(j,!0,t.pathId,t.id)}};return Object(o.jsxs)(c.Fragment,{children:[Object(o.jsx)("circle",{className:"point-control",onMouseDown:function(t){return s(p)},cx:e.posX,cy:e.posY}),Object(o.jsx)("line",{x1:e.posX,y1:e.posY,x2:e.ctrPosX,y2:e.ctrPosY,stroke:"#555",strokeWidth:"1"}),Object(o.jsx)("circle",{className:"point-control",onMouseDown:function(t){return s(h)},cx:e.ctrPosX,cy:e.ctrPosY}),e.ctr2PosX&&e.ctr2PosY&&Object(o.jsx)("circle",{className:"point-control",onMouseDown:function(t){return s(j)},cx:e.ctr2PosX,cy:e.ctr2PosY}),e.ctr2PosX&&e.ctr2PosY&&Object(o.jsx)("line",{x1:e.posX,y1:e.posY,x2:e.ctr2PosX,y2:e.ctr2PosY,stroke:"#555",strokeWidth:"1"})]})})),O=s(7),X=s.n(O),Y=s(16),x=s.n(Y),v=Object(f.a)((function(t){var e=function(t){for(var e="",s=0;s<t.length;s++)0===s?e+="M ".concat(t[s].posX," ").concat(t[s].posY," C ").concat(t[s].ctrPosX," ").concat(t[s].ctrPosY," "):s+1<=t.length-1?e+="".concat(t[s].ctrPosX," ").concat(t[s].ctrPosY," ").concat(t[s].posX," ").concat(t[s].posY," C ").concat(t[s].ctr2PosX," ").concat(t[s].ctr2PosY," "):e+="".concat(t[s].ctrPosX," ").concat(t[s].ctrPosY," ").concat(t[s].posX," ").concat(t[s].posY);return e},s=function(e){e.stopPropagation(),t.setPathid(t.path.id)},n=X.a.throttle((function(t,e){t.stopPropagation();var s=b(t),o=s.x,c=s.y,n=e.nodes.reduce((function(t,s,o){return o===e.nodes.length-1?t.push(s.ctrPosX,s.ctrPosY,s.posX,s.posY):t.push(s.posX,s.posY,s.ctrPosX,s.ctrPosY),t}),[]).flat(1),r=new x.a(n);v(r);var i=r.project({x:o,y:c});j({posX:i.x,posY:i.y,ctrPosX:i.x,ctrPosY:i.y,t:i.t})}),50),r=Object(c.useState)(!1),i=Object(a.a)(r,2),l=i[0],d=i[1],u=Object(c.useState)(),p=Object(a.a)(u,2),h=p[0],j=p[1],f=Object(c.useState)(),O=Object(a.a)(f,2),Y=O[0],v=O[1],g=t.path,k=g.id,N=g.nodes;if(!l)return Object(o.jsx)(c.Fragment,{children:Object(o.jsx)("path",{onDoubleClick:function(e){e.stopPropagation(),"mouse"===t.currentTool&&d(!0)},onClick:s,d:e(N),strokeWidth:t.path.strokeWidth,stroke:t.path.stroke,fill:t.path.fill})});var S=function(){for(var t=[],s=null,o=0;o+1<N.length;o++){if(0!==o&&o+1!==N.length){var c=N[o];s={posX:c.posX,posY:c.posY,ctrPosX:c.ctr2PosX,ctrPosY:c.ctr2PosY}}var n=e([s||N[o],N[o+1]]);t.push({attrD:n,nodes:[s||N[o],N[o+1]]})}return t}();return Object(o.jsxs)(c.Fragment,{children:[S.map((function(e){return Object(o.jsx)(c.Fragment,{children:Object(o.jsx)("path",{onClick:s,d:e.attrD,onMouseOver:function(t){return n(t,e)},strokeWidth:t.path.strokeWidth,stroke:t.path.stroke,fill:t.path.fill},e.attrD)})})),N.map((function(t,e){return Object(o.jsx)(m,{node:t,id:e,pathId:k})})),h&&Object(o.jsx)(m,{node:h,id:-1,pathId:-1,onClick:function(){var t=null===Y||void 0===Y?void 0:Y.split(h.t),e=null===t||void 0===t?void 0:t.left.points;if(t&&e){var s=N.findIndex((function(t){return t.posX===(null===Y||void 0===Y?void 0:Y.points[0].x)&&t.posY===(null===Y||void 0===Y?void 0:Y.points[0].y)})),o={posX:e[0].x,posY:e[0].y,ctrPosX:s?P.pathList[k].nodes[s].ctrPosX:e[1].x,ctrPosY:s?P.pathList[k].nodes[s].ctrPosY:e[1].y,ctr2PosX:s?e[1].x:void 0,ctr2PosY:s?e[1].y:void 0},c={posX:e[3].x,posY:e[3].y,ctrPosX:e[2].x,ctrPosY:e[2].y,ctr2PosX:0,ctr2PosY:0};P.setNodes(k,s,o),o={posX:(e=null===t||void 0===t?void 0:t.right.points)[3].x,posY:e[3].y,ctrPosX:e[2].x,ctrPosY:e[2].y,ctr2PosX:P.pathList[k].nodes[s+1].ctr2PosX||void 0,ctr2PosY:P.pathList[k].nodes[s+1].ctr2PosY||void 0},c.ctr2PosX=e[1].x,c.ctr2PosY=e[1].y,P.setNodes(k,s+1,o),P.addNodes(k,c.posX,c.posY,c.ctrPosX,c.ctrPosY,c.ctr2PosX,c.ctr2PosY,s+1),j(null)}},onMouseLeave:function(){return j(null)}})]})})),g=(s(27),function(t){Object(c.useEffect)((function(){var t;if(s){var e=null===s||void 0===s||null===(t=s.current)||void 0===t?void 0:t.getBoundingClientRect();e&&(P.editorInfo.top=e.top,P.editorInfo.left=e.left,g(e))}}),[]);var e,s=Object(c.useRef)(null),n=Object(c.useState)(!0),r=Object(a.a)(n,2),i=r[0],l=r[1],d=Object(c.useState)(-1),u=Object(a.a)(d,2),f=u[0],m=u[1],X=Object(c.useState)(P.editorInfo),Y=Object(a.a)(X,2),x=Y[0],g=Y[1],k=P.pathList,N=P.mouseState.pathid,S=P.mouseState.nodeid,y=Object(c.useState)(k[P.mouseState.pathid].nodes[P.mouseState.nodeid]),L=Object(a.a)(y,2),I=L[0],C=L[1];Object(c.useEffect)((function(){P.setNodes(P.mouseState.pathid,P.mouseState.nodeid,I)}),[I]);var M=O.debounce((function(t){if(t.stopPropagation(),P.mouseState.drugging){var e=b(t),s=e.x,o=e.y;switch(P.mouseState.type){case p:C({posX:s,posY:o,ctrPosX:I.ctrPosX,ctrPosY:I.ctrPosY,ctr2PosX:I.ctr2PosX,ctr2PosY:I.ctr2PosY});break;case h:C({posX:I.posX,posY:I.posY,ctrPosX:s,ctrPosY:o,ctr2PosX:I.ctr2PosX,ctr2PosY:I.ctr2PosY});break;case j:C({posX:I.posX,posY:I.posY,ctrPosX:I.ctrPosX,ctrPosY:I.ctrPosY,ctr2PosX:s,ctr2PosY:o})}}}),5,{trailing:!0});return Object(o.jsx)("div",{className:"editor-container",children:Object(o.jsx)("svg",{ref:s,className:"editor-svg",width:x.width,height:x.height,onMouseDown:function(t){t.stopPropagation(),N=P.mouseState.pathid,S=P.mouseState.nodeid;var e=P.pathList[N].nodes[S];C({posX:e.posX,posY:e.posY,ctrPosX:e.ctrPosX,ctrPosY:e.ctrPosY,ctr2PosX:e.ctr2PosX,ctr2PosY:e.ctr2PosY})},onMouseMove:M,onMouseUp:function(t){t.stopPropagation(),P.setMouseState(p,!1,N,S)},onDoubleClick:function(){clearTimeout(e),l(!1),m(-1)},onClick:function(s){s.stopPropagation(),clearTimeout(e),e=setTimeout((function(){switch(t.currentTool){case"pen":if(i){var e=f;"pen"===t.currentTool&&-1===f&&(e=P.addPath(),m(e)),P.addNodes(e,s.pageX-x.left,s.pageY-x.top)}else l(!0)}}),300)},children:k.map((function(e){return Object(o.jsx)(v,{path:e,setPathid:t.set,currentTool:t.currentTool},e.id)}))})})}),k=(s(28),Object(f.a)((function(t){var e=function(e){var s=e.target.name,o=e.target.value;P.setStateInfo(t.currentPathid,s,o)},s=P.pathList[t.currentPathid];return Object(o.jsx)(c.Fragment,{children:Object(o.jsxs)("div",{className:"statusContainer",children:[Object(o.jsx)("h4",{children:"\u72b6\u6001\u680f"}),Object(o.jsxs)("label",{className:"statusinput",children:[Object(o.jsx)("span",{children:"PositionX:"}),Object(o.jsx)("input",{type:"number",name:"X",value:s.nodes[0].posX,onChange:e})]}),Object(o.jsxs)("label",{className:"statusinput",children:[Object(o.jsx)("span",{children:"PositionY:"}),Object(o.jsx)("input",{type:"number",name:"Y",value:s.nodes[0].posY,onChange:e})]}),Object(o.jsxs)("label",{className:"statusinput",children:[Object(o.jsx)("span",{children:"fill:"}),Object(o.jsx)("input",{type:"color",name:"fill",value:s.fill,onChange:e})]}),Object(o.jsxs)("label",{className:"statusinput",children:[Object(o.jsx)("span",{children:"stroke Width:"}),Object(o.jsx)("input",{type:"number",name:"strokeWidth",min:"0",max:"40",value:s.strokeWidth,onChange:e})]}),Object(o.jsxs)("label",{className:"statusinput",children:[Object(o.jsx)("span",{children:"stroke:"}),Object(o.jsx)("input",{type:"color",name:"stroke",value:s.stroke,onChange:e})]})]})})}))),N=(s(29),s(30),s.p+"static/media/circle.292ce4e1.svg"),S=s.p+"static/media/pen.4de46a1c.svg",y=s.p+"static/media/mouse.dfeff54d.svg",L=s.p+"static/media/line.86048c7a.svg",I=s.p+"static/media/rectangle.d8ea8f58.svg",C=function(t){function e(e){t.set(e.target.id)}return Object(o.jsxs)("div",{className:"toolbar",children:[Object(o.jsx)("div",{className:"toolitem",onClick:e,children:Object(o.jsx)("img",{className:"mouse"===t.currentTool?"itmeIconselect":"itmeIcon",id:"mouse",alt:"mouse",src:y})}),Object(o.jsx)("div",{className:"toolitem",onClick:e,children:Object(o.jsx)("img",{className:"circle"===t.currentTool?"itmeIconselect":"itmeIcon",id:"circle",alt:"circle",src:N})}),Object(o.jsx)("div",{className:"toolitem",onClick:e,children:Object(o.jsx)("img",{className:"rectangle"===t.currentTool?"itmeIconselect":"itmeIcon",id:"rectangle",alt:"rectangle",src:I})}),Object(o.jsx)("div",{className:"toolitem",onClick:e,children:Object(o.jsx)("img",{className:"line"===t.currentTool?"itmeIconselect":"itmeIcon",id:"line",alt:"line",src:L})}),Object(o.jsx)("div",{className:"toolitem",onClick:e,children:Object(o.jsx)("img",{className:"pen"===t.currentTool?"itmeIconselect":"itmeIcon",id:"pen",alt:"pen",src:S})})]})},M=(s(31),function(){var t=Object(c.useState)("mouse"),e=Object(a.a)(t,2),s=e[0],n=e[1],r=Object(c.useState)(0),i=Object(a.a)(r,2),l=i[0],d=i[1];return Object(o.jsxs)("div",{className:"basic-container",children:[Object(o.jsx)(C,{currentTool:s,set:n}),Object(o.jsx)(g,{currentTool:s,currentPathid:l,set:d}),Object(o.jsx)(k,{currentPathid:l})]})});s(32);var T=function(){return Object(o.jsx)("div",{className:"App",children:Object(o.jsx)(M,{})})},w=function(t){t&&t instanceof Function&&s.e(3).then(s.bind(null,34)).then((function(e){var s=e.getCLS,o=e.getFID,c=e.getFCP,n=e.getLCP,r=e.getTTFB;s(t),o(t),c(t),n(t),r(t)}))};i.a.render(Object(o.jsx)(n.a.StrictMode,{children:Object(o.jsx)(T,{})}),document.getElementById("root")),w()}},[[33,1,2]]]);
//# sourceMappingURL=main.456679a6.chunk.js.map